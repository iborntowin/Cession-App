import{s as dr,a as w,f as i,l as I,F as R,J as cr,d as a,c as y,g as u,h as o,y as Se,m as P,G as J,j as t,i as se,w as e,z as Re,n as C,u as $s,o as fr,t as pr,k as er,x as Ds,I as ft,N as tr,H as mr}from"../chunks/scheduler.fb6ad399.js";import{S as hr,i as vr,t as It,c as ir,a as Pt,g as ur,b as _r,d as gr,m as br,f as ut,e as wr}from"../chunks/index.19f0e15d.js";import{s as Ge,g as Es}from"../chunks/navigation.68a3d764.js";import{p as yr}from"../chunks/stores.f83cb6aa.js";import{b as sr}from"../chunks/api.b4688d57.js";import{P as kr}from"../chunks/PaymentSection.cedf78e6.js";import{a as Er,o as xr}from"../chunks/pdfGenerator.aa2f9fb1.js";import{t as Dr}from"../chunks/index.92f608cc.js";import{c as dt,a as os,s as rr}from"../chunks/index.548ee1c0.js";import{f as xs}from"../chunks/index.7c030542.js";function Ir({params:r}){return{id:r.id}}const Yr=Object.freeze(Object.defineProperty({__proto__:null,load:Ir},Symbol.toStringTag,{value:"Module"}));function Pr(r){let s,l,n,p,_=r[6]("cessions.details.actions.back")+"",v,h,d;return{c(){s=i("button"),l=R("svg"),n=R("path"),p=w(),v=I(_),this.h()},l(m){s=u(m,"BUTTON",{class:!0});var f=o(s);l=J(f,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var N=o(l);n=J(N,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),o(n).forEach(a),N.forEach(a),p=y(f),v=P(f,_),f.forEach(a),this.h()},h(){t(n,"fill-rule","evenodd"),t(n,"d","M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"),t(n,"clip-rule","evenodd"),t(l,"xmlns","http://www.w3.org/2000/svg"),t(l,"class","h-4 w-4 mr-2"),t(l,"viewBox","0 0 20 20"),t(l,"fill","currentColor"),t(s,"class","flex items-center px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-200 font-medium text-sm shadow-sm hover:shadow-md")},m(m,f){se(m,s,f),e(s,l),e(l,n),e(s,p),e(s,v),h||(d=Re(s,"click",r[15]),h=!0)},p(m,f){f&64&&_!==(_=m[6]("cessions.details.actions.back")+"")&&C(v,_)},d(m){m&&a(s),h=!1,d()}}}function Cr(r){let s,l,n,p,_=(r[6]("common.actions.back_to_salary_cessions")||"Back to Salary Cessions")+"",v;return{c(){s=i("a"),l=R("svg"),n=R("path"),p=w(),v=I(_),this.h()},l(h){s=u(h,"A",{href:!0,class:!0});var d=o(s);l=J(d,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var m=o(l);n=J(m,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),o(n).forEach(a),m.forEach(a),p=y(d),v=P(d,_),d.forEach(a),this.h()},h(){t(n,"fill-rule","evenodd"),t(n,"d","M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"),t(n,"clip-rule","evenodd"),t(l,"xmlns","http://www.w3.org/2000/svg"),t(l,"class","h-4 w-4 mr-2"),t(l,"viewBox","0 0 20 20"),t(l,"fill","currentColor"),t(s,"href","/salary-cessions"),t(s,"class","flex items-center px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-200 font-medium text-sm shadow-sm hover:shadow-md")},m(h,d){se(h,s,d),e(s,l),e(l,n),e(s,p),e(s,v)},p(h,d){d&64&&_!==(_=(h[6]("common.actions.back_to_salary_cessions")||"Back to Salary Cessions")+"")&&C(v,_)},d(h){h&&a(s)}}}function Vr(r){let s,l,n,p=r[6]("cessions.details.cession_info")+"",_,v,h,d,m,f=r[6]("cessions.details.client")+"",N,A,B,M,T=r[3].clientName+"",Y,z,S,H,x,D,g=r[6]("cessions.details.view_profile")+"",q,$,W,L,O,K=r[6]("cessions.details.bank_agency")+"",be,he,ue,ve=r[3].bankOrAgency+"",re,j,V,Q,_e=r[6]("cessions.details.total_loan")+"",ze,Je,de,F=je(r[3].totalLoanAmount)+"",Oe,le,ce,k,U=r[6]("cessions.details.monthly_payment")+"",ee,Ye,ge,pe=je(r[3].monthlyPayment)+"",Ue,we,X,ae,te,me=r[6]("cessions.details.start_date")+"",ye,Ke,ns,oe,ne,is,ke,Qe,pt=r[6]("cessions.details.end_date")+"",Ct,us,Xe,mt=ct(r[3].endDate)+"",Vt,ds,Ee,Ze,ht=r[6]("common.status")+"",Mt,cs,Fe,vt=r[7](r[3].status)+"",Lt,Nt,fs,xe,$e,_t=r[6]("cessions.details.progress_info")+"",At,ps,ie,De,et,gt=r[6]("cessions.details.current_progress")+"",Bt,ms,Ie,tt,qe,hs,st,bt=ar(r[3].currentProgress)+"",Tt,vs,Pe,rt,wt=r[6]("cessions.details.remaining_balance")+"",Ht,_s,lt,yt=je(r[3].remainingBalance)+"",jt,gs,Ce,at,kt=r[6]("cessions.details.months_remaining")+"",St,bs,ot,Et=r[6]("common.count_months",{count:r[3].monthsRemaining})+"",zt,ws,Ve,nt,xt=r[6]("cessions.details.expected_payoff")+"",Ot,ys,it,Dt=ct(r[3].expectedPayoffDate)+"",Ut,Me,Ft,fe,We,Is="Historique des Paiements",ks,Le,Ne,E,G=!r[0]&&lr(r);const Ps=[Nr,Lr],Ae=[];function Cs(c,b){return c[0]?0:1}return oe=Cs(r),ne=Ae[oe]=Ps[oe](r),Le=new kr({props:{cessionId:r[3].id,remainingBalance:r[3].remainingBalance,totalLoanAmount:r[3].totalLoanAmount,monthlyPayment:r[3].monthlyPayment}}),{c(){s=i("div"),l=i("div"),n=i("h2"),_=I(p),v=w(),h=i("div"),d=i("div"),m=i("p"),N=I(f),A=w(),B=i("div"),M=i("p"),Y=I(T),z=w(),S=i("a"),H=R("svg"),x=R("path"),D=w(),q=I(g),W=w(),L=i("div"),O=i("p"),be=I(K),he=w(),ue=i("p"),re=I(ve),j=w(),V=i("div"),Q=i("p"),ze=I(_e),Je=w(),de=i("p"),Oe=I(F),le=w(),ce=i("div"),k=i("p"),ee=I(U),Ye=w(),ge=i("p"),Ue=I(pe),we=w(),X=i("div"),ae=i("div"),te=i("p"),ye=I(me),Ke=w(),G&&G.c(),ns=w(),ne.c(),is=w(),ke=i("div"),Qe=i("p"),Ct=I(pt),us=w(),Xe=i("p"),Vt=I(mt),ds=w(),Ee=i("div"),Ze=i("p"),Mt=I(ht),cs=w(),Fe=i("span"),Lt=I(vt),fs=w(),xe=i("div"),$e=i("h2"),At=I(_t),ps=w(),ie=i("div"),De=i("div"),et=i("p"),Bt=I(gt),ms=w(),Ie=i("div"),tt=i("div"),qe=i("div"),hs=w(),st=i("p"),Tt=I(bt),vs=w(),Pe=i("div"),rt=i("p"),Ht=I(wt),_s=w(),lt=i("p"),jt=I(yt),gs=w(),Ce=i("div"),at=i("p"),St=I(kt),bs=w(),ot=i("p"),zt=I(Et),ws=w(),Ve=i("div"),nt=i("p"),Ot=I(xt),ys=w(),it=i("p"),Ut=I(Dt),Ft=w(),fe=i("div"),We=i("h2"),We.textContent=Is,ks=w(),_r(Le.$$.fragment),this.h()},l(c){s=u(c,"DIV",{class:!0});var b=o(s);l=u(b,"DIV",{class:!0});var Be=o(l);n=u(Be,"H2",{class:!0});var Te=o(n);_=P(Te,p),Te.forEach(a),v=y(Be),h=u(Be,"DIV",{class:!0});var Z=o(h);d=u(Z,"DIV",{class:!0});var qt=o(d);m=u(qt,"P",{class:!0});var Vs=o(m);N=P(Vs,f),Vs.forEach(a),A=y(qt),B=u(qt,"DIV",{class:!0});var Wt=o(B);M=u(Wt,"P",{class:!0});var Ms=o(M);Y=P(Ms,T),Ms.forEach(a),z=y(Wt),S=u(Wt,"A",{href:!0,class:!0});var Gt=o(S);H=J(Gt,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Ls=o(H);x=J(Ls,"path",{d:!0}),o(x).forEach(a),Ls.forEach(a),D=y(Gt),q=P(Gt,g),Gt.forEach(a),Wt.forEach(a),qt.forEach(a),W=y(Z),L=u(Z,"DIV",{class:!0});var Rt=o(L);O=u(Rt,"P",{class:!0});var Ns=o(O);be=P(Ns,K),Ns.forEach(a),he=y(Rt),ue=u(Rt,"P",{class:!0});var As=o(ue);re=P(As,ve),As.forEach(a),Rt.forEach(a),j=y(Z),V=u(Z,"DIV",{class:!0});var Jt=o(V);Q=u(Jt,"P",{class:!0});var Bs=o(Q);ze=P(Bs,_e),Bs.forEach(a),Je=y(Jt),de=u(Jt,"P",{class:!0});var Ts=o(de);Oe=P(Ts,F),Ts.forEach(a),Jt.forEach(a),le=y(Z),ce=u(Z,"DIV",{class:!0});var Yt=o(ce);k=u(Yt,"P",{class:!0});var Hs=o(k);ee=P(Hs,U),Hs.forEach(a),Ye=y(Yt),ge=u(Yt,"P",{class:!0});var js=o(ge);Ue=P(js,pe),js.forEach(a),Yt.forEach(a),we=y(Z),X=u(Z,"DIV",{class:!0});var Kt=o(X);ae=u(Kt,"DIV",{class:!0});var Qt=o(ae);te=u(Qt,"P",{class:!0});var Ss=o(te);ye=P(Ss,me),Ss.forEach(a),Ke=y(Qt),G&&G.l(Qt),Qt.forEach(a),ns=y(Kt),ne.l(Kt),Kt.forEach(a),is=y(Z),ke=u(Z,"DIV",{class:!0});var Xt=o(ke);Qe=u(Xt,"P",{class:!0});var zs=o(Qe);Ct=P(zs,pt),zs.forEach(a),us=y(Xt),Xe=u(Xt,"P",{class:!0});var Os=o(Xe);Vt=P(Os,mt),Os.forEach(a),Xt.forEach(a),ds=y(Z),Ee=u(Z,"DIV",{class:!0});var Zt=o(Ee);Ze=u(Zt,"P",{class:!0});var Us=o(Ze);Mt=P(Us,ht),Us.forEach(a),cs=y(Zt),Fe=u(Zt,"SPAN",{class:!0});var Fs=o(Fe);Lt=P(Fs,vt),Fs.forEach(a),Zt.forEach(a),Z.forEach(a),Be.forEach(a),fs=y(b),xe=u(b,"DIV",{class:!0});var $t=o(xe);$e=u($t,"H2",{class:!0});var qs=o($e);At=P(qs,_t),qs.forEach(a),ps=y($t),ie=u($t,"DIV",{class:!0});var He=o(ie);De=u(He,"DIV",{class:!0});var es=o(De);et=u(es,"P",{class:!0});var Ws=o(et);Bt=P(Ws,gt),Ws.forEach(a),ms=y(es),Ie=u(es,"DIV",{class:!0});var ts=o(Ie);tt=u(ts,"DIV",{class:!0});var Gs=o(tt);qe=u(Gs,"DIV",{class:!0,style:!0}),o(qe).forEach(a),Gs.forEach(a),hs=y(ts),st=u(ts,"P",{class:!0});var Rs=o(st);Tt=P(Rs,bt),Rs.forEach(a),ts.forEach(a),es.forEach(a),vs=y(He),Pe=u(He,"DIV",{class:!0});var ss=o(Pe);rt=u(ss,"P",{class:!0});var Js=o(rt);Ht=P(Js,wt),Js.forEach(a),_s=y(ss),lt=u(ss,"P",{class:!0});var Ys=o(lt);jt=P(Ys,yt),Ys.forEach(a),ss.forEach(a),gs=y(He),Ce=u(He,"DIV",{class:!0});var rs=o(Ce);at=u(rs,"P",{class:!0});var Ks=o(at);St=P(Ks,kt),Ks.forEach(a),bs=y(rs),ot=u(rs,"P",{class:!0});var Qs=o(ot);zt=P(Qs,Et),Qs.forEach(a),rs.forEach(a),ws=y(He),Ve=u(He,"DIV",{class:!0});var ls=o(Ve);nt=u(ls,"P",{class:!0});var Xs=o(nt);Ot=P(Xs,xt),Xs.forEach(a),ys=y(ls),it=u(ls,"P",{class:!0});var Zs=o(it);Ut=P(Zs,Dt),Zs.forEach(a),ls.forEach(a),He.forEach(a),$t.forEach(a),b.forEach(a),Ft=y(c),fe=u(c,"DIV",{class:!0});var as=o(fe);We=u(as,"H2",{class:!0,"data-svelte-h":!0}),Se(We)!=="svelte-tt6xtu"&&(We.textContent=Is),ks=y(as),gr(Le.$$.fragment,as),as.forEach(a),this.h()},h(){t(n,"class","text-lg font-medium bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-4"),t(m,"class","text-sm font-medium text-purple-600"),t(M,"class","font-medium text-gray-900"),t(x,"d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"),t(H,"xmlns","http://www.w3.org/2000/svg"),t(H,"class","h-4 w-4 mr-1"),t(H,"viewBox","0 0 20 20"),t(H,"fill","currentColor"),t(S,"href",$=`/clients/${r[3].clientId}`),t(S,"class","inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded-lg text-purple-700 bg-purple-100 hover:bg-purple-200 transition-all duration-200"),t(B,"class","flex items-center space-x-2 mt-1"),t(d,"class","bg-white/60 p-4 rounded-xl shadow-sm"),t(O,"class","text-sm font-medium text-purple-600"),t(ue,"class","font-medium text-gray-900 mt-1"),t(L,"class","bg-white/60 p-4 rounded-xl shadow-sm"),t(Q,"class","text-sm font-medium text-purple-600"),t(de,"class","font-medium text-gray-900 mt-1"),t(V,"class","bg-white/60 p-4 rounded-xl shadow-sm"),t(k,"class","text-sm font-medium text-purple-600"),t(ge,"class","font-medium text-gray-900 mt-1"),t(ce,"class","bg-white/60 p-4 rounded-xl shadow-sm"),t(te,"class","text-sm font-medium text-purple-600"),t(ae,"class","flex items-center justify-between"),t(X,"class","bg-white/60 p-4 rounded-xl shadow-sm group hover:bg-white/80 transition-all duration-200"),t(Qe,"class","text-sm font-medium text-purple-600"),t(Xe,"class","font-medium text-gray-900 mt-1"),t(ke,"class","bg-white/60 p-4 rounded-xl shadow-sm"),t(Ze,"class","text-sm font-medium text-purple-600"),t(Fe,"class",Nt="inline-flex items-center px-3 py-1 mt-1 rounded-full text-xs font-medium shadow-sm border border-"+r[3].status.toLowerCase()+"-200 "+or(r[3].status)),t(Ee,"class","bg-white/60 p-4 rounded-xl shadow-sm"),t(h,"class","space-y-4"),t(l,"class","bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6"),t($e,"class","text-lg font-medium bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-4"),t(et,"class","text-sm font-medium text-purple-600"),t(qe,"class","bg-gradient-to-r from-purple-600 to-indigo-600 h-3 rounded-full"),er(qe,"width",r[3].currentProgress+"%"),t(tt,"class","w-full bg-gray-200 rounded-full h-3"),t(st,"class","text-sm text-gray-700 mt-2 font-medium"),t(Ie,"class","mt-2"),t(De,"class","bg-white/60 p-4 rounded-xl shadow-sm"),t(rt,"class","text-sm font-medium text-purple-600"),t(lt,"class","font-medium text-gray-900 mt-1"),t(Pe,"class","bg-white/60 p-4 rounded-xl shadow-sm"),t(at,"class","text-sm font-medium text-purple-600"),t(ot,"class","font-medium text-gray-900 mt-1"),t(Ce,"class","bg-white/60 p-4 rounded-xl shadow-sm"),t(nt,"class","text-sm font-medium text-purple-600"),t(it,"class","font-medium text-gray-900 mt-1"),t(Ve,"class","bg-white/60 p-4 rounded-xl shadow-sm"),t(ie,"class","space-y-4"),t(xe,"class","bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6"),t(s,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),t(We,"class","text-lg font-medium bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-4"),t(fe,"class","mt-8 bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6")},m(c,b){se(c,s,b),e(s,l),e(l,n),e(n,_),e(l,v),e(l,h),e(h,d),e(d,m),e(m,N),e(d,A),e(d,B),e(B,M),e(M,Y),e(B,z),e(B,S),e(S,H),e(H,x),e(S,D),e(S,q),e(h,W),e(h,L),e(L,O),e(O,be),e(L,he),e(L,ue),e(ue,re),e(h,j),e(h,V),e(V,Q),e(Q,ze),e(V,Je),e(V,de),e(de,Oe),e(h,le),e(h,ce),e(ce,k),e(k,ee),e(ce,Ye),e(ce,ge),e(ge,Ue),e(h,we),e(h,X),e(X,ae),e(ae,te),e(te,ye),e(ae,Ke),G&&G.m(ae,null),e(X,ns),Ae[oe].m(X,null),e(h,is),e(h,ke),e(ke,Qe),e(Qe,Ct),e(ke,us),e(ke,Xe),e(Xe,Vt),e(h,ds),e(h,Ee),e(Ee,Ze),e(Ze,Mt),e(Ee,cs),e(Ee,Fe),e(Fe,Lt),e(s,fs),e(s,xe),e(xe,$e),e($e,At),e(xe,ps),e(xe,ie),e(ie,De),e(De,et),e(et,Bt),e(De,ms),e(De,Ie),e(Ie,tt),e(tt,qe),e(Ie,hs),e(Ie,st),e(st,Tt),e(ie,vs),e(ie,Pe),e(Pe,rt),e(rt,Ht),e(Pe,_s),e(Pe,lt),e(lt,jt),e(ie,gs),e(ie,Ce),e(Ce,at),e(at,St),e(Ce,bs),e(Ce,ot),e(ot,zt),e(ie,ws),e(ie,Ve),e(Ve,nt),e(nt,Ot),e(Ve,ys),e(Ve,it),e(it,Ut),se(c,Ft,b),se(c,fe,b),e(fe,We),e(fe,ks),br(Le,fe,null),E=!0},p(c,b){(!E||b&64)&&p!==(p=c[6]("cessions.details.cession_info")+"")&&C(_,p),(!E||b&64)&&f!==(f=c[6]("cessions.details.client")+"")&&C(N,f),(!E||b&8)&&T!==(T=c[3].clientName+"")&&C(Y,T),(!E||b&64)&&g!==(g=c[6]("cessions.details.view_profile")+"")&&C(q,g),(!E||b&8&&$!==($=`/clients/${c[3].clientId}`))&&t(S,"href",$),(!E||b&64)&&K!==(K=c[6]("cessions.details.bank_agency")+"")&&C(be,K),(!E||b&8)&&ve!==(ve=c[3].bankOrAgency+"")&&C(re,ve),(!E||b&64)&&_e!==(_e=c[6]("cessions.details.total_loan")+"")&&C(ze,_e),(!E||b&8)&&F!==(F=je(c[3].totalLoanAmount)+"")&&C(Oe,F),(!E||b&64)&&U!==(U=c[6]("cessions.details.monthly_payment")+"")&&C(ee,U),(!E||b&8)&&pe!==(pe=je(c[3].monthlyPayment)+"")&&C(Ue,pe),(!E||b&64)&&me!==(me=c[6]("cessions.details.start_date")+"")&&C(ye,me),c[0]?G&&(G.d(1),G=null):G?G.p(c,b):(G=lr(c),G.c(),G.m(ae,null));let Be=oe;oe=Cs(c),oe===Be?Ae[oe].p(c,b):(ur(),It(Ae[Be],1,1,()=>{Ae[Be]=null}),ir(),ne=Ae[oe],ne?ne.p(c,b):(ne=Ae[oe]=Ps[oe](c),ne.c()),Pt(ne,1),ne.m(X,null)),(!E||b&64)&&pt!==(pt=c[6]("cessions.details.end_date")+"")&&C(Ct,pt),(!E||b&8)&&mt!==(mt=ct(c[3].endDate)+"")&&C(Vt,mt),(!E||b&64)&&ht!==(ht=c[6]("common.status")+"")&&C(Mt,ht),(!E||b&8)&&vt!==(vt=c[7](c[3].status)+"")&&C(Lt,vt),(!E||b&8&&Nt!==(Nt="inline-flex items-center px-3 py-1 mt-1 rounded-full text-xs font-medium shadow-sm border border-"+c[3].status.toLowerCase()+"-200 "+or(c[3].status)))&&t(Fe,"class",Nt),(!E||b&64)&&_t!==(_t=c[6]("cessions.details.progress_info")+"")&&C(At,_t),(!E||b&64)&&gt!==(gt=c[6]("cessions.details.current_progress")+"")&&C(Bt,gt),(!E||b&8)&&er(qe,"width",c[3].currentProgress+"%"),(!E||b&8)&&bt!==(bt=ar(c[3].currentProgress)+"")&&C(Tt,bt),(!E||b&64)&&wt!==(wt=c[6]("cessions.details.remaining_balance")+"")&&C(Ht,wt),(!E||b&8)&&yt!==(yt=je(c[3].remainingBalance)+"")&&C(jt,yt),(!E||b&64)&&kt!==(kt=c[6]("cessions.details.months_remaining")+"")&&C(St,kt),(!E||b&72)&&Et!==(Et=c[6]("common.count_months",{count:c[3].monthsRemaining})+"")&&C(zt,Et),(!E||b&64)&&xt!==(xt=c[6]("cessions.details.expected_payoff")+"")&&C(Ot,xt),(!E||b&8)&&Dt!==(Dt=ct(c[3].expectedPayoffDate)+"")&&C(Ut,Dt);const Te={};b&8&&(Te.cessionId=c[3].id),b&8&&(Te.remainingBalance=c[3].remainingBalance),b&8&&(Te.totalLoanAmount=c[3].totalLoanAmount),b&8&&(Te.monthlyPayment=c[3].monthlyPayment),Le.$set(Te)},i(c){E||(Pt(ne),c&&Ds(()=>{E&&(Me||(Me=ut(s,os,{y:20,duration:300,easing:dt},!0)),Me.run(1))}),Pt(Le.$$.fragment,c),c&&Ds(()=>{E&&(Ne||(Ne=ut(fe,os,{y:20,delay:150,duration:300,easing:dt},!0)),Ne.run(1))}),E=!0)},o(c){It(ne),c&&(Me||(Me=ut(s,os,{y:20,duration:300,easing:dt},!1)),Me.run(0)),It(Le.$$.fragment,c),c&&(Ne||(Ne=ut(fe,os,{y:20,delay:150,duration:300,easing:dt},!1)),Ne.run(0)),E=!1},d(c){c&&(a(s),a(Ft),a(fe)),G&&G.d(),Ae[oe].d(),c&&Me&&Me.end(),wr(Le),c&&Ne&&Ne.end()}}}function Mr(r){let s,l='<div class="relative"><div class="w-16 h-16 border-4 border-purple-200 rounded-full animate-spin"></div> <div class="absolute top-0 left-0 w-16 h-16 border-4 border-purple-600 rounded-full animate-spin border-t-transparent"></div></div>';return{c(){s=i("div"),s.innerHTML=l,this.h()},l(n){s=u(n,"DIV",{class:!0,"data-svelte-h":!0}),Se(s)!=="svelte-mfmgrq"&&(s.innerHTML=l),this.h()},h(){t(s,"class","flex justify-center py-16")},m(n,p){se(n,s,p)},p:ft,i:ft,o:ft,d(n){n&&a(s)}}}function lr(r){let s,l='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.536L16.732 3.732z"></path></svg>',n,p;return{c(){s=i("button"),s.innerHTML=l,this.h()},l(_){s=u(_,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),Se(s)!=="svelte-1qn17tg"&&(s.innerHTML=l),this.h()},h(){t(s,"class","opacity-0 group-hover:opacity-100 p-1.5 rounded-lg hover:bg-purple-100 text-purple-600 transition-all duration-200"),t(s,"title","Modifier la date de début")},m(_,v){se(_,s,v),n||(p=Re(s,"click",r[9]),n=!0)},p:ft,d(_){_&&a(s),n=!1,p()}}}function Lr(r){let s,l,n=ct(r[3].startDate)+"",p,_,v,h='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.536L16.732 3.732z"></path></svg> <span>Modifiable</span>';return{c(){s=i("div"),l=i("p"),p=I(n),_=w(),v=i("div"),v.innerHTML=h,this.h()},l(d){s=u(d,"DIV",{class:!0});var m=o(s);l=u(m,"P",{class:!0});var f=o(l);p=P(f,n),f.forEach(a),_=y(m),v=u(m,"DIV",{class:!0,"data-svelte-h":!0}),Se(v)!=="svelte-1jux8ix"&&(v.innerHTML=h),m.forEach(a),this.h()},h(){t(l,"class","font-medium text-gray-900"),t(v,"class","flex items-center space-x-1 text-xs text-gray-500"),t(s,"class","flex items-center justify-between mt-1")},m(d,m){se(d,s,m),e(s,l),e(l,p),e(s,_),e(s,v)},p(d,m){m&8&&n!==(n=ct(d[3].startDate)+"")&&C(p,n)},i:ft,o:ft,d(d){d&&a(s)}}}function Nr(r){let s,l,n,p,_,v,h,d,m,f,N,A,B="Appuyez sur Entrée pour confirmer, Échap pour annuler",M,T,Y,z;function S(D,g){return D[2]?Br:Ar}let H=S(r),x=H(r);return{c(){s=i("div"),l=i("div"),n=i("input"),p=w(),_=i("div"),v=i("button"),x.c(),h=w(),d=i("button"),m=R("svg"),f=R("path"),N=w(),A=i("p"),A.textContent=B,this.h()},l(D){s=u(D,"DIV",{class:!0});var g=o(s);l=u(g,"DIV",{class:!0});var q=o(l);n=u(q,"INPUT",{type:!0,class:!0}),p=y(q),_=u(q,"DIV",{class:!0});var $=o(_);v=u($,"BUTTON",{class:!0,title:!0});var W=o(v);x.l(W),W.forEach(a),h=y($),d=u($,"BUTTON",{class:!0,title:!0});var L=o(d);m=J(L,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var O=o(m);f=J(O,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),o(f).forEach(a),O.forEach(a),L.forEach(a),$.forEach(a),q.forEach(a),N=y(g),A=u(g,"P",{class:!0,"data-svelte-h":!0}),Se(A)!=="svelte-1fh0ddr"&&(A.textContent=B),g.forEach(a),this.h()},h(){t(n,"type","date"),t(n,"class","flex-1 px-3 py-2 bg-white/90 backdrop-blur-sm border-2 border-purple-200 rounded-lg focus:border-purple-500 focus:outline-none transition-all duration-200 text-gray-900 font-medium"),n.autofocus=!0,v.disabled=r[2],t(v,"class","p-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-lg hover:from-emerald-600 hover:to-teal-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl"),t(v,"title","Confirmer"),t(f,"stroke-linecap","round"),t(f,"stroke-linejoin","round"),t(f,"stroke-width","2"),t(f,"d","M6 18L18 6M6 6l12 12"),t(m,"class","w-4 h-4"),t(m,"fill","none"),t(m,"stroke","currentColor"),t(m,"viewBox","0 0 24 24"),d.disabled=r[2],t(d,"class","p-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"),t(d,"title","Annuler"),t(_,"class","flex items-center space-x-1"),t(l,"class","flex items-center space-x-2"),t(A,"class","text-xs text-gray-500 mt-2"),t(s,"class","mt-3")},m(D,g){se(D,s,g),e(s,l),e(l,n),tr(n,r[1]),e(l,p),e(l,_),e(_,v),x.m(v,null),e(_,h),e(_,d),e(d,m),e(m,f),e(s,N),e(s,A),T=!0,n.focus(),Y||(z=[Re(n,"input",r[16]),Re(n,"keydown",r[17]),Re(v,"click",r[11]),Re(d,"click",r[10])],Y=!0)},p(D,g){g&2&&tr(n,D[1]),H!==(H=S(D))&&(x.d(1),x=H(D),x&&(x.c(),x.m(v,null))),(!T||g&4)&&(v.disabled=D[2]),(!T||g&4)&&(d.disabled=D[2])},i(D){T||(D&&Ds(()=>{T&&(M||(M=ut(s,rr,{duration:300,easing:dt},!0)),M.run(1))}),T=!0)},o(D){D&&(M||(M=ut(s,rr,{duration:300,easing:dt},!1)),M.run(0)),T=!1},d(D){D&&a(s),x.d(),D&&M&&M.end(),Y=!1,mr(z)}}}function Ar(r){let s,l;return{c(){s=R("svg"),l=R("path"),this.h()},l(n){s=J(n,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var p=o(s);l=J(p,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),o(l).forEach(a),p.forEach(a),this.h()},h(){t(l,"stroke-linecap","round"),t(l,"stroke-linejoin","round"),t(l,"stroke-width","2"),t(l,"d","M5 13l4 4L19 7"),t(s,"class","w-4 h-4"),t(s,"fill","none"),t(s,"stroke","currentColor"),t(s,"viewBox","0 0 24 24")},m(n,p){se(n,s,p),e(s,l)},d(n){n&&a(s)}}}function Br(r){let s,l,n;return{c(){s=R("svg"),l=R("circle"),n=R("path"),this.h()},l(p){s=J(p,"svg",{class:!0,fill:!0,viewBox:!0});var _=o(s);l=J(_,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),o(l).forEach(a),n=J(_,"path",{class:!0,fill:!0,d:!0}),o(n).forEach(a),_.forEach(a),this.h()},h(){t(l,"class","opacity-25"),t(l,"cx","12"),t(l,"cy","12"),t(l,"r","10"),t(l,"stroke","currentColor"),t(l,"stroke-width","4"),t(n,"class","opacity-75"),t(n,"fill","currentColor"),t(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),t(s,"class","w-4 h-4 animate-spin"),t(s,"fill","none"),t(s,"viewBox","0 0 24 24")},m(p,_){se(p,s,_),e(s,l),e(s,n)},d(p){p&&a(s)}}}function Tr(r){let s,l,n,p,_,v,h,d,m,f='<svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>',N,A,B,M=r[6]("cessions.details.title")+"",T,Y,z,S="View and manage cession details",H,x,D,g,q=`<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.536L16.732 3.732z"></path></svg>
            Édition rapide activée`,$,W,L,O,K,be,he=r[6]("cessions.details.actions.preview_document")+"",ue,ve,re,j,V,Q,_e,ze;document.title=s=r[6]("cessions.details.title")+" | "+r[6]("common.app_title");function Je(k,U){return k[5]?Cr:Pr}let de=Je(r),F=de(r);const Oe=[Mr,Vr],le=[];function ce(k,U){return k[4]?0:k[3]?1:-1}return~(j=ce(r))&&(V=le[j]=Oe[j](r)),{c(){l=w(),n=i("div"),p=i("div"),_=i("div"),v=i("div"),h=i("div"),d=i("div"),m=i("div"),m.innerHTML=f,N=w(),A=i("div"),B=i("h1"),T=I(M),Y=w(),z=i("p"),z.textContent=S,H=w(),x=i("div"),F.c(),D=w(),g=i("div"),g.innerHTML=q,$=w(),W=i("button"),L=R("svg"),O=R("path"),K=R("path"),be=w(),ue=I(he),ve=w(),re=i("div"),V&&V.c(),this.h()},l(k){cr("svelte-1fljqwx",document.head).forEach(a),l=y(k),n=u(k,"DIV",{class:!0});var ee=o(n);p=u(ee,"DIV",{class:!0});var Ye=o(p);_=u(Ye,"DIV",{class:!0});var ge=o(_);v=u(ge,"DIV",{class:!0});var pe=o(v);h=u(pe,"DIV",{class:!0});var Ue=o(h);d=u(Ue,"DIV",{class:!0});var we=o(d);m=u(we,"DIV",{class:!0,"data-svelte-h":!0}),Se(m)!=="svelte-1rlkc1n"&&(m.innerHTML=f),N=y(we),A=u(we,"DIV",{});var X=o(A);B=u(X,"H1",{class:!0});var ae=o(B);T=P(ae,M),ae.forEach(a),Y=y(X),z=u(X,"P",{class:!0,"data-svelte-h":!0}),Se(z)!=="svelte-1ra5yay"&&(z.textContent=S),X.forEach(a),we.forEach(a),Ue.forEach(a),H=y(pe),x=u(pe,"DIV",{class:!0});var te=o(x);F.l(te),D=y(te),g=u(te,"DIV",{class:!0,"data-svelte-h":!0}),Se(g)!=="svelte-qxvbe6"&&(g.innerHTML=q),$=y(te),W=u(te,"BUTTON",{class:!0});var me=o(W);L=J(me,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var ye=o(L);O=J(ye,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),o(O).forEach(a),K=J(ye,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),o(K).forEach(a),ye.forEach(a),be=y(me),ue=P(me,he),me.forEach(a),te.forEach(a),pe.forEach(a),ge.forEach(a),Ye.forEach(a),ve=y(ee),re=u(ee,"DIV",{class:!0});var Ke=o(re);V&&V.l(Ke),Ke.forEach(a),ee.forEach(a),this.h()},h(){t(m,"class","w-12 h-12 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg"),t(B,"class","text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent"),t(z,"class","text-sm text-gray-500 font-medium"),t(d,"class","flex items-center space-x-3"),t(h,"class","flex items-center space-x-4"),t(g,"class","flex items-center px-3 py-2 bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-700 rounded-xl text-sm font-medium"),t(O,"stroke-linecap","round"),t(O,"stroke-linejoin","round"),t(O,"stroke-width","2"),t(O,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),t(K,"stroke-linecap","round"),t(K,"stroke-linejoin","round"),t(K,"stroke-width","2"),t(K,"d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"),t(L,"class","w-4 h-4 mr-2"),t(L,"fill","none"),t(L,"stroke","currentColor"),t(L,"viewBox","0 0 24 24"),t(W,"class","flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl font-medium text-sm"),t(x,"class","flex items-center space-x-3"),t(v,"class","flex items-center justify-between"),t(_,"class","max-w-7xl mx-auto px-6 py-4"),t(p,"class","sticky top-0 z-40 backdrop-blur-xl bg-white/80 border-b border-white/20 shadow-lg shadow-black/5"),t(re,"class","max-w-7xl mx-auto px-6 py-8"),t(n,"class","min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50")},m(k,U){se(k,l,U),se(k,n,U),e(n,p),e(p,_),e(_,v),e(v,h),e(h,d),e(d,m),e(d,N),e(d,A),e(A,B),e(B,T),e(A,Y),e(A,z),e(v,H),e(v,x),F.m(x,null),e(x,D),e(x,g),e(x,$),e(x,W),e(W,L),e(L,O),e(L,K),e(W,be),e(W,ue),e(n,ve),e(n,re),~j&&le[j].m(re,null),Q=!0,_e||(ze=Re(W,"click",r[8]),_e=!0)},p(k,[U]){(!Q||U&64)&&s!==(s=k[6]("cessions.details.title")+" | "+k[6]("common.app_title"))&&(document.title=s),(!Q||U&64)&&M!==(M=k[6]("cessions.details.title")+"")&&C(T,M),de===(de=Je(k))&&F?F.p(k,U):(F.d(1),F=de(k),F&&(F.c(),F.m(x,D))),(!Q||U&64)&&he!==(he=k[6]("cessions.details.actions.preview_document")+"")&&C(ue,he);let ee=j;j=ce(k),j===ee?~j&&le[j].p(k,U):(V&&(ur(),It(le[ee],1,1,()=>{le[ee]=null}),ir()),~j?(V=le[j],V?V.p(k,U):(V=le[j]=Oe[j](k),V.c()),Pt(V,1),V.m(re,null)):V=null)},i(k){Q||(Pt(V),Q=!0)},o(k){It(V),Q=!1},d(k){k&&(a(l),a(n)),F.d(),~j&&le[j].d(),_e=!1,ze()}}}function ct(r){if(!r)return"N/A";const s=new Date(r),l=s.toLocaleString("en-US",{month:"long"}),n=s.toLocaleString("fr-FR",{month:"long"});return`${s.getDate()} ${l} ${s.getFullYear()} (${s.getDate()} ${n} ${s.getFullYear()})`}function je(r){return r==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r)}function ar(r){return r==null?"N/A":`${r}%`}function or(r){switch(r){case"ACTIVE":return"bg-green-100 text-green-800 border-green-200";case"COMPLETED":return"bg-blue-100 text-blue-800 border-blue-200";case"CANCELLED":return"bg-red-100 text-red-800 border-red-200";case"FINISHED":return"bg-gray-100 text-gray-800 border-gray-200";case"PENDING":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}}function Hr(r){const s=["","ألف","مليون","مليار"],l=["صفر","واحد","اثنان","ثلاثة","أربعة","خمسة","ستة","سبعة","ثمانية","تسعة"],n=["عشرة","أحد عشر","اثنا عشر","ثلاثة عشر","أربعة عشر","خمسة عشر","ستة عشر","سبعة عشر","ثمانية عشر","تسعة عشر"],p=["","","عشرون","ثلاثون","أربعون","خمسون","ستون","سبعون","ثمانون","تسعون"],_=["","مائة","مئتان","ثلاثمائة","أربعمائة","خمسمائة","ستمائة","سبعمائة","ثمانمائة","تسعمائة"];if(r===0)return l[0];let v="",h=0;for(;r>0;){let d=r%1e3;if(d!==0){let m="";if(d>=100&&(m+=_[Math.floor(d/100)]+" ",d%=100),d>0)if(d<10)m+=l[d];else if(d<20)m+=n[d-10];else{let f=d%10,N=Math.floor(d/10);f>0&&(m+=l[f]+" و "),m+=p[N]}h>0&&(m+=" "+s[h]),v?v=m+" و "+v:v=m}r=Math.floor(r/1e3),h++}return v+" دينارا"}function nr(r){if(!r)return new Date;const s=new Date(r);return isNaN(s.getTime())?new Date:s}function jr(r,s,l){let n,p,_;$s(r,Dr,g=>l(6,p=g)),$s(r,yr,g=>l(14,_=g));let v=!1,h="",d=!1,{data:m}=s,f=null,N=!0;fr(async()=>{if(!m.id){Ge(p("cessions.errors.invalid_id"),"error"),Es("/cessions");return}await A(),await pr()});async function A(){l(4,N=!0);try{l(3,f=await sr.getById(m.id)),f||(Ge(p("cessions.errors.not_found"),"error"),Es("/cessions"))}catch(g){Ge(g.message||p("cessions.errors.load_failed"),"error"),Es("/cessions")}finally{l(4,N=!1)}}function B(g){switch(g?.toUpperCase()){case"ACTIVE":return p("cessions.details.status.active");case"FINISHED":return p("cessions.details.status.finished");case"CANCELLED":return p("cessions.details.status.cancelled");case"PENDING":return p("cessions.details.status.pending");default:return g}}async function M(){if(!f)return;const g={workerNumber:f.clientNumber,fullName:f.clientName,cin:f.clientCin,address:f.clientAddress,workplace:f.clientWorkplace,jobTitle:f.clientJob,bankAccountNumber:f.bankOrAgency,itemDescription:f.itemDescription,amountInWords:Hr(f.totalLoanAmount),totalAmountNumeric:je(f.totalLoanAmount),monthlyPayment:je(f.monthlyPayment),firstDeductionMonthArabic:xs(nr(f.startDate),"MMMM yyyy",{locale:Er}),supplierName:f.supplierName,supplierTaxId:f.supplierTaxId,supplierAddress:f.supplierAddress,supplierBankAccount:f.supplierBankAccount,courtName:f.courtName,bookNumber:f.bookNumber,pageNumber:f.pageNumber,date:xs(nr(f.createdAt),"dd/MM/yyyy")};try{await xr(g)}catch{Ge(p("cessions.errors.preview_failed"),"error")}}function T(){l(0,v=!0),l(1,h=f.startDate?xs(new Date(f.startDate),"yyyy-MM-dd"):"")}function Y(){l(0,v=!1),l(1,h="")}async function z(){if(!h.trim()){Ge("Date de début est requise","error");return}l(2,d=!0);try{const g=await sr.update(f.id,{...f,startDate:h});l(3,f=g),l(0,v=!1),l(1,h=""),Ge("Date de début mise à jour avec succès","success")}catch(g){Ge(g.message||"Erreur lors de la mise à jour","error")}finally{l(2,d=!1)}}function S(g,q){g.key==="Enter"?(g.preventDefault(),q()):g.key==="Escape"&&(g.preventDefault(),q===z&&Y())}const H=()=>window.history.back();function x(){h=this.value,l(1,h)}const D=g=>S(g,z);return r.$$set=g=>{"data"in g&&l(13,m=g.data)},r.$$.update=()=>{r.$$.dirty&16384&&l(5,n=_.url.searchParams.get("from")==="salary-cessions")},[v,h,d,f,N,n,p,B,M,T,Y,z,S,m,_,H,x,D]}class Kr extends hr{constructor(s){super(),vr(this,s,jr,Tr,dr,{data:13})}}export{Kr as component,Yr as universal};
