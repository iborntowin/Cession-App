import{c as rl,w as Sl,j as Ml}from"../chunks/api.20dd9789.js";import{r as Ul}from"../chunks/index.c6708bed.js";import{s as ql,a as E,f,J as Hl,d,c as I,g as m,h as _,j as o,i as oe,w as r,u as Wl,o as Jl,l as P,m as T,L as K,z as se,n as B,H as Ol,y as Il,k as jt,S as re,M as Vt,O as Rl,K as jl,I as sl}from"../chunks/scheduler.55755e91.js";import{S as Fl,i as Kl,b as Lt,d as Pt,m as Tt,t as Pe,c as Al,a as Te,e as Ot,g as Bl}from"../chunks/index.d2ed93bc.js";import{e as Ct}from"../chunks/each.8720bd6f.js";import"../chunks/paths.452213a7.js";import{s as Me,g as Dt}from"../chunks/navigation.fbd60083.js";import{P as Gl}from"../chunks/PageHeader.678a832a.js";import{S as zl}from"../chunks/Spinner.50375aac.js";import{t as Ql}from"../chunks/index.7dc5fa01.js";import{M as Xl}from"../chunks/Modal.c903ba58.js";const Yl=!1;async function Zl({params:t}){if(!t.id||t.id==="undefined")throw Ul(307,"/clients");try{const l=await rl.getById(t.id);if(!l.success)throw new Error(l.error||"Failed to load client");return{client:l.data}}catch(l){return{error:l.message}}}const hr=Object.freeze(Object.defineProperty({__proto__:null,load:Zl,ssr:Yl},Symbol.toStringTag,{value:"Module"}));function Vl(t,l,e){const n=t.slice();return n[31]=l[e],n}function Cl(t,l,e){const n=t.slice();return n[34]=l[e],n}function xl(t){let l,e,n,a,u=t[13]("clients.edit.client_info")+"",c,y,A,b,w,g,O=t[13]("clients.edit.full_name")+"",U,h,i=t[13]("clients.edit.required_field")+"",j,S,L,de,W,ne,G,Q,ae=t[13]("clients.edit.workplace")+"",pe,z,k,V,$=t[13]("clients.edit.select_workplace")+"",_e,he,N,C,Y=t[13]("clients.edit.job")+"",Ue,At,X,be,Qe=t[13]("clients.edit.select_job")+"",lt,ol,rt,Bt,ge,ie,ve,nl="CIN (8-digit Number) *",zt,we,J,st,St,qe,ke,Xe=t[2].cin.length+"",ot,Mt,nt,Ut,He,Z,qt,Oe,Ye=t[2].cin.length===8?"CIN valide":t[2].cin.length===0?"Veuillez entrer un numéro CIN":"Numéro CIN incomplet",at,it,Ht,ue,ye,al="Worker Number (10-digit Number) *",Wt,Ne,R,ut,Jt,We,Ee,Ze=t[2].workerNumber.length+"",dt,Rt,ct,Ft,Je,x,Kt,Ae,xe=t[2].workerNumber.length===10?"Numéro d'employé valide":t[2].workerNumber.length===0?"Veuillez entrer un numéro d'employé":"Numéro d'employé incomplet",ft,mt,Gt,Be,ze,$e=t[13]("clients.edit.address")+"",pt,Qt,ee,_t,Xt,ce,Ie,et=t[13]("clients.edit.cancel")+"",ht,Yt,fe,te,le,Zt,je,tt=t[13]("clients.edit.delete")+"",bt,v,xt,il,F=t[9]&&Dl(t),Re=Ct(t[6]),q=[];for(let s=0;s<Re.length;s+=1)q[s]=Ll(Cl(t,Re,s));let Fe=Ct(t[0]),H=[];for(let s=0;s<Fe.length;s+=1)H[s]=Pl(Vl(t,Fe,s));const ul=[tr,er],Ve=[];function dl(s,p){return s[5]?0:1}return te=dl(t),le=Ve[te]=ul[te](t),{c(){l=f("div"),e=f("div"),n=f("div"),a=f("h3"),c=P(u),y=E(),A=f("form"),b=f("div"),w=f("div"),g=f("label"),U=P(O),h=E(),j=P(i),S=E(),L=f("input"),W=E(),F&&F.c(),ne=E(),G=f("div"),Q=f("label"),pe=P(ae),z=E(),k=f("select"),V=f("option"),_e=P($);for(let s=0;s<q.length;s+=1)q[s].c();he=E(),N=f("div"),C=f("label"),Ue=P(Y),At=E(),X=f("select"),be=f("option"),lt=P(Qe);for(let s=0;s<H.length;s+=1)H[s].c();Bt=E(),ge=f("div"),ie=f("div"),ve=f("label"),ve.textContent=nl,zt=E(),we=f("div"),J=f("input"),St=E(),qe=f("div"),ke=f("span"),ot=P(Xe),Mt=P("/8"),Ut=E(),He=f("div"),Z=f("div"),qt=E(),Oe=f("p"),at=P(Ye),Ht=E(),ue=f("div"),ye=f("label"),ye.textContent=al,Wt=E(),Ne=f("div"),R=f("input"),Jt=E(),We=f("div"),Ee=f("span"),dt=P(Ze),Rt=P("/10"),Ft=E(),Je=f("div"),x=f("div"),Kt=E(),Ae=f("p"),ft=P(xe),Gt=E(),Be=f("div"),ze=f("label"),pt=P($e),Qt=E(),ee=f("input"),Xt=E(),ce=f("div"),Ie=f("button"),ht=P(et),Yt=E(),fe=f("button"),le.c(),Zt=E(),je=f("button"),bt=P(tt),this.h()},l(s){l=m(s,"DIV",{class:!0});var p=_(l);e=m(p,"DIV",{class:!0});var M=_(e);n=m(M,"DIV",{class:!0});var D=_(n);a=m(D,"H3",{class:!0});var Ce=_(a);c=T(Ce,u),Ce.forEach(d),D.forEach(d),y=I(M),A=m(M,"FORM",{class:!0});var gt=_(A);b=m(gt,"DIV",{class:!0});var me=_(b);w=m(me,"DIV",{});var Ke=_(w);g=m(Ke,"LABEL",{for:!0,class:!0});var vt=_(g);U=T(vt,O),h=I(vt),j=T(vt,i),vt.forEach(d),S=I(Ke),L=m(Ke,"INPUT",{type:!0,id:!0,class:!0}),W=I(Ke),F&&F.l(Ke),Ke.forEach(d),ne=I(me),G=m(me,"DIV",{});var wt=_(G);Q=m(wt,"LABEL",{for:!0,class:!0});var cl=_(Q);pe=T(cl,ae),cl.forEach(d),z=I(wt),k=m(wt,"SELECT",{id:!0,class:!0});var $t=_(k);V=m($t,"OPTION",{});var fl=_(V);_e=T(fl,$),fl.forEach(d);for(let Se=0;Se<q.length;Se+=1)q[Se].l($t);$t.forEach(d),wt.forEach(d),he=I(me),N=m(me,"DIV",{});var kt=_(N);C=m(kt,"LABEL",{for:!0,class:!0});var ml=_(C);Ue=T(ml,Y),ml.forEach(d),At=I(kt),X=m(kt,"SELECT",{id:!0,class:!0});var el=_(X);be=m(el,"OPTION",{});var pl=_(be);lt=T(pl,Qe),pl.forEach(d);for(let Se=0;Se<H.length;Se+=1)H[Se].l(el);el.forEach(d),kt.forEach(d),Bt=I(me),ge=m(me,"DIV",{class:!0});var yt=_(ge);ie=m(yt,"DIV",{});var De=_(ie);ve=m(De,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Il(ve)!=="svelte-1hj1h3q"&&(ve.textContent=nl),zt=I(De),we=m(De,"DIV",{class:!0});var Nt=_(we);J=m(Nt,"INPUT",{type:!0,id:!0,pattern:!0,inputmode:!0,maxlength:!0,class:!0,placeholder:!0}),St=I(Nt),qe=m(Nt,"DIV",{class:!0});var _l=_(qe);ke=m(_l,"SPAN",{class:!0});var tl=_(ke);ot=T(tl,Xe),Mt=T(tl,"/8"),tl.forEach(d),_l.forEach(d),Nt.forEach(d),Ut=I(De),He=m(De,"DIV",{class:!0});var hl=_(He);Z=m(hl,"DIV",{class:!0,style:!0}),_(Z).forEach(d),hl.forEach(d),qt=I(De),Oe=m(De,"P",{class:!0});var bl=_(Oe);at=T(bl,Ye),bl.forEach(d),De.forEach(d),Ht=I(yt),ue=m(yt,"DIV",{});var Le=_(ue);ye=m(Le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Il(ye)!=="svelte-19zfl8r"&&(ye.textContent=al),Wt=I(Le),Ne=m(Le,"DIV",{class:!0});var Et=_(Ne);R=m(Et,"INPUT",{type:!0,id:!0,pattern:!0,inputmode:!0,maxlength:!0,class:!0,placeholder:!0}),Jt=I(Et),We=m(Et,"DIV",{class:!0});var gl=_(We);Ee=m(gl,"SPAN",{class:!0});var ll=_(Ee);dt=T(ll,Ze),Rt=T(ll,"/10"),ll.forEach(d),gl.forEach(d),Et.forEach(d),Ft=I(Le),Je=m(Le,"DIV",{class:!0});var vl=_(Je);x=m(vl,"DIV",{class:!0,style:!0}),_(x).forEach(d),vl.forEach(d),Kt=I(Le),Ae=m(Le,"P",{class:!0});var wl=_(Ae);ft=T(wl,xe),wl.forEach(d),Le.forEach(d),yt.forEach(d),Gt=I(me),Be=m(me,"DIV",{});var It=_(Be);ze=m(It,"LABEL",{for:!0,class:!0});var kl=_(ze);pt=T(kl,$e),kl.forEach(d),Qt=I(It),ee=m(It,"INPUT",{type:!0,id:!0,class:!0}),It.forEach(d),me.forEach(d),Xt=I(gt),ce=m(gt,"DIV",{class:!0});var Ge=_(ce);Ie=m(Ge,"BUTTON",{type:!0,class:!0});var yl=_(Ie);ht=T(yl,et),yl.forEach(d),Yt=I(Ge),fe=m(Ge,"BUTTON",{type:!0,class:!0});var Nl=_(fe);le.l(Nl),Nl.forEach(d),Zt=I(Ge),je=m(Ge,"BUTTON",{type:!0,class:!0});var El=_(je);bt=T(El,tt),El.forEach(d),Ge.forEach(d),gt.forEach(d),M.forEach(d),p.forEach(d),this.h()},h(){o(a,"class","text-lg font-medium text-gray-900"),o(n,"class","p-6 border-b border-gray-200"),o(g,"for","fullName"),o(g,"class","block text-sm font-medium text-gray-700"),o(L,"type","text"),o(L,"id","fullName"),o(L,"class",de="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm "+(t[9]?"border-red-500 ring-red-500":"")),L.required=!0,o(Q,"for","workplace"),o(Q,"class","block text-sm font-medium text-gray-700"),V.__value="",K(V,V.__value),o(k,"id","workplace"),o(k,"class","mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"),o(C,"for","job"),o(C,"class","block text-sm font-medium text-gray-700"),be.__value="",K(be,be.__value),o(X,"id","job"),X.disabled=rt=!t[1],o(X,"class","mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:text-gray-500"),o(ve,"for","cin"),o(ve,"class","block text-sm font-medium text-gray-700"),o(J,"type","text"),o(J,"id","cin"),J.required=!0,o(J,"pattern","\\d*"),o(J,"inputmode","numeric"),o(J,"maxlength","8"),o(J,"class",st="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm "+(t[7]?"border-red-500 ring-red-500":"")),o(J,"placeholder","Enter 8-digit CIN"),o(ke,"class",nt=`text-sm font-medium ${t[2].cin.length===8?"text-green-600":t[2].cin.length===0?"text-gray-500":"text-yellow-600"}`),o(qe,"class","absolute right-3 top-1/2 -translate-y-1/2"),o(we,"class","mt-1 relative"),o(Z,"class","absolute left-0 top-0 h-full transition-all duration-300 ease-out"),jt(Z,"width",t[2].cin.length/8*100+"%"),re(Z,"bg-green-500",t[2].cin.length===8),re(Z,"bg-yellow-500",t[2].cin.length>0&&t[2].cin.length<8),re(Z,"bg-gray-400",t[2].cin.length===0),o(He,"class","mt-2 h-2 w-full rounded-full bg-gray-200 relative overflow-hidden"),o(Oe,"class",it=`mt-1 text-sm ${t[2].cin.length===8?"text-green-600":t[2].cin.length===0?"text-gray-500":"text-yellow-600"}`),o(ye,"for","workerNumber"),o(ye,"class","block text-sm font-medium text-gray-700"),o(R,"type","text"),o(R,"id","workerNumber"),R.required=!0,o(R,"pattern","\\d*"),o(R,"inputmode","numeric"),o(R,"maxlength","10"),o(R,"class",ut="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm "+(t[8]?"border-red-500 ring-red-500":"")),o(R,"placeholder","Enter 10-digit worker number"),o(Ee,"class",ct=`text-sm font-medium ${t[2].workerNumber.length===10?"text-green-600":t[2].workerNumber.length===0?"text-gray-500":"text-yellow-600"}`),o(We,"class","absolute right-3 top-1/2 -translate-y-1/2"),o(Ne,"class","mt-1 relative"),o(x,"class","absolute left-0 top-0 h-full transition-all duration-300 ease-out"),jt(x,"width",t[2].workerNumber.length/10*100+"%"),re(x,"bg-green-500",t[2].workerNumber.length===10),re(x,"bg-yellow-500",t[2].workerNumber.length>0&&t[2].workerNumber.length<10),re(x,"bg-gray-400",t[2].workerNumber.length===0),o(Je,"class","mt-2 h-2 w-full rounded-full bg-gray-200 relative overflow-hidden"),o(Ae,"class",mt=`mt-1 text-sm ${t[2].workerNumber.length===10?"text-green-600":t[2].workerNumber.length===0?"text-gray-500":"text-yellow-600"}`),o(ge,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),o(ze,"for","address"),o(ze,"class","block text-sm font-medium text-gray-700"),o(ee,"type","text"),o(ee,"id","address"),o(ee,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"),ee.readOnly=_t=t[1]!==null,o(b,"class","space-y-4"),o(Ie,"type","button"),o(Ie,"class","inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),o(fe,"type","submit"),o(fe,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),fe.disabled=t[5],o(je,"type","button"),o(je,"class","inline-flex items-center px-4 py-2 border border-red-600 text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"),o(ce,"class","flex justify-end space-x-3"),o(A,"class","p-6 space-y-6"),o(e,"class","bg-white shadow-sm rounded-lg overflow-hidden"),o(l,"class","max-w-2xl mx-auto")},m(s,p){oe(s,l,p),r(l,e),r(e,n),r(n,a),r(a,c),r(e,y),r(e,A),r(A,b),r(b,w),r(w,g),r(g,U),r(g,h),r(g,j),r(w,S),r(w,L),K(L,t[2].fullName),r(w,W),F&&F.m(w,null),r(b,ne),r(b,G),r(G,Q),r(Q,pe),r(G,z),r(G,k),r(k,V),r(V,_e);for(let M=0;M<q.length;M+=1)q[M]&&q[M].m(k,null);Vt(k,t[1]),r(b,he),r(b,N),r(N,C),r(C,Ue),r(N,At),r(N,X),r(X,be),r(be,lt);for(let M=0;M<H.length;M+=1)H[M]&&H[M].m(X,null);Vt(X,t[2].jobId),r(b,Bt),r(b,ge),r(ge,ie),r(ie,ve),r(ie,zt),r(ie,we),r(we,J),K(J,t[2].cin),r(we,St),r(we,qe),r(qe,ke),r(ke,ot),r(ke,Mt),r(ie,Ut),r(ie,He),r(He,Z),r(ie,qt),r(ie,Oe),r(Oe,at),r(ge,Ht),r(ge,ue),r(ue,ye),r(ue,Wt),r(ue,Ne),r(Ne,R),K(R,t[2].workerNumber),r(Ne,Jt),r(Ne,We),r(We,Ee),r(Ee,dt),r(Ee,Rt),r(ue,Ft),r(ue,Je),r(Je,x),r(ue,Kt),r(ue,Ae),r(Ae,ft),r(b,Gt),r(b,Be),r(Be,ze),r(ze,pt),r(Be,Qt),r(Be,ee),K(ee,t[2].address),r(A,Xt),r(A,ce),r(ce,Ie),r(Ie,ht),r(ce,Yt),r(ce,fe),Ve[te].m(fe,null),r(ce,Zt),r(ce,je),r(je,bt),v=!0,xt||(il=[se(L,"input",t[20]),se(k,"change",t[14]),se(X,"change",t[15]),se(J,"input",t[21]),se(R,"input",t[22]),se(ee,"input",t[23]),se(Ie,"click",t[24]),se(je,"click",t[25]),se(A,"submit",Rl(t[16]))],xt=!0)},p(s,p){if((!v||p[0]&8192)&&u!==(u=s[13]("clients.edit.client_info")+"")&&B(c,u),(!v||p[0]&8192)&&O!==(O=s[13]("clients.edit.full_name")+"")&&B(U,O),(!v||p[0]&8192)&&i!==(i=s[13]("clients.edit.required_field")+"")&&B(j,i),(!v||p[0]&512&&de!==(de="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm "+(s[9]?"border-red-500 ring-red-500":"")))&&o(L,"class",de),p[0]&5&&L.value!==s[2].fullName&&K(L,s[2].fullName),s[9]?F?F.p(s,p):(F=Dl(s),F.c(),F.m(w,null)):F&&(F.d(1),F=null),(!v||p[0]&8192)&&ae!==(ae=s[13]("clients.edit.workplace")+"")&&B(pe,ae),(!v||p[0]&8192)&&$!==($=s[13]("clients.edit.select_workplace")+"")&&B(_e,$),p[0]&64){Re=Ct(s[6]);let D;for(D=0;D<Re.length;D+=1){const Ce=Cl(s,Re,D);q[D]?q[D].p(Ce,p):(q[D]=Ll(Ce),q[D].c(),q[D].m(k,null))}for(;D<q.length;D+=1)q[D].d(1);q.length=Re.length}if((!v||p[0]&66)&&Vt(k,s[1]),(!v||p[0]&8192)&&Y!==(Y=s[13]("clients.edit.job")+"")&&B(Ue,Y),(!v||p[0]&8192)&&Qe!==(Qe=s[13]("clients.edit.select_job")+"")&&B(lt,Qe),p[0]&1){Fe=Ct(s[0]);let D;for(D=0;D<Fe.length;D+=1){const Ce=Vl(s,Fe,D);H[D]?H[D].p(Ce,p):(H[D]=Pl(Ce),H[D].c(),H[D].m(X,null))}for(;D<H.length;D+=1)H[D].d(1);H.length=Fe.length}(!v||p[0]&5&&ol!==(ol=s[2].jobId))&&Vt(X,s[2].jobId),(!v||p[0]&66&&rt!==(rt=!s[1]))&&(X.disabled=rt),(!v||p[0]&128&&st!==(st="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm "+(s[7]?"border-red-500 ring-red-500":"")))&&o(J,"class",st),p[0]&5&&J.value!==s[2].cin&&K(J,s[2].cin),(!v||p[0]&4)&&Xe!==(Xe=s[2].cin.length+"")&&B(ot,Xe),(!v||p[0]&5&&nt!==(nt=`text-sm font-medium ${s[2].cin.length===8?"text-green-600":s[2].cin.length===0?"text-gray-500":"text-yellow-600"}`))&&o(ke,"class",nt),(!v||p[0]&4)&&jt(Z,"width",s[2].cin.length/8*100+"%"),(!v||p[0]&4)&&re(Z,"bg-green-500",s[2].cin.length===8),(!v||p[0]&4)&&re(Z,"bg-yellow-500",s[2].cin.length>0&&s[2].cin.length<8),(!v||p[0]&4)&&re(Z,"bg-gray-400",s[2].cin.length===0),(!v||p[0]&4)&&Ye!==(Ye=s[2].cin.length===8?"CIN valide":s[2].cin.length===0?"Veuillez entrer un numéro CIN":"Numéro CIN incomplet")&&B(at,Ye),(!v||p[0]&5&&it!==(it=`mt-1 text-sm ${s[2].cin.length===8?"text-green-600":s[2].cin.length===0?"text-gray-500":"text-yellow-600"}`))&&o(Oe,"class",it),(!v||p[0]&256&&ut!==(ut="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm "+(s[8]?"border-red-500 ring-red-500":"")))&&o(R,"class",ut),p[0]&5&&R.value!==s[2].workerNumber&&K(R,s[2].workerNumber),(!v||p[0]&4)&&Ze!==(Ze=s[2].workerNumber.length+"")&&B(dt,Ze),(!v||p[0]&5&&ct!==(ct=`text-sm font-medium ${s[2].workerNumber.length===10?"text-green-600":s[2].workerNumber.length===0?"text-gray-500":"text-yellow-600"}`))&&o(Ee,"class",ct),(!v||p[0]&4)&&jt(x,"width",s[2].workerNumber.length/10*100+"%"),(!v||p[0]&4)&&re(x,"bg-green-500",s[2].workerNumber.length===10),(!v||p[0]&4)&&re(x,"bg-yellow-500",s[2].workerNumber.length>0&&s[2].workerNumber.length<10),(!v||p[0]&4)&&re(x,"bg-gray-400",s[2].workerNumber.length===0),(!v||p[0]&4)&&xe!==(xe=s[2].workerNumber.length===10?"Numéro d'employé valide":s[2].workerNumber.length===0?"Veuillez entrer un numéro d'employé":"Numéro d'employé incomplet")&&B(ft,xe),(!v||p[0]&5&&mt!==(mt=`mt-1 text-sm ${s[2].workerNumber.length===10?"text-green-600":s[2].workerNumber.length===0?"text-gray-500":"text-yellow-600"}`))&&o(Ae,"class",mt),(!v||p[0]&8192)&&$e!==($e=s[13]("clients.edit.address")+"")&&B(pt,$e),(!v||p[0]&66&&_t!==(_t=s[1]!==null))&&(ee.readOnly=_t),p[0]&5&&ee.value!==s[2].address&&K(ee,s[2].address),(!v||p[0]&8192)&&et!==(et=s[13]("clients.edit.cancel")+"")&&B(ht,et);let M=te;te=dl(s),te===M?Ve[te].p(s,p):(Bl(),Pe(Ve[M],1,1,()=>{Ve[M]=null}),Al(),le=Ve[te],le?le.p(s,p):(le=Ve[te]=ul[te](s),le.c()),Te(le,1),le.m(fe,null)),(!v||p[0]&32)&&(fe.disabled=s[5]),(!v||p[0]&8192)&&tt!==(tt=s[13]("clients.edit.delete")+"")&&B(bt,tt)},i(s){v||(Te(le),v=!0)},o(s){Pe(le),v=!1},d(s){s&&d(l),F&&F.d(),jl(q,s),jl(H,s),Ve[te].d(),xt=!1,Ol(il)}}}function $l(t){let l,e,n;return e=new zl({props:{isLoading:!0,size:"lg"}}),{c(){l=f("div"),Lt(e.$$.fragment),this.h()},l(a){l=m(a,"DIV",{class:!0});var u=_(l);Pt(e.$$.fragment,u),u.forEach(d),this.h()},h(){o(l,"class","flex justify-center py-12")},m(a,u){oe(a,l,u),Tt(e,l,null),n=!0},p:sl,i(a){n||(Te(e.$$.fragment,a),n=!0)},o(a){Pe(e.$$.fragment,a),n=!1},d(a){a&&d(l),Ot(e)}}}function Dl(t){let l,e;return{c(){l=f("p"),e=P(t[9]),this.h()},l(n){l=m(n,"P",{class:!0});var a=_(l);e=T(a,t[9]),a.forEach(d),this.h()},h(){o(l,"class","text-xs text-red-600 mt-1")},m(n,a){oe(n,l,a),r(l,e)},p(n,a){a[0]&512&&B(e,n[9])},d(n){n&&d(l)}}}function Ll(t){let l,e=t[34].name+"",n,a;return{c(){l=f("option"),n=P(e),this.h()},l(u){l=m(u,"OPTION",{});var c=_(l);n=T(c,e),c.forEach(d),this.h()},h(){l.__value=a=t[34].id,K(l,l.__value)},m(u,c){oe(u,l,c),r(l,n)},p(u,c){c[0]&64&&e!==(e=u[34].name+"")&&B(n,e),c[0]&64&&a!==(a=u[34].id)&&(l.__value=a,K(l,l.__value))},d(u){u&&d(l)}}}function Pl(t){let l,e=t[31].name+"",n,a;return{c(){l=f("option"),n=P(e),this.h()},l(u){l=m(u,"OPTION",{});var c=_(l);n=T(c,e),c.forEach(d),this.h()},h(){l.__value=a=t[31].id,K(l,l.__value)},m(u,c){oe(u,l,c),r(l,n)},p(u,c){c[0]&1&&e!==(e=u[31].name+"")&&B(n,e),c[0]&1&&a!==(a=u[31].id)&&(l.__value=a,K(l,l.__value))},d(u){u&&d(l)}}}function er(t){let l=t[13]("clients.edit.save_changes")+"",e;return{c(){e=P(l)},l(n){e=T(n,l)},m(n,a){oe(n,e,a)},p(n,a){a[0]&8192&&l!==(l=n[13]("clients.edit.save_changes")+"")&&B(e,l)},i:sl,o:sl,d(n){n&&d(e)}}}function tr(t){let l,e,n=t[13]("clients.edit.saving")+"",a,u;return l=new zl({props:{isLoading:!0,size:"sm",className:"mr-2"}}),{c(){Lt(l.$$.fragment),e=E(),a=P(n)},l(c){Pt(l.$$.fragment,c),e=I(c),a=T(c,n)},m(c,y){Tt(l,c,y),oe(c,e,y),oe(c,a,y),u=!0},p(c,y){(!u||y[0]&8192)&&n!==(n=c[13]("clients.edit.saving")+"")&&B(a,n)},i(c){u||(Te(l.$$.fragment,c),u=!0)},o(c){Pe(l.$$.fragment,c),u=!1},d(c){c&&(d(e),d(a)),Ot(l,c)}}}function Tl(t){let l,e;return{c(){l=f("p"),e=P(t[12]),this.h()},l(n){l=m(n,"P",{class:!0});var a=_(l);e=T(a,t[12]),a.forEach(d),this.h()},h(){o(l,"class","text-xs text-red-600 mb-2")},m(n,a){oe(n,l,a),r(l,e)},p(n,a){a[0]&4096&&B(e,n[12])},d(n){n&&d(l)}}}function lr(t){let l,e,n,a=t[13]("clients.edit.delete_confirm_message",{name:t[3].fullName})+"",u,c,y,A=t[13]("clients.edit.delete_confirm_instruction")+"",b,w,g,O,U,h,i,j,S=t[13]("clients.edit.delete_cancel_button")+"",L,de,W,ne=t[13]("clients.edit.delete_confirm_button")+"",G,Q,ae,pe,z=t[12]&&Tl(t);return{c(){l=f("div"),e=f("div"),n=f("p"),u=P(a),c=E(),y=f("p"),b=P(A),w=E(),g=f("input"),U=E(),z&&z.c(),h=E(),i=f("div"),j=f("button"),L=P(S),de=E(),W=f("button"),G=P(ne),this.h()},l(k){l=m(k,"DIV",{class:!0});var V=_(l);e=m(V,"DIV",{class:!0});var $=_(e);n=m($,"P",{class:!0});var _e=_(n);u=T(_e,a),_e.forEach(d),c=I($),y=m($,"P",{class:!0});var he=_(y);b=T(he,A),he.forEach(d),$.forEach(d),w=I(V),g=m(V,"INPUT",{type:!0,class:!0,placeholder:!0}),U=I(V),z&&z.l(V),h=I(V),i=m(V,"DIV",{class:!0});var N=_(i);j=m(N,"BUTTON",{type:!0,class:!0});var C=_(j);L=T(C,S),C.forEach(d),de=I(N),W=m(N,"BUTTON",{type:!0,class:!0});var Y=_(W);G=T(Y,ne),Y.forEach(d),N.forEach(d),V.forEach(d),this.h()},h(){o(n,"class","text-sm text-red-700 font-semibold mb-1"),o(y,"class","text-sm text-gray-700"),o(e,"class","mb-2 p-3 rounded bg-red-50 border border-red-200"),o(g,"type","text"),o(g,"class","block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm mb-2 text-black placeholder-gray-400"),o(g,"placeholder",O=t[3].fullName),o(j,"type","button"),o(j,"class","px-4 py-2 rounded-md text-sm font-medium bg-gray-200 hover:bg-gray-300 text-gray-700"),o(W,"type","button"),o(W,"class","px-4 py-2 rounded-md text-sm font-medium bg-red-600 hover:bg-red-700 text-white disabled:opacity-50"),W.disabled=Q=t[11].trim()!==t[3].fullName,o(i,"class","flex justify-end space-x-2 mt-4"),o(l,"class","p-2")},m(k,V){oe(k,l,V),r(l,e),r(e,n),r(n,u),r(e,c),r(e,y),r(y,b),r(l,w),r(l,g),K(g,t[11]),r(l,U),z&&z.m(l,null),r(l,h),r(l,i),r(i,j),r(j,L),r(i,de),r(i,W),r(W,G),ae||(pe=[se(g,"input",t[26]),se(j,"click",t[27]),se(W,"click",t[17])],ae=!0)},p(k,V){V[0]&8200&&a!==(a=k[13]("clients.edit.delete_confirm_message",{name:k[3].fullName})+"")&&B(u,a),V[0]&8192&&A!==(A=k[13]("clients.edit.delete_confirm_instruction")+"")&&B(b,A),V[0]&8&&O!==(O=k[3].fullName)&&o(g,"placeholder",O),V[0]&2048&&g.value!==k[11]&&K(g,k[11]),k[12]?z?z.p(k,V):(z=Tl(k),z.c(),z.m(l,h)):z&&(z.d(1),z=null),V[0]&8192&&S!==(S=k[13]("clients.edit.delete_cancel_button")+"")&&B(L,S),V[0]&8192&&ne!==(ne=k[13]("clients.edit.delete_confirm_button")+"")&&B(G,ne),V[0]&2056&&Q!==(Q=k[11].trim()!==k[3].fullName)&&(W.disabled=Q)},d(k){k&&d(l),z&&z.d(),ae=!1,Ol(pe)}}}function rr(t){let l,e,n,a,u,c,y,A,b,w;document.title=l=t[13]("clients.edit.title")+" | "+t[13]("common.app_name"),a=new Gl({props:{title:t[13]("clients.edit.title"),subtitle:t[13]("clients.edit.subtitle"),actions:[{label:t[13]("clients.edit.back_to_client"),href:`/clients/${t[3]?.id}`,icon:`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
        </svg>`}]}});const g=[$l,xl],O=[];function U(h,i){return h[4]?0:1}return c=U(t),y=O[c]=g[c](t),b=new Xl({props:{show:t[10],variant:"danger",title:t[13]("clients.edit.delete_confirm_title"),$$slots:{default:[lr]},$$scope:{ctx:t}}}),b.$on("close",t[28]),{c(){e=E(),n=f("div"),Lt(a.$$.fragment),u=E(),y.c(),A=E(),Lt(b.$$.fragment),this.h()},l(h){Hl("svelte-ax25g1",document.head).forEach(d),e=I(h),n=m(h,"DIV",{class:!0});var j=_(n);Pt(a.$$.fragment,j),u=I(j),y.l(j),A=I(j),Pt(b.$$.fragment,j),j.forEach(d),this.h()},h(){o(n,"class","space-y-6")},m(h,i){oe(h,e,i),oe(h,n,i),Tt(a,n,null),r(n,u),O[c].m(n,null),r(n,A),Tt(b,n,null),w=!0},p(h,i){(!w||i[0]&8192)&&l!==(l=h[13]("clients.edit.title")+" | "+h[13]("common.app_name"))&&(document.title=l);const j={};i[0]&8192&&(j.title=h[13]("clients.edit.title")),i[0]&8192&&(j.subtitle=h[13]("clients.edit.subtitle")),i[0]&8200&&(j.actions=[{label:h[13]("clients.edit.back_to_client"),href:`/clients/${h[3]?.id}`,icon:`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
        </svg>`}]),a.$set(j);let S=c;c=U(h),c===S?O[c].p(h,i):(Bl(),Pe(O[S],1,1,()=>{O[S]=null}),Al(),y=O[c],y?y.p(h,i):(y=O[c]=g[c](h),y.c()),Te(y,1),y.m(n,A));const L={};i[0]&1024&&(L.show=h[10]),i[0]&8192&&(L.title=h[13]("clients.edit.delete_confirm_title")),i[0]&15368|i[1]&64&&(L.$$scope={dirty:i,ctx:h}),b.$set(L)},i(h){w||(Te(a.$$.fragment,h),Te(y),Te(b.$$.fragment,h),w=!0)},o(h){Pe(a.$$.fragment,h),Pe(y),Pe(b.$$.fragment,h),w=!1},d(h){h&&(d(e),d(n)),Ot(a),O[c].d(),Ot(b)}}}function sr(t,l,e){let n;Wl(t,Ql,N=>e(13,n=N));let{data:a}=l,u=null,c=!0,y=!1,A=[],b=[],w=[],g=null,O="",U="",h="",i={fullName:"",cin:"",job:"",phoneNumber:"",workplace:"",address:"",jobId:null,workplaceId:null,workerNumber:""},j=!1,S="",L="";Jl(async()=>{if(!a.client){Me(n("clients.edit.not_found"),"error"),Dt("/clients");return}try{const[N,C]=await Promise.all([Sl.getAll(),Ml.getAll()]);e(6,A=N),e(19,b=C),e(3,u=a.client),e(2,i={fullName:u.fullName,cin:u.cin||"",job:u.job||"",phoneNumber:u.phoneNumber||"",workplace:u.workplace||"",address:u.address||"",jobId:u.jobId,workplaceId:u.workplaceId,workerNumber:u.workerNumber||""}),u.workplaceId&&(e(1,g=u.workplaceId),e(0,w=b.filter(Y=>Y.workplaceId===u.workplaceId))),e(4,c=!1)}catch{Me(n("clients.edit.load_error"),"error"),e(4,c=!1)}});function de(N){const C=N.target.value;if(e(1,g=C||null),e(2,i.workplaceId=C||null,i),C){const Y=A.find(Ue=>Ue.id===C);Y&&e(2,i.address=Y.name,i)}}function W(N){const C=N.target.value;e(2,i.jobId=C||null,i)}async function ne(){if(e(9,h=""),e(7,O=""),e(8,U=""),i.fullName||e(9,h="Le nom complet est requis."),(!i.cin||i.cin.length!==8)&&e(7,O="Le numéro CIN doit comporter exactement 8 chiffres (ex: 01234567)."),(!i.workerNumber||i.workerNumber.length!==10)&&e(8,U="Le numéro d'employé doit comporter exactement 10 chiffres (ex: 0092423923)."),h||O||U){Me("Veuillez corriger les erreurs du formulaire.","error");return}e(5,y=!0);try{await rl.update(u.id,i),Me(n("clients.edit.success"),"success"),Dt(`/clients/${u.id}`)}catch(N){let C=N?.message||"";C&&C.toLowerCase().includes("cin")?e(7,O=C):C&&C.toLowerCase().includes("employ")?e(8,U=C):C&&C.toLowerCase().includes("nom")?e(9,h=C):Me(C||n("clients.edit.error"),"error")}finally{e(5,y=!1)}}async function G(){if(e(12,L=""),S.trim()!==u.fullName){e(12,L="Le nom saisi ne correspond pas. Veuillez taper le nom complet du client pour confirmer.");return}try{await rl.delete(u.id),Me("Client et toutes ses cessions supprimés avec succès.","success"),Dt("/clients")}catch(N){Me(N.message||"Erreur lors de la suppression du client.","error")}}function Q(){i.fullName=this.value,e(2,i),e(1,g),e(19,b),e(0,w),e(0,w),e(1,g),e(19,b),e(2,i)}function ae(){i.cin=this.value,e(2,i),e(1,g),e(19,b),e(0,w),e(0,w),e(1,g),e(19,b),e(2,i)}function pe(){i.workerNumber=this.value,e(2,i),e(1,g),e(19,b),e(0,w),e(0,w),e(1,g),e(19,b),e(2,i)}function z(){i.address=this.value,e(2,i),e(1,g),e(19,b),e(0,w),e(0,w),e(1,g),e(19,b),e(2,i)}const k=()=>Dt(`/clients/${u.id}`),V=()=>{e(10,j=!0),e(11,S=""),e(12,L="")};function $(){S=this.value,e(11,S)}const _e=()=>e(10,j=!1),he=()=>e(10,j=!1);return t.$$set=N=>{"data"in N&&e(18,a=N.data)},t.$$.update=()=>{t.$$.dirty[0]&524295&&(g?(e(0,w=b.filter(N=>N.workplaceId===g)),i.jobId&&!w.some(N=>N.id===i.jobId)&&e(2,i.jobId=null,i)):(e(0,w=[]),e(2,i.jobId=null,i)))},[w,g,i,u,c,y,A,O,U,h,j,S,L,n,de,W,ne,G,a,b,Q,ae,pe,z,k,V,$,_e,he]}class br extends Fl{constructor(l){super(),Kl(this,l,sr,rr,ql,{data:18},null,[-1,-1])}}export{br as component,hr as universal};
