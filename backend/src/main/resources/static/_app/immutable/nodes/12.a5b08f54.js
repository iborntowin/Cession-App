import{s as Le,a as p,f as l,l as $,J as Ne,d as c,c as y,g as n,h as v,m as ee,y as J,j as t,i as ge,w as e,N as H,z as Y,Q as Oe,R as ue,I as Pe,H as Ve,u as Fe,o as Te,A as ce,n as ke}from"../chunks/scheduler.fb6ad399.js";import{S as qe,i as Be}from"../chunks/index.19f0e15d.js";import{c as Se,b as Me}from"../chunks/api.b4688d57.js";import{s as R,g as de,l as Z}from"../chunks/navigation.68a3d764.js";function Ue({params:o}){return{clientId:o.id}}const Ge=Object.freeze(Object.defineProperty({__proto__:null,load:Ue},Symbol.toStringTag,{value:"Module"}));function we(o){let m,r,i="Client Information",u,_,a,A,D="Full Name",B,E,P=o[1].fullName+"",b,s,x,g,X="CIN (ID Number)",Q,f,T=o[1].cin+"",k;return{c(){m=l("div"),r=l("h2"),r.textContent=i,u=p(),_=l("div"),a=l("div"),A=l("p"),A.textContent=D,B=p(),E=l("p"),b=$(P),s=p(),x=l("div"),g=l("p"),g.textContent=X,Q=p(),f=l("p"),k=$(T),this.h()},l(h){m=n(h,"DIV",{class:!0});var w=v(m);r=n(w,"H2",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-27hnvw"&&(r.textContent=i),u=y(w),_=n(w,"DIV",{class:!0});var S=v(_);a=n(S,"DIV",{});var C=v(a);A=n(C,"P",{class:!0,"data-svelte-h":!0}),J(A)!=="svelte-y4vv6"&&(A.textContent=D),B=y(C),E=n(C,"P",{class:!0});var K=v(E);b=ee(K,P),K.forEach(c),C.forEach(c),s=y(S),x=n(S,"DIV",{});var L=v(x);g=n(L,"P",{class:!0,"data-svelte-h":!0}),J(g)!=="svelte-z48v35"&&(g.textContent=X),Q=y(L),f=n(L,"P",{class:!0});var O=v(f);k=ee(O,T),O.forEach(c),L.forEach(c),S.forEach(c),w.forEach(c),this.h()},h(){t(r,"class","text-lg font-semibold mb-2"),t(A,"class","text-sm text-gray-500"),t(E,"class","font-medium"),t(g,"class","text-sm text-gray-500"),t(f,"class","font-medium"),t(_,"class","grid grid-cols-2 gap-4"),t(m,"class","card mb-6")},m(h,w){ge(h,m,w),e(m,r),e(m,u),e(m,_),e(_,a),e(a,A),e(a,B),e(a,E),e(E,b),e(_,s),e(_,x),e(x,g),e(x,Q),e(x,f),e(f,k)},p(h,w){w&2&&P!==(P=h[1].fullName+"")&&ke(b,P),w&2&&T!==(T=h[1].cin+"")&&ke(k,T)},d(h){h&&c(m)}}}function je(o){let m,r,i,u,_,a,A,D,B="New Cession",E,P,b,s,x,g,X="Bank or Agency",Q,f,T,k,h,w="Total Loan Amount",S,C,K,L,O,Ce="Monthly Payment",me,V,fe,G,M,Ie="Start Date",ve,F,he,U,j,pe,te,ye,q,_e,be,xe,I=o[1]&&we(o);return{c(){m=p(),r=l("div"),i=l("div"),u=l("a"),_=$("← Back to Cessions"),A=p(),D=l("h1"),D.textContent=B,E=p(),I&&I.c(),P=p(),b=l("form"),s=l("div"),x=l("div"),g=l("label"),g.textContent=X,Q=p(),f=l("input"),T=p(),k=l("div"),h=l("label"),h.textContent=w,S=p(),C=l("input"),K=p(),L=l("div"),O=l("label"),O.textContent=Ce,me=p(),V=l("input"),fe=p(),G=l("div"),M=l("label"),M.textContent=Ie,ve=p(),F=l("input"),he=p(),U=l("div"),j=l("a"),pe=$("Cancel"),ye=p(),q=l("button"),_e=$("Create Cession"),this.h()},l(d){Ne("svelte-puocv6",document.head).forEach(c),m=y(d),r=n(d,"DIV",{class:!0});var W=v(r);i=n(W,"DIV",{class:!0});var se=v(i);u=n(se,"A",{href:!0,class:!0});var Ae=v(u);_=ee(Ae,"← Back to Cessions"),Ae.forEach(c),A=y(se),D=n(se,"H1",{class:!0,"data-svelte-h":!0}),J(D)!=="svelte-1qtl7c0"&&(D.textContent=B),se.forEach(c),E=y(W),I&&I.l(W),P=y(W),b=n(W,"FORM",{class:!0});var ae=v(b);s=n(ae,"DIV",{class:!0});var z=v(s);x=n(z,"DIV",{});var le=v(x);g=n(le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(g)!=="svelte-1fs3edy"&&(g.textContent=X),Q=y(le),f=n(le,"INPUT",{type:!0,id:!0,class:!0}),le.forEach(c),T=y(z),k=n(z,"DIV",{});var ne=v(k);h=n(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(h)!=="svelte-16izn0g"&&(h.textContent=w),S=y(ne),C=n(ne,"INPUT",{type:!0,id:!0,class:!0}),ne.forEach(c),K=y(z),L=n(z,"DIV",{});var re=v(L);O=n(re,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(O)!=="svelte-ap9doc"&&(O.textContent=Ce),me=y(re),V=n(re,"INPUT",{type:!0,id:!0,class:!0}),re.forEach(c),fe=y(z),G=n(z,"DIV",{});var oe=v(G);M=n(oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(M)!=="svelte-12tmqq8"&&(M.textContent=Ie),ve=y(oe),F=n(oe,"INPUT",{type:!0,id:!0,class:!0}),oe.forEach(c),z.forEach(c),he=y(ae),U=n(ae,"DIV",{class:!0});var ie=v(U);j=n(ie,"A",{href:!0,class:!0});var De=v(j);pe=ee(De,"Cancel"),De.forEach(c),ye=y(ie),q=n(ie,"BUTTON",{type:!0,class:!0});var Ee=v(q);_e=ee(Ee,"Create Cession"),Ee.forEach(c),ie.forEach(c),ae.forEach(c),W.forEach(c),this.h()},h(){document.title="New Cession | Cession Management",t(u,"href",a=`/clients/${o[0].clientId}/cessions`),t(u,"class","text-primary-600 hover:text-primary-800 mb-2 inline-block"),t(D,"class","text-2xl font-bold text-gray-800"),t(i,"class","mb-6"),t(g,"for","bankOrAgency"),t(g,"class","block text-sm font-medium text-gray-700"),t(f,"type","text"),t(f,"id","bankOrAgency"),t(f,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"),f.required=!0,t(h,"for","totalLoanAmount"),t(h,"class","block text-sm font-medium text-gray-700"),t(C,"type","number"),t(C,"id","totalLoanAmount"),t(C,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"),C.required=!0,t(O,"for","monthlyPayment"),t(O,"class","block text-sm font-medium text-gray-700"),t(V,"type","number"),t(V,"id","monthlyPayment"),t(V,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"),V.required=!0,t(M,"for","startDate"),t(M,"class","block text-sm font-medium text-gray-700"),t(F,"type","date"),t(F,"id","startDate"),t(F,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"),F.required=!0,t(s,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),t(j,"href",te=`/clients/${o[0].clientId}/cessions`),t(j,"class","btn btn-secondary"),t(q,"type","submit"),t(q,"class","btn btn-primary"),q.disabled=o[3],t(U,"class","mt-6 flex justify-end space-x-3"),t(b,"class","card"),t(r,"class","max-w-4xl mx-auto px-4 py-8")},m(d,N){ge(d,m,N),ge(d,r,N),e(r,i),e(i,u),e(u,_),e(i,A),e(i,D),e(r,E),I&&I.m(r,null),e(r,P),e(r,b),e(b,s),e(s,x),e(x,g),e(x,Q),e(x,f),H(f,o[2].bankOrAgency),e(s,T),e(s,k),e(k,h),e(k,S),e(k,C),H(C,o[2].totalLoanAmount),e(s,K),e(s,L),e(L,O),e(L,me),e(L,V),H(V,o[2].monthlyPayment),e(s,fe),e(s,G),e(G,M),e(G,ve),e(G,F),H(F,o[2].startDate),e(b,he),e(b,U),e(U,j),e(j,pe),e(U,ye),e(U,q),e(q,_e),be||(xe=[Y(f,"input",o[5]),Y(C,"input",o[6]),Y(V,"input",o[7]),Y(F,"input",o[8]),Y(b,"submit",Oe(o[4]))],be=!0)},p(d,[N]){N&1&&a!==(a=`/clients/${d[0].clientId}/cessions`)&&t(u,"href",a),d[1]?I?I.p(d,N):(I=we(d),I.c(),I.m(r,P)):I&&(I.d(1),I=null),N&4&&f.value!==d[2].bankOrAgency&&H(f,d[2].bankOrAgency),N&4&&ue(C.value)!==d[2].totalLoanAmount&&H(C,d[2].totalLoanAmount),N&4&&ue(V.value)!==d[2].monthlyPayment&&H(V,d[2].monthlyPayment),N&4&&H(F,d[2].startDate),N&1&&te!==(te=`/clients/${d[0].clientId}/cessions`)&&t(j,"href",te),N&8&&(q.disabled=d[3])},i:Pe,o:Pe,d(d){d&&(c(m),c(r)),I&&I.d(),be=!1,Ve(xe)}}}function ze(o,m,r){let i;Fe(o,Z,s=>r(3,i=s));let{data:u}=m,_=null,a={clientId:u.clientId,totalLoanAmount:"",monthlyPayment:"",startDate:new Date().toISOString().split("T")[0],bankOrAgency:"",status:"ACTIVE"};Te(async()=>{if(!u.clientId){R("Invalid client ID","error"),de("/clients");return}await A()});async function A(){ce(Z,i=!0,i);try{const s=await Se.getById(u.clientId);s.success?(r(1,_=s.data),r(2,a.clientId=_.id,a)):(R(s.error||"Failed to load client details","error"),de("/clients"))}catch(s){R(s.message||"Failed to load client details","error"),de("/clients")}finally{ce(Z,i=!1,i)}}async function D(){if(!a.totalLoanAmount||!a.monthlyPayment||!a.startDate||!a.bankOrAgency){R("Please fill in all required fields","error");return}if(isNaN(parseFloat(a.totalLoanAmount))||isNaN(parseFloat(a.monthlyPayment))){R("Please enter valid numbers for amounts","error");return}ce(Z,i=!0,i);try{const s=await Me.create(a);s.success?(R("Cession created successfully","success"),de(`/clients/${u.clientId}/cessions/${s.data.id}`)):R(s.error||"Failed to create cession","error")}catch(s){R(s.message||"Failed to create cession","error")}finally{ce(Z,i=!1,i)}}function B(){a.bankOrAgency=this.value,r(2,a)}function E(){a.totalLoanAmount=ue(this.value),r(2,a)}function P(){a.monthlyPayment=ue(this.value),r(2,a)}function b(){a.startDate=this.value,r(2,a)}return o.$$set=s=>{"data"in s&&r(0,u=s.data)},[u,_,a,i,D,B,E,P,b]}class Ke extends qe{constructor(m){super(),Be(this,m,ze,je,Le,{data:0})}}export{Ke as component,Ge as universal};
