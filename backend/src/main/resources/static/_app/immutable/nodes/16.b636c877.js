import{s as Se,e as ge,i as J,d as m,T as He,f as p,a as N,l as Y,g as h,h as E,c as U,m as G,y as ee,j as r,w as n,z as ae,n as te,H as be,I as me,p as Be,L as De,U as Oe,o as Re,v as Ae,r as Le,K as ze}from"../chunks/scheduler.55755e91.js";import{S as Me,i as Ne,a as Q,g as ye,t as X,c as we,b as oe,d as ie,m as ce,e as ue,h as qe}from"../chunks/index.d2ed93bc.js";import{e as Ce}from"../chunks/each.8720bd6f.js";import{b as fe}from"../chunks/api.20dd9789.js";import{u as Ke}from"../chunks/navigation.fbd60083.js";import{C as Ye}from"../chunks/auto.c1974a99.js";import{I as Ue,E as je}from"../chunks/IncomeForm.0b32c769.js";import{M as Ge}from"../chunks/Modal.c903ba58.js";function Ie(l){let e,s,t,a,u,c,f,o,_,D,w=l[1]==="expense"?"Expense":"Income",x,j,g,k,d,V,b,v,T="Close",y,O,B;const z=[Qe,Je],F=[];function Z(P,i){return P[1]==="expense"?0:1}return k=Z(l),d=F[k]=z[k](l),{c(){e=p("div"),s=p("div"),t=p("div"),a=N(),u=p("div"),c=p("div"),f=p("div"),o=p("div"),_=p("h3"),D=Y("Add "),x=Y(w),j=N(),g=p("div"),d.c(),V=N(),b=p("div"),v=p("button"),v.textContent=T,this.h()},l(P){e=h(P,"DIV",{class:!0,"aria-labelledby":!0,role:!0,"aria-modal":!0});var i=E(e);s=h(i,"DIV",{class:!0});var C=E(s);t=h(C,"DIV",{class:!0,"aria-hidden":!0}),E(t).forEach(m),a=U(C),u=h(C,"DIV",{class:!0});var R=E(u);c=h(R,"DIV",{class:!0});var M=E(c);f=h(M,"DIV",{class:!0});var W=E(f);o=h(W,"DIV",{class:!0});var se=E(o);_=h(se,"H3",{class:!0,id:!0});var le=E(_);D=G(le,"Add "),x=G(le,w),le.forEach(m),j=U(se),g=h(se,"DIV",{class:!0});var I=E(g);d.l(I),I.forEach(m),se.forEach(m),W.forEach(m),M.forEach(m),V=U(R),b=h(R,"DIV",{class:!0});var A=E(b);v=h(A,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(v)!=="svelte-1nn5y17"&&(v.textContent=T),A.forEach(m),R.forEach(m),C.forEach(m),i.forEach(m),this.h()},h(){r(t,"class","fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"),r(t,"aria-hidden","true"),r(_,"class","text-lg leading-6 font-medium text-gray-900"),r(_,"id","modal-title"),r(g,"class","mt-4"),r(o,"class","mt-3 text-center sm:mt-0 sm:text-left w-full"),r(f,"class","sm:flex sm:items-start"),r(c,"class","bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"),r(v,"type","button"),r(v,"class","mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"),r(b,"class","bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"),r(u,"class","inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"),r(s,"class","flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"),r(e,"class","fixed inset-0 z-50 overflow-y-auto"),r(e,"aria-labelledby","modal-title"),r(e,"role","dialog"),r(e,"aria-modal","true")},m(P,i){J(P,e,i),n(e,s),n(s,t),n(s,a),n(s,u),n(u,c),n(c,f),n(f,o),n(o,_),n(_,D),n(_,x),n(o,j),n(o,g),F[k].m(g,null),n(u,V),n(u,b),n(b,v),y=!0,O||(B=[ae(t,"click",l[2]),ae(v,"click",l[2])],O=!0)},p(P,i){(!y||i&2)&&w!==(w=P[1]==="expense"?"Expense":"Income")&&te(x,w);let C=k;k=Z(P),k===C?F[k].p(P,i):(ye(),X(F[C],1,1,()=>{F[C]=null}),we(),d=F[k],d?d.p(P,i):(d=F[k]=z[k](P),d.c()),Q(d,1),d.m(g,null))},i(P){y||(Q(d),y=!0)},o(P){X(d),y=!1},d(P){P&&m(e),F[k].d(),O=!1,be(B)}}}function Je(l){let e,s;return e=new Ue({}),e.$on("success",l[3]),{c(){oe(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,a){ce(e,t,a),s=!0},p:me,i(t){s||(Q(e.$$.fragment,t),s=!0)},o(t){X(e.$$.fragment,t),s=!1},d(t){ue(e,t)}}}function Qe(l){let e,s;return e=new je({}),e.$on("success",l[3]),{c(){oe(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,a){ce(e,t,a),s=!0},p:me,i(t){s||(Q(e.$$.fragment,t),s=!0)},o(t){X(e.$$.fragment,t),s=!1},d(t){ue(e,t)}}}function We(l){let e,s,t=l[0]&&Ie(l);return{c(){t&&t.c(),e=ge()},l(a){t&&t.l(a),e=ge()},m(a,u){t&&t.m(a,u),J(a,e,u),s=!0},p(a,[u]){a[0]?t?(t.p(a,u),u&1&&Q(t,1)):(t=Ie(a),t.c(),Q(t,1),t.m(e.parentNode,e)):t&&(ye(),X(t,1,1,()=>{t=null}),we())},i(a){s||(Q(t),s=!0)},o(a){X(t),s=!1},d(a){a&&m(e),t&&t.d(a)}}}function Xe(l,e,s){let{show:t=!1}=e,{type:a="expense"}=e;const u=He();function c(){s(0,t=!1)}function f(o){u("success",o),s(0,t=!1)}return l.$$set=o=>{"show"in o&&s(0,t=o.show),"type"in o&&s(1,a=o.type)},[t,a,c,f]}class Ze extends Me{constructor(e){super(),Ne(this,e,Xe,We,Se,{show:0,type:1})}}function Ve(l,e,s){const t=l.slice();return t[36]=e[s],t}function et(l){let e,s,t,a="Total Income",u,c,f=ne(l[2]?.totalIncome||0)+"",o,_,D,w,x="Total Expenses",j,g,k=ne(l[2]?.totalExpenses||0)+"",d,V,b,v,T="Net Profit",y,O,B=ne(l[2]?.profit||0)+"",z,F,Z,P,i,C='<h3 class="text-lg font-medium text-gray-900 mb-4">Expense Distribution</h3> <div class="h-64"><canvas id="expensesChart"></canvas></div>',R,M,W,se="Recent Transactions",le,I,A,q=Ce([...l[0],...l[1]].sort(l[20])),S=[];for(let $=0;$<q.length;$+=1)S[$]=$e(Ve(l,q,$));let K=l[8]>1&&Te(l);return{c(){e=p("div"),s=p("div"),t=p("h3"),t.textContent=a,u=N(),c=p("p"),o=Y(f),_=N(),D=p("div"),w=p("h3"),w.textContent=x,j=N(),g=p("p"),d=Y(k),V=N(),b=p("div"),v=p("h3"),v.textContent=T,y=N(),O=p("p"),z=Y(B),Z=N(),P=p("div"),i=p("div"),i.innerHTML=C,R=N(),M=p("div"),W=p("h3"),W.textContent=se,le=N(),I=p("div");for(let $=0;$<S.length;$+=1)S[$].c();A=N(),K&&K.c(),this.h()},l($){e=h($,"DIV",{class:!0});var L=E(e);s=h(L,"DIV",{class:!0});var H=E(s);t=h(H,"H3",{class:!0,"data-svelte-h":!0}),ee(t)!=="svelte-jliia5"&&(t.textContent=a),u=U(H),c=h(H,"P",{class:!0});var de=E(c);o=G(de,f),de.forEach(m),H.forEach(m),_=U(L),D=h(L,"DIV",{class:!0});var pe=E(D);w=h(pe,"H3",{class:!0,"data-svelte-h":!0}),ee(w)!=="svelte-hdbx33"&&(w.textContent=x),j=U(pe),g=h(pe,"P",{class:!0});var xe=E(g);d=G(xe,k),xe.forEach(m),pe.forEach(m),V=U(L),b=h(L,"DIV",{class:!0});var he=E(b);v=h(he,"H3",{class:!0,"data-svelte-h":!0}),ee(v)!=="svelte-1y3awnv"&&(v.textContent=T),y=U(he),O=h(he,"P",{class:!0});var ke=E(O);z=G(ke,B),ke.forEach(m),he.forEach(m),L.forEach(m),Z=U($),P=h($,"DIV",{class:!0});var _e=E(P);i=h(_e,"DIV",{class:!0,"data-svelte-h":!0}),ee(i)!=="svelte-iaf0js"&&(i.innerHTML=C),R=U(_e),M=h(_e,"DIV",{class:!0});var re=E(M);W=h(re,"H3",{class:!0,"data-svelte-h":!0}),ee(W)!=="svelte-1kltnva"&&(W.textContent=se),le=U(re),I=h(re,"DIV",{class:!0});var Ee=E(I);for(let ve=0;ve<S.length;ve+=1)S[ve].l(Ee);Ee.forEach(m),A=U(re),K&&K.l(re),re.forEach(m),_e.forEach(m),this.h()},h(){r(t,"class","text-lg font-medium text-gray-900 mb-2"),r(c,"class","text-3xl font-bold text-green-600"),r(s,"class","bg-white rounded-lg shadow p-6"),r(w,"class","text-lg font-medium text-gray-900 mb-2"),r(g,"class","text-3xl font-bold text-red-600"),r(D,"class","bg-white rounded-lg shadow p-6"),r(v,"class","text-lg font-medium text-gray-900 mb-2"),r(O,"class",F="text-3xl font-bold "+(l[2]?.profit>=0?"text-green-600":"text-red-600")),r(b,"class","bg-white rounded-lg shadow p-6"),r(e,"class","grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"),r(i,"class","bg-white rounded-lg shadow p-6"),r(W,"class","text-lg font-medium text-gray-900 mb-4"),r(I,"class","space-y-4"),r(M,"class","bg-white rounded-lg shadow p-6"),r(P,"class","grid grid-cols-1 md:grid-cols-2 gap-8")},m($,L){J($,e,L),n(e,s),n(s,t),n(s,u),n(s,c),n(c,o),n(e,_),n(e,D),n(D,w),n(D,j),n(D,g),n(g,d),n(e,V),n(e,b),n(b,v),n(b,y),n(b,O),n(O,z),J($,Z,L),J($,P,L),n(P,i),n(P,R),n(P,M),n(M,W),n(M,le),n(M,I);for(let H=0;H<S.length;H+=1)S[H]&&S[H].m(I,null);n(M,A),K&&K.m(M,null)},p($,L){if(L[0]&4&&f!==(f=ne($[2]?.totalIncome||0)+"")&&te(o,f),L[0]&4&&k!==(k=ne($[2]?.totalExpenses||0)+"")&&te(d,k),L[0]&4&&B!==(B=ne($[2]?.profit||0)+"")&&te(z,B),L[0]&4&&F!==(F="text-3xl font-bold "+($[2]?.profit>=0?"text-green-600":"text-red-600"))&&r(O,"class",F),L[0]&1539){q=Ce([...$[0],...$[1]].sort($[20]));let H;for(H=0;H<q.length;H+=1){const de=Ve($,q,H);S[H]?S[H].p(de,L):(S[H]=$e(de),S[H].c(),S[H].m(I,null))}for(;H<S.length;H+=1)S[H].d(1);S.length=q.length}$[8]>1?K?K.p($,L):(K=Te($),K.c(),K.m(M,null)):K&&(K.d(1),K=null)},d($){$&&(m(e),m(Z),m(P)),ze(S,$),K&&K.d()}}}function tt(l){let e,s,t;return{c(){e=p("div"),s=p("span"),t=Y(l[4]),this.h()},l(a){e=h(a,"DIV",{class:!0,role:!0});var u=E(e);s=h(u,"SPAN",{class:!0});var c=E(s);t=G(c,l[4]),c.forEach(m),u.forEach(m),this.h()},h(){r(s,"class","block sm:inline"),r(e,"class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"),r(e,"role","alert")},m(a,u){J(a,e,u),n(e,s),n(s,t)},p(a,u){u[0]&16&&te(t,a[4])},d(a){a&&m(e)}}}function st(l){let e,s='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>';return{c(){e=p("div"),e.innerHTML=s,this.h()},l(t){e=h(t,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-6w35z4"&&(e.innerHTML=s),this.h()},h(){r(e,"class","flex justify-center items-center h-64")},m(t,a){J(t,e,a)},p:me,d(t){t&&m(e)}}}function $e(l){let e,s,t,a=(l[36].category||l[36].source||"Uncategorized")+"",u,c,f,o=Fe(l[36].date)+"",_,D,w,x=ne(l[36].amount)+"",j,g,k;return{c(){e=p("div"),s=p("div"),t=p("p"),u=Y(a),c=N(),f=p("p"),_=Y(o),D=N(),w=p("p"),j=Y(x),k=N(),this.h()},l(d){e=h(d,"DIV",{class:!0});var V=E(e);s=h(V,"DIV",{});var b=E(s);t=h(b,"P",{class:!0});var v=E(t);u=G(v,a),v.forEach(m),c=U(b),f=h(b,"P",{class:!0});var T=E(f);_=G(T,o),T.forEach(m),b.forEach(m),D=U(V),w=h(V,"P",{class:!0});var y=E(w);j=G(y,x),y.forEach(m),k=U(V),V.forEach(m),this.h()},h(){r(t,"class","font-medium text-gray-900"),r(f,"class","text-sm text-gray-500"),r(w,"class",g="font-medium "+(l[36].amount>=0?"text-green-600":"text-red-600")),r(e,"class","flex items-center justify-between p-4 bg-gray-50 rounded-lg")},m(d,V){J(d,e,V),n(e,s),n(s,t),n(t,u),n(s,c),n(s,f),n(f,_),n(e,D),n(e,w),n(w,j),n(e,k)},p(d,V){V[0]&1539&&a!==(a=(d[36].category||d[36].source||"Uncategorized")+"")&&te(u,a),V[0]&1539&&o!==(o=Fe(d[36].date)+"")&&te(_,o),V[0]&1539&&x!==(x=ne(d[36].amount)+"")&&te(j,x),V[0]&1539&&g!==(g="font-medium "+(d[36].amount>=0?"text-green-600":"text-red-600"))&&r(w,"class",g)},d(d){d&&m(e)}}}function Te(l){let e,s,t,a,u,c,f,o,_=l[7]+1+"",D,w,x,j,g,k,d,V,b,v;return{c(){e=p("div"),s=p("button"),t=Y("Previous"),c=N(),f=p("span"),o=Y("Page "),D=Y(_),w=Y(" of "),x=Y(l[8]),j=N(),g=p("button"),k=Y("Next"),this.h()},l(T){e=h(T,"DIV",{class:!0});var y=E(e);s=h(y,"BUTTON",{class:!0});var O=E(s);t=G(O,"Previous"),O.forEach(m),c=U(y),f=h(y,"SPAN",{class:!0});var B=E(f);o=G(B,"Page "),D=G(B,_),w=G(B," of "),x=G(B,l[8]),B.forEach(m),j=U(y),g=h(y,"BUTTON",{class:!0});var z=E(g);k=G(z,"Next"),z.forEach(m),y.forEach(m),this.h()},h(){r(s,"class",a="px-3 py-1 border rounded "+(l[7]===0?"opacity-50 cursor-not-allowed":"hover:bg-gray-100")),s.disabled=u=l[7]===0,r(f,"class","px-3 py-1"),r(g,"class",d="px-3 py-1 border rounded "+(l[7]===l[8]-1?"opacity-50 cursor-not-allowed":"hover:bg-gray-100")),g.disabled=V=l[7]===l[8]-1,r(e,"class","flex justify-center mt-4 gap-2")},m(T,y){J(T,e,y),n(e,s),n(s,t),n(e,c),n(e,f),n(f,o),n(f,D),n(f,w),n(f,x),n(e,j),n(e,g),n(g,k),b||(v=[ae(s,"click",l[21]),ae(g,"click",l[22])],b=!0)},p(T,y){y[0]&128&&a!==(a="px-3 py-1 border rounded "+(T[7]===0?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"))&&r(s,"class",a),y[0]&128&&u!==(u=T[7]===0)&&(s.disabled=u),y[0]&128&&_!==(_=T[7]+1+"")&&te(D,_),y[0]&256&&te(x,T[8]),y[0]&384&&d!==(d="px-3 py-1 border rounded "+(T[7]===T[8]-1?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"))&&r(g,"class",d),y[0]&384&&V!==(V=T[7]===T[8]-1)&&(g.disabled=V)},d(T){T&&m(e),b=!1,be(v)}}}function lt(l){let e,s;return e=new Ue({}),e.$on("submit",l[25]),{c(){oe(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,a){ce(e,t,a),s=!0},p:me,i(t){s||(Q(e.$$.fragment,t),s=!0)},o(t){X(e.$$.fragment,t),s=!1},d(t){ue(e,t)}}}function nt(l){let e,s;return e=new je({}),e.$on("submit",l[24]),{c(){oe(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,a){ce(e,t,a),s=!0},p:me,i(t){s||(Q(e.$$.fragment,t),s=!0)},o(t){X(e.$$.fragment,t),s=!1},d(t){ue(e,t)}}}function at(l){let e,s,t,a;const u=[nt,lt],c=[];function f(o,_){return o[6]==="expense"?0:1}return e=f(l),s=c[e]=u[e](l),{c(){s.c(),t=ge()},l(o){s.l(o),t=ge()},m(o,_){c[e].m(o,_),J(o,t,_),a=!0},p(o,_){let D=e;e=f(o),e===D?c[e].p(o,_):(ye(),X(c[D],1,1,()=>{c[D]=null}),we(),s=c[e],s?s.p(o,_):(s=c[e]=u[e](o),s.c()),Q(s,1),s.m(t.parentNode,t))},i(o){a||(Q(s),a=!0)},o(o){X(s),a=!1},d(o){o&&m(t),c[e].d(o)}}}function rt(l){let e,s,t,a="Monthly Expense and Profit Tracker",u,c,f,o,_,D="Add Expense",w,x,j="Add Income",g,k,d,V,b,v,T,y,O;function B(i,C){return i[3]?st:i[4]?tt:et}let z=B(l),F=z(l);function Z(i){l[23](i)}let P={type:l[6]};return l[5]!==void 0&&(P.show=l[5]),d=new Ze({props:P}),Be.push(()=>qe(d,"show",Z)),d.$on("success",l[16]),v=new Ge({props:{$$slots:{default:[at]},$$scope:{ctx:l}}}),v.$on("close",l[26]),{c(){e=p("div"),s=p("div"),t=p("h1"),t.textContent=a,u=N(),c=p("div"),f=p("input"),o=N(),_=p("button"),_.textContent=D,w=N(),x=p("button"),x.textContent=j,g=N(),F.c(),k=N(),oe(d.$$.fragment),b=N(),oe(v.$$.fragment),this.h()},l(i){e=h(i,"DIV",{class:!0});var C=E(e);s=h(C,"DIV",{class:!0});var R=E(s);t=h(R,"H1",{class:!0,"data-svelte-h":!0}),ee(t)!=="svelte-1i6td67"&&(t.textContent=a),u=U(R),c=h(R,"DIV",{class:!0});var M=E(c);f=h(M,"INPUT",{type:!0,class:!0}),o=U(M),_=h(M,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(_)!=="svelte-1k7kvik"&&(_.textContent=D),w=U(M),x=h(M,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(x)!=="svelte-1do3whd"&&(x.textContent=j),M.forEach(m),R.forEach(m),g=U(C),F.l(C),C.forEach(m),k=U(i),ie(d.$$.fragment,i),b=U(i),ie(v.$$.fragment,i),this.h()},h(){r(t,"class","text-2xl font-bold text-gray-900"),r(f,"type","month"),r(f,"class","block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm"),r(_,"class","bg-primary text-white px-4 py-2 rounded-md hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"),r(x,"class","bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),r(c,"class","flex space-x-4"),r(s,"class","flex justify-between items-center mb-8"),r(e,"class","container mx-auto px-4 py-8")},m(i,C){J(i,e,C),n(e,s),n(s,t),n(s,u),n(s,c),n(c,f),De(f,l[11].start),n(c,o),n(c,_),n(c,w),n(c,x),n(e,g),F.m(e,null),J(i,k,C),ce(d,i,C),J(i,b,C),ce(v,i,C),T=!0,y||(O=[ae(f,"input",l[17]),ae(f,"change",l[14]),ae(_,"click",l[18]),ae(x,"click",l[19])],y=!0)},p(i,C){C[0]&2048&&De(f,i[11].start),z===(z=B(i))&&F?F.p(i,C):(F.d(1),F=z(i),F&&(F.c(),F.m(e,null)));const R={};C[0]&64&&(R.type=i[6]),!V&&C[0]&32&&(V=!0,R.show=i[5],Oe(()=>V=!1)),d.$set(R);const M={};C[0]&96|C[1]&256&&(M.$$scope={dirty:C,ctx:i}),v.$set(M)},i(i){T||(Q(d.$$.fragment,i),Q(v.$$.fragment,i),T=!0)},o(i){X(d.$$.fragment,i),X(v.$$.fragment,i),T=!1},d(i){i&&(m(e),m(k),m(b)),F.d(),ue(d,i),ue(v,i),y=!1,be(O)}}}let Pe=10;function ne(l){return new Intl.NumberFormat("en-US",{style:"currency",currency:"TND"}).format(l)}function Fe(l){return new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function ot(l,e,s){let t=new Date,a=t.getFullYear(),u=t.getMonth()+1,c=[],f=[],o=null,_=!0,D=null,w=null,x=!1,j="expense",g=0,k=0,d="date",V="desc",b={start:new Date(a,u-1,1).toISOString().split("T")[0],end:new Date(a,u,0).toISOString().split("T")[0]};Re(()=>{v()}),Ae(()=>{w&&w.destroy()});async function v(){s(3,_=!0),s(4,D=null);try{const I=Le(Ke)?.id;if(!I)throw new Error("User not authenticated");const[A,q,S]=await Promise.all([fe.financial.getExpensesByDateRange(I,b.start,b.end,g,Pe),fe.financial.getIncomesByDateRange(I,b.start,b.end,g,Pe),fe.financial.getMonthlySummary(I,a,u)]);A.success&&q.success&&S.success?(s(0,c=A.data.content),s(1,f=q.data.content),s(8,k=Math.max(A.data.totalPages,q.data.totalPages)),s(2,o=S.data),T()):s(4,D="Failed to load financial data")}catch{s(4,D="Failed to load financial data")}finally{s(3,_=!1)}}function T(){w&&w.destroy();const I=document.getElementById("expensesChart");if(!I||!o)return;const A=c.reduce((q,S)=>(q[S.category]=(q[S.category]||0)+S.amount,q),{});w=new Ye(I,{type:"pie",data:{labels:Object.keys(A),datasets:[{data:Object.values(A),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Expenses by Category"}}}})}function y(I){s(7,g=I),v()}function O(){s(7,g=0),v()}function B(I){s(6,j=I),s(5,x=!0)}function z(){v()}function F(){b.start=this.value,s(11,b)}const Z=()=>B("expense"),P=()=>B("income"),i=(I,A)=>{const q=I[d],S=A[d];return V==="asc"?q>S?1:-1:q<S?1:-1},C=()=>y(g-1),R=()=>y(g+1);function M(I){x=I,s(5,x)}const W=async I=>{(await fe.financial.createExpense(I.detail)).success&&(s(5,x=!1),v())},se=async I=>{(await fe.financial.createIncome(I.detail)).success&&(s(5,x=!1),v())},le=()=>s(5,x=!1);return l.$$.update=()=>{l.$$.dirty[0]&3&&[...c,...f].sort((I,A)=>new Date(A.date)-new Date(I.date))},new Date(a,u-1).toLocaleString("default",{month:"long"}),[c,f,o,_,D,x,j,g,k,d,V,b,v,y,O,B,z,F,Z,P,i,C,R,M,W,se,le]}class _t extends Me{constructor(e){super(),Ne(this,e,ot,rt,Se,{},null,[-1,-1])}}export{_t as component};
