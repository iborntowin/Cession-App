import{c as El,w as ir,j as ur}from"../chunks/api.b4688d57.js";import{r as dr}from"../chunks/index.c6708bed.js";import{s as cr,a as w,f as i,l as D,F as Zt,J as fr,d as a,c as k,g as u,h as d,y as $t,m as j,G as el,j as r,i as ve,w as e,n as C,u as mr,o as pr,t as hr,N as se,z as ge,H as tr,k as Kt,K as be,O as Qt,Q as _r,x as br,L as Jl,I as wt}from"../chunks/scheduler.fb6ad399.js";import{S as gr,i as vr,b as lr,d as rr,m as sr,t as ut,c as or,a as dt,e as nr,g as ar,f as Rl}from"../chunks/index.19f0e15d.js";import{e as Xt}from"../chunks/each.eb6105d2.js";import{b as wr}from"../chunks/environment.60829b93.js";import"../chunks/paths.7a59b8f6.js";import{s as Qe,g as Yt}from"../chunks/navigation.68a3d764.js";import{c as Gl,a as Kl}from"../chunks/index.548ee1c0.js";import{S as kr}from"../chunks/Spinner.0b7c48ae.js";import{t as Nr}from"../chunks/index.92f608cc.js";import{M as Er}from"../chunks/Modal.fcf8bb1d.js";const yr=!1;async function Ir({params:l}){if(!l.id||l.id==="undefined")throw dr(307,"/clients");try{const s=await El.getById(l.id);if(!s.success)throw new Error(s.error||"Failed to load client");return{client:s.data}}catch(s){return{error:s.message}}}const Jr=Object.freeze(Object.defineProperty({__proto__:null,load:Ir,ssr:yr},Symbol.toStringTag,{value:"Module"}));function Ql(l,s,t){const n=l.slice();return n[31]=s[t],n}function Xl(l,s,t){const n=l.slice();return n[34]=s[t],n}function Vr(l){let s,t,n,f,c=l[13]("clients.edit.client_info")+"",p,z,L,g,V,v,A=l[13]("clients.edit.full_name")+"",W,J,h=l[13]("clients.edit.required_field")+"",S,U,T,oe,R,Q,B,M,G=l[13]("clients.edit.workplace")+"",ae,P,N,E,ee=l[13]("clients.edit.select_workplace")+"",Y,F,_,y,x=l[13]("clients.edit.job")+"",te,Xe,H,we,I=l[13]("clients.edit.select_job")+"",q,ie,me,Ye,ue,ne,de,We="CIN (8-digit Number) *",Ze,ke,K,Ve,$e,De,Ce,ct=l[2].cin.length+"",kt,tl,Nt,ll,et,ce,rl,Fe,ft=l[2].cin.length===8?"CIN valide":l[2].cin.length===0?"Veuillez entrer un numéro CIN":"Numéro CIN incomplet",Et,yt,sl,Ne,Le,yl="Worker Number (10-digit Number) *",ol,Te,le,It,nl,tt,Pe,mt=l[2].workerNumber.length+"",Vt,al,Dt,il,lt,fe,ul,Je,pt=l[2].workerNumber.length===10?"Numéro d'employé valide":l[2].workerNumber.length===0?"Veuillez entrer un numéro d'employé":"Numéro d'employé incomplet",jt,Ct,dl,Re,Ge,ht=l[13]("clients.edit.address")+"",Lt,cl,pe,Tt,fl,Oe,ze,_t=l[13]("clients.edit.cancel")+"",Pt,ml,Ee,he,_e,pl,Be,Ae,rt,bt=l[13]("clients.edit.danger_zone")+"",Ot,hl,st,gt=l[13]("clients.edit.danger_zone_subtitle")+"",zt,_l,ot,ye,je,Me,bl,vt=l[13]("clients.edit.delete")+"",Bt,xe,b,gl,Il,re=l[9]&&Yl(l),nt=Xt(l[6]),Z=[];for(let o=0;o<nt.length;o+=1)Z[o]=Zl(Xl(l,nt,o));let at=Xt(l[0]),$=[];for(let o=0;o<at.length;o+=1)$[o]=$l(Ql(l,at,o));const Vl=[Cr,jr],He=[];function Dl(o,m){return o[5]?0:1}return he=Dl(l),_e=He[he]=Vl[he](l),{c(){s=i("div"),t=i("div"),n=i("div"),f=i("h3"),p=D(c),z=w(),L=i("form"),g=i("div"),V=i("div"),v=i("label"),W=D(A),J=w(),S=D(h),U=w(),T=i("input"),R=w(),re&&re.c(),Q=w(),B=i("div"),M=i("label"),ae=D(G),P=w(),N=i("select"),E=i("option"),Y=D(ee);for(let o=0;o<Z.length;o+=1)Z[o].c();F=w(),_=i("div"),y=i("label"),te=D(x),Xe=w(),H=i("select"),we=i("option"),q=D(I);for(let o=0;o<$.length;o+=1)$[o].c();Ye=w(),ue=i("div"),ne=i("div"),de=i("label"),de.textContent=We,Ze=w(),ke=i("div"),K=i("input"),$e=w(),De=i("div"),Ce=i("span"),kt=D(ct),tl=D("/8"),ll=w(),et=i("div"),ce=i("div"),rl=w(),Fe=i("p"),Et=D(ft),sl=w(),Ne=i("div"),Le=i("label"),Le.textContent=yl,ol=w(),Te=i("div"),le=i("input"),nl=w(),tt=i("div"),Pe=i("span"),Vt=D(mt),al=D("/10"),il=w(),lt=i("div"),fe=i("div"),ul=w(),Je=i("p"),jt=D(pt),dl=w(),Re=i("div"),Ge=i("label"),Lt=D(ht),cl=w(),pe=i("input"),fl=w(),Oe=i("div"),ze=i("button"),Pt=D(_t),ml=w(),Ee=i("button"),_e.c(),pl=w(),Be=i("div"),Ae=i("div"),rt=i("h3"),Ot=D(bt),hl=w(),st=i("p"),zt=D(gt),_l=w(),ot=i("div"),ye=i("button"),je=Zt("svg"),Me=Zt("path"),bl=w(),Bt=D(vt),this.h()},l(o){s=u(o,"DIV",{class:!0});var m=d(s);t=u(m,"DIV",{class:!0});var X=d(t);n=u(X,"DIV",{class:!0});var O=d(n);f=u(O,"H3",{class:!0});var Se=d(f);p=j(Se,c),Se.forEach(a),O.forEach(a),z=k(X),L=u(X,"FORM",{class:!0});var At=d(L);g=u(At,"DIV",{class:!0});var Ie=d(g);V=u(Ie,"DIV",{});var it=d(V);v=u(it,"LABEL",{for:!0,class:!0});var Mt=d(v);W=j(Mt,A),J=k(Mt),S=j(Mt,h),Mt.forEach(a),U=k(it),T=u(it,"INPUT",{type:!0,id:!0,class:!0}),R=k(it),re&&re.l(it),it.forEach(a),Q=k(Ie),B=u(Ie,"DIV",{});var xt=d(B);M=u(xt,"LABEL",{for:!0,class:!0});var jl=d(M);ae=j(jl,G),jl.forEach(a),P=k(xt),N=u(xt,"SELECT",{id:!0,class:!0});var vl=d(N);E=u(vl,"OPTION",{});var Cl=d(E);Y=j(Cl,ee),Cl.forEach(a);for(let Ke=0;Ke<Z.length;Ke+=1)Z[Ke].l(vl);vl.forEach(a),xt.forEach(a),F=k(Ie),_=u(Ie,"DIV",{});var Ht=d(_);y=u(Ht,"LABEL",{for:!0,class:!0});var Ll=d(y);te=j(Ll,x),Ll.forEach(a),Xe=k(Ht),H=u(Ht,"SELECT",{id:!0,class:!0});var wl=d(H);we=u(wl,"OPTION",{});var Tl=d(we);q=j(Tl,I),Tl.forEach(a);for(let Ke=0;Ke<$.length;Ke+=1)$[Ke].l(wl);wl.forEach(a),Ht.forEach(a),Ye=k(Ie),ue=u(Ie,"DIV",{class:!0});var St=d(ue);ne=u(St,"DIV",{});var Ue=d(ne);de=u(Ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),$t(de)!=="svelte-1hj1h3q"&&(de.textContent=We),Ze=k(Ue),ke=u(Ue,"DIV",{class:!0});var Ut=d(ke);K=u(Ut,"INPUT",{type:!0,id:!0,pattern:!0,inputmode:!0,maxlength:!0,class:!0,placeholder:!0}),$e=k(Ut),De=u(Ut,"DIV",{class:!0});var Pl=d(De);Ce=u(Pl,"SPAN",{class:!0});var kl=d(Ce);kt=j(kl,ct),tl=j(kl,"/8"),kl.forEach(a),Pl.forEach(a),Ut.forEach(a),ll=k(Ue),et=u(Ue,"DIV",{class:!0});var Ol=d(et);ce=u(Ol,"DIV",{class:!0,style:!0}),d(ce).forEach(a),Ol.forEach(a),rl=k(Ue),Fe=u(Ue,"P",{class:!0});var zl=d(Fe);Et=j(zl,ft),zl.forEach(a),Ue.forEach(a),sl=k(St),Ne=u(St,"DIV",{});var qe=d(Ne);Le=u(qe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),$t(Le)!=="svelte-19zfl8r"&&(Le.textContent=yl),ol=k(qe),Te=u(qe,"DIV",{class:!0});var qt=d(Te);le=u(qt,"INPUT",{type:!0,id:!0,pattern:!0,inputmode:!0,maxlength:!0,class:!0,placeholder:!0}),nl=k(qt),tt=u(qt,"DIV",{class:!0});var Bl=d(tt);Pe=u(Bl,"SPAN",{class:!0});var Nl=d(Pe);Vt=j(Nl,mt),al=j(Nl,"/10"),Nl.forEach(a),Bl.forEach(a),qt.forEach(a),il=k(qe),lt=u(qe,"DIV",{class:!0});var Al=d(lt);fe=u(Al,"DIV",{class:!0,style:!0}),d(fe).forEach(a),Al.forEach(a),ul=k(qe),Je=u(qe,"P",{class:!0});var Ml=d(Je);jt=j(Ml,pt),Ml.forEach(a),qe.forEach(a),St.forEach(a),dl=k(Ie),Re=u(Ie,"DIV",{});var Wt=d(Re);Ge=u(Wt,"LABEL",{for:!0,class:!0});var xl=d(Ge);Lt=j(xl,ht),xl.forEach(a),cl=k(Wt),pe=u(Wt,"INPUT",{type:!0,id:!0,class:!0}),Wt.forEach(a),Ie.forEach(a),fl=k(At),Oe=u(At,"DIV",{class:!0});var Ft=d(Oe);ze=u(Ft,"BUTTON",{type:!0,class:!0});var Hl=d(ze);Pt=j(Hl,_t),Hl.forEach(a),ml=k(Ft),Ee=u(Ft,"BUTTON",{type:!0,class:!0});var Sl=d(Ee);_e.l(Sl),Sl.forEach(a),Ft.forEach(a),At.forEach(a),X.forEach(a),pl=k(m),Be=u(m,"DIV",{class:!0});var Jt=d(Be);Ae=u(Jt,"DIV",{class:!0});var Rt=d(Ae);rt=u(Rt,"H3",{class:!0});var Ul=d(rt);Ot=j(Ul,bt),Ul.forEach(a),hl=k(Rt),st=u(Rt,"P",{class:!0});var ql=d(st);zt=j(ql,gt),ql.forEach(a),Rt.forEach(a),_l=k(Jt),ot=u(Jt,"DIV",{class:!0});var Wl=d(ot);ye=u(Wl,"BUTTON",{type:!0,class:!0});var Gt=d(ye);je=el(Gt,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var Fl=d(je);Me=el(Fl,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(Me).forEach(a),Fl.forEach(a),bl=k(Gt),Bt=j(Gt,vt),Gt.forEach(a),Wl.forEach(a),Jt.forEach(a),m.forEach(a),this.h()},h(){r(f,"class","text-lg font-medium bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent"),r(n,"class","p-6 border-b border-gray-200"),r(v,"for","fullName"),r(v,"class","block text-sm font-medium text-gray-700"),r(T,"type","text"),r(T,"id","fullName"),r(T,"class",oe="mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm "+(l[9]?"border-red-500 ring-red-500":"")),T.required=!0,r(M,"for","workplace"),r(M,"class","block text-sm font-medium text-gray-700"),E.__value="",se(E,E.__value),r(N,"id","workplace"),r(N,"class","mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm rounded-md"),r(y,"for","job"),r(y,"class","block text-sm font-medium text-gray-700"),we.__value="",se(we,we.__value),r(H,"id","job"),H.disabled=me=!l[1],r(H,"class","mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:text-gray-500"),r(de,"for","cin"),r(de,"class","block text-sm font-medium text-gray-700"),r(K,"type","text"),r(K,"id","cin"),K.required=!0,r(K,"pattern","\\d*"),r(K,"inputmode","numeric"),r(K,"maxlength","8"),r(K,"class",Ve="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm "+(l[7]?"border-red-500 ring-red-500":"")),r(K,"placeholder","Enter 8-digit CIN"),r(Ce,"class",Nt=`text-sm font-medium ${l[2].cin.length===8?"text-green-600":l[2].cin.length===0?"text-gray-500":"text-yellow-600"}`),r(De,"class","absolute right-3 top-1/2 -translate-y-1/2"),r(ke,"class","mt-1 relative"),r(ce,"class","absolute left-0 top-0 h-full transition-all duration-300 ease-out"),Kt(ce,"width",l[2].cin.length/8*100+"%"),be(ce,"bg-green-500",l[2].cin.length===8),be(ce,"bg-yellow-500",l[2].cin.length>0&&l[2].cin.length<8),be(ce,"bg-gray-400",l[2].cin.length===0),r(et,"class","mt-2 h-2 w-full rounded-full bg-gray-200 relative overflow-hidden"),r(Fe,"class",yt=`mt-1 text-sm ${l[2].cin.length===8?"text-green-600":l[2].cin.length===0?"text-gray-500":"text-yellow-600"}`),r(Le,"for","workerNumber"),r(Le,"class","block text-sm font-medium text-gray-700"),r(le,"type","text"),r(le,"id","workerNumber"),le.required=!0,r(le,"pattern","\\d*"),r(le,"inputmode","numeric"),r(le,"maxlength","10"),r(le,"class",It="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm "+(l[8]?"border-red-500 ring-red-500":"")),r(le,"placeholder","Enter 10-digit worker number"),r(Pe,"class",Dt=`text-sm font-medium ${l[2].workerNumber.length===10?"text-green-600":l[2].workerNumber.length===0?"text-gray-500":"text-yellow-600"}`),r(tt,"class","absolute right-3 top-1/2 -translate-y-1/2"),r(Te,"class","mt-1 relative"),r(fe,"class","absolute left-0 top-0 h-full transition-all duration-300 ease-out"),Kt(fe,"width",l[2].workerNumber.length/10*100+"%"),be(fe,"bg-green-500",l[2].workerNumber.length===10),be(fe,"bg-yellow-500",l[2].workerNumber.length>0&&l[2].workerNumber.length<10),be(fe,"bg-gray-400",l[2].workerNumber.length===0),r(lt,"class","mt-2 h-2 w-full rounded-full bg-gray-200 relative overflow-hidden"),r(Je,"class",Ct=`mt-1 text-sm ${l[2].workerNumber.length===10?"text-green-600":l[2].workerNumber.length===0?"text-gray-500":"text-yellow-600"}`),r(ue,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),r(Ge,"for","address"),r(Ge,"class","block text-sm font-medium text-gray-700"),r(pe,"type","text"),r(pe,"id","address"),r(pe,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm"),pe.readOnly=Tt=l[1]!==null,r(g,"class","space-y-4"),r(ze,"type","button"),r(ze,"class","flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 transition-all duration-200 font-medium text-sm shadow-sm"),r(Ee,"type","submit"),r(Ee,"class","flex items-center px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl font-medium text-sm"),Ee.disabled=l[5],r(Oe,"class","flex justify-end space-x-3 pt-6 border-t border-gray-200"),r(L,"class","p-6 space-y-6"),r(t,"class","bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden"),r(rt,"class","text-lg font-medium text-red-700"),r(st,"class","text-sm text-gray-500 mt-1"),r(Ae,"class","p-6 border-b border-red-200/50"),r(Me,"stroke-linecap","round"),r(Me,"stroke-linejoin","round"),r(Me,"stroke-width","2"),r(Me,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),r(je,"class","w-4 h-4 mr-2"),r(je,"fill","none"),r(je,"stroke","currentColor"),r(je,"viewBox","0 0 24 24"),r(ye,"type","button"),r(ye,"class","flex items-center px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all duration-200 shadow-lg hover:shadow-xl font-medium text-sm"),r(ot,"class","p-6"),r(Be,"class","mt-8 bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-red-200/50 overflow-hidden"),r(s,"class","max-w-2xl mx-auto")},m(o,m){ve(o,s,m),e(s,t),e(t,n),e(n,f),e(f,p),e(t,z),e(t,L),e(L,g),e(g,V),e(V,v),e(v,W),e(v,J),e(v,S),e(V,U),e(V,T),se(T,l[2].fullName),e(V,R),re&&re.m(V,null),e(g,Q),e(g,B),e(B,M),e(M,ae),e(B,P),e(B,N),e(N,E),e(E,Y);for(let X=0;X<Z.length;X+=1)Z[X]&&Z[X].m(N,null);Qt(N,l[1]),e(g,F),e(g,_),e(_,y),e(y,te),e(_,Xe),e(_,H),e(H,we),e(we,q);for(let X=0;X<$.length;X+=1)$[X]&&$[X].m(H,null);Qt(H,l[2].jobId),e(g,Ye),e(g,ue),e(ue,ne),e(ne,de),e(ne,Ze),e(ne,ke),e(ke,K),se(K,l[2].cin),e(ke,$e),e(ke,De),e(De,Ce),e(Ce,kt),e(Ce,tl),e(ne,ll),e(ne,et),e(et,ce),e(ne,rl),e(ne,Fe),e(Fe,Et),e(ue,sl),e(ue,Ne),e(Ne,Le),e(Ne,ol),e(Ne,Te),e(Te,le),se(le,l[2].workerNumber),e(Te,nl),e(Te,tt),e(tt,Pe),e(Pe,Vt),e(Pe,al),e(Ne,il),e(Ne,lt),e(lt,fe),e(Ne,ul),e(Ne,Je),e(Je,jt),e(g,dl),e(g,Re),e(Re,Ge),e(Ge,Lt),e(Re,cl),e(Re,pe),se(pe,l[2].address),e(L,fl),e(L,Oe),e(Oe,ze),e(ze,Pt),e(Oe,ml),e(Oe,Ee),He[he].m(Ee,null),e(s,pl),e(s,Be),e(Be,Ae),e(Ae,rt),e(rt,Ot),e(Ae,hl),e(Ae,st),e(st,zt),e(Be,_l),e(Be,ot),e(ot,ye),e(ye,je),e(je,Me),e(ye,bl),e(ye,Bt),b=!0,gl||(Il=[ge(T,"input",l[20]),ge(N,"change",l[14]),ge(H,"change",l[15]),ge(K,"input",l[21]),ge(le,"input",l[22]),ge(pe,"input",l[23]),ge(ze,"click",l[24]),ge(L,"submit",_r(l[16])),ge(ye,"click",l[25])],gl=!0)},p(o,m){if((!b||m[0]&8192)&&c!==(c=o[13]("clients.edit.client_info")+"")&&C(p,c),(!b||m[0]&8192)&&A!==(A=o[13]("clients.edit.full_name")+"")&&C(W,A),(!b||m[0]&8192)&&h!==(h=o[13]("clients.edit.required_field")+"")&&C(S,h),(!b||m[0]&512&&oe!==(oe="mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm "+(o[9]?"border-red-500 ring-red-500":"")))&&r(T,"class",oe),m[0]&5&&T.value!==o[2].fullName&&se(T,o[2].fullName),o[9]?re?re.p(o,m):(re=Yl(o),re.c(),re.m(V,null)):re&&(re.d(1),re=null),(!b||m[0]&8192)&&G!==(G=o[13]("clients.edit.workplace")+"")&&C(ae,G),(!b||m[0]&8192)&&ee!==(ee=o[13]("clients.edit.select_workplace")+"")&&C(Y,ee),m[0]&64){nt=Xt(o[6]);let O;for(O=0;O<nt.length;O+=1){const Se=Xl(o,nt,O);Z[O]?Z[O].p(Se,m):(Z[O]=Zl(Se),Z[O].c(),Z[O].m(N,null))}for(;O<Z.length;O+=1)Z[O].d(1);Z.length=nt.length}if((!b||m[0]&66)&&Qt(N,o[1]),(!b||m[0]&8192)&&x!==(x=o[13]("clients.edit.job")+"")&&C(te,x),(!b||m[0]&8192)&&I!==(I=o[13]("clients.edit.select_job")+"")&&C(q,I),m[0]&1){at=Xt(o[0]);let O;for(O=0;O<at.length;O+=1){const Se=Ql(o,at,O);$[O]?$[O].p(Se,m):($[O]=$l(Se),$[O].c(),$[O].m(H,null))}for(;O<$.length;O+=1)$[O].d(1);$.length=at.length}(!b||m[0]&5&&ie!==(ie=o[2].jobId))&&Qt(H,o[2].jobId),(!b||m[0]&66&&me!==(me=!o[1]))&&(H.disabled=me),(!b||m[0]&128&&Ve!==(Ve="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm "+(o[7]?"border-red-500 ring-red-500":"")))&&r(K,"class",Ve),m[0]&5&&K.value!==o[2].cin&&se(K,o[2].cin),(!b||m[0]&4)&&ct!==(ct=o[2].cin.length+"")&&C(kt,ct),(!b||m[0]&5&&Nt!==(Nt=`text-sm font-medium ${o[2].cin.length===8?"text-green-600":o[2].cin.length===0?"text-gray-500":"text-yellow-600"}`))&&r(Ce,"class",Nt),(!b||m[0]&4)&&Kt(ce,"width",o[2].cin.length/8*100+"%"),(!b||m[0]&4)&&be(ce,"bg-green-500",o[2].cin.length===8),(!b||m[0]&4)&&be(ce,"bg-yellow-500",o[2].cin.length>0&&o[2].cin.length<8),(!b||m[0]&4)&&be(ce,"bg-gray-400",o[2].cin.length===0),(!b||m[0]&4)&&ft!==(ft=o[2].cin.length===8?"CIN valide":o[2].cin.length===0?"Veuillez entrer un numéro CIN":"Numéro CIN incomplet")&&C(Et,ft),(!b||m[0]&5&&yt!==(yt=`mt-1 text-sm ${o[2].cin.length===8?"text-green-600":o[2].cin.length===0?"text-gray-500":"text-yellow-600"}`))&&r(Fe,"class",yt),(!b||m[0]&256&&It!==(It="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm "+(o[8]?"border-red-500 ring-red-500":"")))&&r(le,"class",It),m[0]&5&&le.value!==o[2].workerNumber&&se(le,o[2].workerNumber),(!b||m[0]&4)&&mt!==(mt=o[2].workerNumber.length+"")&&C(Vt,mt),(!b||m[0]&5&&Dt!==(Dt=`text-sm font-medium ${o[2].workerNumber.length===10?"text-green-600":o[2].workerNumber.length===0?"text-gray-500":"text-yellow-600"}`))&&r(Pe,"class",Dt),(!b||m[0]&4)&&Kt(fe,"width",o[2].workerNumber.length/10*100+"%"),(!b||m[0]&4)&&be(fe,"bg-green-500",o[2].workerNumber.length===10),(!b||m[0]&4)&&be(fe,"bg-yellow-500",o[2].workerNumber.length>0&&o[2].workerNumber.length<10),(!b||m[0]&4)&&be(fe,"bg-gray-400",o[2].workerNumber.length===0),(!b||m[0]&4)&&pt!==(pt=o[2].workerNumber.length===10?"Numéro d'employé valide":o[2].workerNumber.length===0?"Veuillez entrer un numéro d'employé":"Numéro d'employé incomplet")&&C(jt,pt),(!b||m[0]&5&&Ct!==(Ct=`mt-1 text-sm ${o[2].workerNumber.length===10?"text-green-600":o[2].workerNumber.length===0?"text-gray-500":"text-yellow-600"}`))&&r(Je,"class",Ct),(!b||m[0]&8192)&&ht!==(ht=o[13]("clients.edit.address")+"")&&C(Lt,ht),(!b||m[0]&66&&Tt!==(Tt=o[1]!==null))&&(pe.readOnly=Tt),m[0]&5&&pe.value!==o[2].address&&se(pe,o[2].address),(!b||m[0]&8192)&&_t!==(_t=o[13]("clients.edit.cancel")+"")&&C(Pt,_t);let X=he;he=Dl(o),he===X?He[he].p(o,m):(ar(),ut(He[X],1,1,()=>{He[X]=null}),or(),_e=He[he],_e?_e.p(o,m):(_e=He[he]=Vl[he](o),_e.c()),dt(_e,1),_e.m(Ee,null)),(!b||m[0]&32)&&(Ee.disabled=o[5]),(!b||m[0]&8192)&&bt!==(bt=o[13]("clients.edit.danger_zone")+"")&&C(Ot,bt),(!b||m[0]&8192)&&gt!==(gt=o[13]("clients.edit.danger_zone_subtitle")+"")&&C(zt,gt),(!b||m[0]&8192)&&vt!==(vt=o[13]("clients.edit.delete")+"")&&C(Bt,vt)},i(o){b||(dt(_e),o&&br(()=>{b&&(xe||(xe=Rl(s,Kl,{y:20,duration:300,easing:Gl},!0)),xe.run(1))}),b=!0)},o(o){ut(_e),o&&(xe||(xe=Rl(s,Kl,{y:20,duration:300,easing:Gl},!1)),xe.run(0)),b=!1},d(o){o&&a(s),re&&re.d(),Jl(Z,o),Jl($,o),He[he].d(),o&&xe&&xe.end(),gl=!1,tr(Il)}}}function Dr(l){let s,t='<div class="relative"><div class="w-16 h-16 border-4 border-purple-200 rounded-full animate-spin"></div> <div class="absolute top-0 left-0 w-16 h-16 border-4 border-purple-600 rounded-full animate-spin border-t-transparent"></div></div>';return{c(){s=i("div"),s.innerHTML=t,this.h()},l(n){s=u(n,"DIV",{class:!0,"data-svelte-h":!0}),$t(s)!=="svelte-1dwdxwy"&&(s.innerHTML=t),this.h()},h(){r(s,"class","flex justify-center py-12")},m(n,f){ve(n,s,f)},p:wt,i:wt,o:wt,d(n){n&&a(s)}}}function Yl(l){let s,t;return{c(){s=i("p"),t=D(l[9]),this.h()},l(n){s=u(n,"P",{class:!0});var f=d(s);t=j(f,l[9]),f.forEach(a),this.h()},h(){r(s,"class","text-xs text-red-600 mt-1")},m(n,f){ve(n,s,f),e(s,t)},p(n,f){f[0]&512&&C(t,n[9])},d(n){n&&a(s)}}}function Zl(l){let s,t=l[34].name+"",n,f;return{c(){s=i("option"),n=D(t),this.h()},l(c){s=u(c,"OPTION",{});var p=d(s);n=j(p,t),p.forEach(a),this.h()},h(){s.__value=f=l[34].id,se(s,s.__value)},m(c,p){ve(c,s,p),e(s,n)},p(c,p){p[0]&64&&t!==(t=c[34].name+"")&&C(n,t),p[0]&64&&f!==(f=c[34].id)&&(s.__value=f,se(s,s.__value))},d(c){c&&a(s)}}}function $l(l){let s,t=l[31].name+"",n,f;return{c(){s=i("option"),n=D(t),this.h()},l(c){s=u(c,"OPTION",{});var p=d(s);n=j(p,t),p.forEach(a),this.h()},h(){s.__value=f=l[31].id,se(s,s.__value)},m(c,p){ve(c,s,p),e(s,n)},p(c,p){p[0]&1&&t!==(t=c[31].name+"")&&C(n,t),p[0]&1&&f!==(f=c[31].id)&&(s.__value=f,se(s,s.__value))},d(c){c&&a(s)}}}function jr(l){let s=l[13]("clients.edit.save_changes")+"",t;return{c(){t=D(s)},l(n){t=j(n,s)},m(n,f){ve(n,t,f)},p(n,f){f[0]&8192&&s!==(s=n[13]("clients.edit.save_changes")+"")&&C(t,s)},i:wt,o:wt,d(n){n&&a(t)}}}function Cr(l){let s,t,n=l[13]("clients.edit.saving")+"",f,c;return s=new kr({props:{isLoading:!0,size:"sm",className:"mr-2"}}),{c(){lr(s.$$.fragment),t=w(),f=D(n)},l(p){rr(s.$$.fragment,p),t=k(p),f=j(p,n)},m(p,z){sr(s,p,z),ve(p,t,z),ve(p,f,z),c=!0},p(p,z){(!c||z[0]&8192)&&n!==(n=p[13]("clients.edit.saving")+"")&&C(f,n)},i(p){c||(dt(s.$$.fragment,p),c=!0)},o(p){ut(s.$$.fragment,p),c=!1},d(p){p&&(a(t),a(f)),nr(s,p)}}}function er(l){let s,t;return{c(){s=i("p"),t=D(l[12]),this.h()},l(n){s=u(n,"P",{class:!0});var f=d(s);t=j(f,l[12]),f.forEach(a),this.h()},h(){r(s,"class","text-xs text-red-600 mb-2")},m(n,f){ve(n,s,f),e(s,t)},p(n,f){f[0]&4096&&C(t,n[12])},d(n){n&&a(s)}}}function Lr(l){let s,t,n,f=`Cette action supprimera définitivement le client ${l[3].fullName} et toutes ses cessions associées. Cette action est irréversible.`,c,p,z,L=l[13]("clients.edit.delete_confirm_instruction")+"",g,V,v,A,W,J,h,S,U=l[13]("clients.edit.delete_cancel_button")+"",T,oe,R,Q=l[13]("clients.edit.delete_confirm_button")+"",B,M,G,ae,P=l[12]&&er(l);return{c(){s=i("div"),t=i("div"),n=i("p"),c=D(f),p=w(),z=i("p"),g=D(L),V=w(),v=i("input"),W=w(),P&&P.c(),J=w(),h=i("div"),S=i("button"),T=D(U),oe=w(),R=i("button"),B=D(Q),this.h()},l(N){s=u(N,"DIV",{class:!0});var E=d(s);t=u(E,"DIV",{class:!0});var ee=d(t);n=u(ee,"P",{class:!0});var Y=d(n);c=j(Y,f),Y.forEach(a),p=k(ee),z=u(ee,"P",{class:!0});var F=d(z);g=j(F,L),F.forEach(a),ee.forEach(a),V=k(E),v=u(E,"INPUT",{type:!0,class:!0,placeholder:!0}),W=k(E),P&&P.l(E),J=k(E),h=u(E,"DIV",{class:!0});var _=d(h);S=u(_,"BUTTON",{type:!0,class:!0});var y=d(S);T=j(y,U),y.forEach(a),oe=k(_),R=u(_,"BUTTON",{type:!0,class:!0});var x=d(R);B=j(x,Q),x.forEach(a),_.forEach(a),E.forEach(a),this.h()},h(){r(n,"class","text-sm text-red-700 font-semibold mb-1"),r(z,"class","text-sm text-gray-700"),r(t,"class","mb-2 p-3 rounded bg-red-50 border border-red-200"),r(v,"type","text"),r(v,"class","block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm mb-2 text-black placeholder-gray-400"),r(v,"placeholder",A=l[3].fullName),r(S,"type","button"),r(S,"class","px-4 py-2 rounded-md text-sm font-medium bg-gray-200 hover:bg-gray-300 text-gray-700"),r(R,"type","button"),r(R,"class","px-4 py-2 rounded-md text-sm font-medium bg-red-600 hover:bg-red-700 text-white disabled:opacity-50"),R.disabled=M=l[11].trim()!==l[3].fullName,r(h,"class","flex justify-end space-x-2 mt-4"),r(s,"class","p-2")},m(N,E){ve(N,s,E),e(s,t),e(t,n),e(n,c),e(t,p),e(t,z),e(z,g),e(s,V),e(s,v),se(v,l[11]),e(s,W),P&&P.m(s,null),e(s,J),e(s,h),e(h,S),e(S,T),e(h,oe),e(h,R),e(R,B),G||(ae=[ge(v,"input",l[26]),ge(S,"click",l[27]),ge(R,"click",l[17])],G=!0)},p(N,E){E[0]&8&&f!==(f=`Cette action supprimera définitivement le client ${N[3].fullName} et toutes ses cessions associées. Cette action est irréversible.`)&&C(c,f),E[0]&8192&&L!==(L=N[13]("clients.edit.delete_confirm_instruction")+"")&&C(g,L),E[0]&8&&A!==(A=N[3].fullName)&&r(v,"placeholder",A),E[0]&2048&&v.value!==N[11]&&se(v,N[11]),N[12]?P?P.p(N,E):(P=er(N),P.c(),P.m(s,J)):P&&(P.d(1),P=null),E[0]&8192&&U!==(U=N[13]("clients.edit.delete_cancel_button")+"")&&C(T,U),E[0]&8192&&Q!==(Q=N[13]("clients.edit.delete_confirm_button")+"")&&C(B,Q),E[0]&2056&&M!==(M=N[11].trim()!==N[3].fullName)&&(R.disabled=M)},d(N){N&&a(s),P&&P.d(),G=!1,tr(ae)}}}function Tr(l){let s,t,n,f,c,p,z,L,g,V='<svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>',v,A,W,J=l[13]("clients.edit.title")+"",h,S,U,T=l[13]("clients.edit.subtitle")+"",oe,R,Q,B,M,G,ae,P=l[13]("clients.edit.back_to_client")+"",N,E,ee,Y,F,_,y,x,te;document.title=s=l[13]("clients.edit.title")+" | "+l[13]("common.app_name");const Xe=[Dr,Vr],H=[];function we(I,q){return I[4]?0:1}return F=we(l),_=H[F]=Xe[F](l),x=new Er({props:{show:l[10],variant:"danger",title:l[13]("clients.edit.delete_confirm_title"),$$slots:{default:[Lr]},$$scope:{ctx:l}}}),x.$on("close",l[28]),{c(){t=w(),n=i("div"),f=i("div"),c=i("div"),p=i("div"),z=i("div"),L=i("div"),g=i("div"),g.innerHTML=V,v=w(),A=i("div"),W=i("h1"),h=D(J),S=w(),U=i("p"),oe=D(T),R=w(),Q=i("div"),B=i("a"),M=Zt("svg"),G=Zt("path"),ae=w(),N=D(P),ee=w(),Y=i("div"),_.c(),y=w(),lr(x.$$.fragment),this.h()},l(I){fr("svelte-ax25g1",document.head).forEach(a),t=k(I),n=u(I,"DIV",{class:!0});var ie=d(n);f=u(ie,"DIV",{class:!0});var me=d(f);c=u(me,"DIV",{class:!0});var Ye=d(c);p=u(Ye,"DIV",{class:!0});var ue=d(p);z=u(ue,"DIV",{class:!0});var ne=d(z);L=u(ne,"DIV",{class:!0});var de=d(L);g=u(de,"DIV",{class:!0,"data-svelte-h":!0}),$t(g)!=="svelte-1mzt7qn"&&(g.innerHTML=V),v=k(de),A=u(de,"DIV",{});var We=d(A);W=u(We,"H1",{class:!0});var Ze=d(W);h=j(Ze,J),Ze.forEach(a),S=k(We),U=u(We,"P",{class:!0});var ke=d(U);oe=j(ke,T),ke.forEach(a),We.forEach(a),de.forEach(a),ne.forEach(a),R=k(ue),Q=u(ue,"DIV",{class:!0});var K=d(Q);B=u(K,"A",{href:!0,class:!0});var Ve=d(B);M=el(Ve,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var $e=d(M);G=el($e,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),d(G).forEach(a),$e.forEach(a),ae=k(Ve),N=j(Ve,P),Ve.forEach(a),K.forEach(a),ue.forEach(a),Ye.forEach(a),me.forEach(a),ee=k(ie),Y=u(ie,"DIV",{class:!0});var De=d(Y);_.l(De),De.forEach(a),y=k(ie),rr(x.$$.fragment,ie),ie.forEach(a),this.h()},h(){r(g,"class","w-12 h-12 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg"),r(W,"class","text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent"),r(U,"class","text-sm text-gray-500 font-medium"),r(L,"class","flex items-center space-x-3"),r(z,"class","flex items-center space-x-4"),r(G,"fill-rule","evenodd"),r(G,"d","M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"),r(G,"clip-rule","evenodd"),r(M,"xmlns","http://www.w3.org/2000/svg"),r(M,"class","h-5 w-5 mr-2"),r(M,"viewBox","0 0 20 20"),r(M,"fill","currentColor"),r(B,"href",E=`/clients/${l[3]?.id}`),r(B,"class","flex items-center px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-200 font-medium text-sm shadow-sm hover:shadow-md"),r(Q,"class","flex items-center space-x-3"),r(p,"class","flex items-center justify-between"),r(c,"class","max-w-7xl mx-auto px-6 py-4"),r(f,"class","sticky top-0 z-40 backdrop-blur-xl bg-white/80 border-b border-white/20 shadow-lg shadow-black/5"),r(Y,"class","max-w-7xl mx-auto px-6 py-8"),r(n,"class","min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50")},m(I,q){ve(I,t,q),ve(I,n,q),e(n,f),e(f,c),e(c,p),e(p,z),e(z,L),e(L,g),e(L,v),e(L,A),e(A,W),e(W,h),e(A,S),e(A,U),e(U,oe),e(p,R),e(p,Q),e(Q,B),e(B,M),e(M,G),e(B,ae),e(B,N),e(n,ee),e(n,Y),H[F].m(Y,null),e(n,y),sr(x,n,null),te=!0},p(I,q){(!te||q[0]&8192)&&s!==(s=I[13]("clients.edit.title")+" | "+I[13]("common.app_name"))&&(document.title=s),(!te||q[0]&8192)&&J!==(J=I[13]("clients.edit.title")+"")&&C(h,J),(!te||q[0]&8192)&&T!==(T=I[13]("clients.edit.subtitle")+"")&&C(oe,T),(!te||q[0]&8192)&&P!==(P=I[13]("clients.edit.back_to_client")+"")&&C(N,P),(!te||q[0]&8&&E!==(E=`/clients/${I[3]?.id}`))&&r(B,"href",E);let ie=F;F=we(I),F===ie?H[F].p(I,q):(ar(),ut(H[ie],1,1,()=>{H[ie]=null}),or(),_=H[F],_?_.p(I,q):(_=H[F]=Xe[F](I),_.c()),dt(_,1),_.m(Y,null));const me={};q[0]&1024&&(me.show=I[10]),q[0]&8192&&(me.title=I[13]("clients.edit.delete_confirm_title")),q[0]&15368|q[1]&64&&(me.$$scope={dirty:q,ctx:I}),x.$set(me)},i(I){te||(dt(_),dt(x.$$.fragment,I),te=!0)},o(I){ut(_),ut(x.$$.fragment,I),te=!1},d(I){I&&(a(t),a(n)),H[F].d(),nr(x)}}}function Pr(l,s,t){let n;mr(l,Nr,_=>t(13,n=_));let{data:f}=s,c=null,p=!0,z=!1,L=[],g=[],V=[],v=null,A="",W="",J="",h={fullName:"",cin:"",job:"",phoneNumber:"",workplace:"",address:"",jobId:null,workplaceId:null,workerNumber:""},S=!1,U="",T="";pr(async()=>{if(!f.client){Qe(n("clients.edit.not_found"),"error"),Yt("/clients");return}try{const[_,y]=await Promise.all([ir.getAll(),ur.getAll()]);t(6,L=_),t(19,g=y),t(3,c=f.client),t(2,h={fullName:c.fullName,cin:c.cin||"",job:c.job||"",phoneNumber:c.phoneNumber||"",workplace:c.workplace||"",address:c.address||"",jobId:c.jobId,workplaceId:c.workplaceId,workerNumber:c.workerNumber||""}),c.workplaceId&&(t(1,v=c.workplaceId),t(0,V=g.filter(x=>x.workplaceId===c.workplaceId))),t(4,p=!1),await hr()}catch{Qe(n("clients.edit.load_error"),"error"),t(4,p=!1)}});function oe(_){const y=_.target.value;if(t(1,v=y||null),t(2,h.workplaceId=y||null,h),y){const x=L.find(te=>te.id===y);x&&t(2,h.address=x.name,h)}}function R(_){const y=_.target.value;t(2,h.jobId=y||null,h)}async function Q(){if(t(9,J=""),t(7,A=""),t(8,W=""),h.fullName||t(9,J="Le nom complet est requis."),(!h.cin||h.cin.length!==8)&&t(7,A="Le numéro CIN doit comporter exactement 8 chiffres (ex: 01234567)."),(!h.workerNumber||h.workerNumber.length!==10)&&t(8,W="Le numéro d'employé doit comporter exactement 10 chiffres (ex: 0092423923)."),J||A||W){Qe("Veuillez corriger les erreurs du formulaire.","error");return}t(5,z=!0);try{await El.update(c.id,h),Qe(n("clients.edit.success"),"success");try{Yt(`/clients/${c.id}`)}catch{wr&&(window.location.href=`/clients/${c.id}`)}}catch(_){let y=_?.message||"";y&&y.toLowerCase().includes("cin")?t(7,A=y):y&&y.toLowerCase().includes("employ")?t(8,W=y):y&&y.toLowerCase().includes("nom")?t(9,J=y):Qe(y||n("clients.edit.error"),"error")}finally{t(5,z=!1)}}async function B(){if(t(12,T=""),U.trim()!==c.fullName){t(12,T="Le nom saisi ne correspond pas. Veuillez taper le nom complet du client pour confirmer.");return}try{await El.delete(c.id),Qe("Client et toutes ses cessions supprimés avec succès.","success"),Yt("/clients")}catch(_){Qe(_.message||"Erreur lors de la suppression du client.","error")}}function M(){h.fullName=this.value,t(2,h),t(1,v),t(19,g),t(0,V),t(0,V),t(1,v),t(19,g),t(2,h)}function G(){h.cin=this.value,t(2,h),t(1,v),t(19,g),t(0,V),t(0,V),t(1,v),t(19,g),t(2,h)}function ae(){h.workerNumber=this.value,t(2,h),t(1,v),t(19,g),t(0,V),t(0,V),t(1,v),t(19,g),t(2,h)}function P(){h.address=this.value,t(2,h),t(1,v),t(19,g),t(0,V),t(0,V),t(1,v),t(19,g),t(2,h)}const N=()=>Yt(`/clients/${c.id}`),E=()=>{t(10,S=!0),t(11,U=""),t(12,T="")};function ee(){U=this.value,t(11,U)}const Y=()=>t(10,S=!1),F=()=>t(10,S=!1);return l.$$set=_=>{"data"in _&&t(18,f=_.data)},l.$$.update=()=>{l.$$.dirty[0]&524295&&(v?(t(0,V=g.filter(_=>_.workplaceId===v)),h.jobId&&!V.some(_=>_.id===h.jobId)&&t(2,h.jobId=null,h)):(t(0,V=[]),t(2,h.jobId=null,h)))},[V,v,h,c,p,z,L,A,W,J,S,U,T,n,oe,R,Q,B,f,g,M,G,ae,P,N,E,ee,Y,F]}class Rr extends gr{constructor(s){super(),vr(this,s,Pr,Tr,cr,{data:18},null,[-1,-1])}}export{Rr as component,Jr as universal};
