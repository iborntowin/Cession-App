import{s as je,a as V,f as h,J as Te,d as g,c as D,g as b,h as T,y as z,j as u,i as P,w as c,z as O,K as Ce,u as Ie,o as Ne,A as H,l as Q,m as X,L as $,O as ce,Z as We,n as se,H as ee,F as he,G as be,I as Ae}from"../chunks/scheduler.55755e91.js";import{S as Je,i as Ve,b as De,d as Ue,m as Be,a as Oe,t as Me,e as Le}from"../chunks/index.d2ed93bc.js";import{e as le}from"../chunks/each.8720bd6f.js";import{s as B,l as L}from"../chunks/navigation.fbd60083.js";import{P as ze}from"../chunks/PageHeader.678a832a.js";import{w as re,j as ie}from"../chunks/api.20dd9789.js";function _e(l,s,e){const t=l.slice();return t[33]=s[e],t}function ge(l,s,e){const t=l.slice();return t[36]=s[e],t}function Fe(l){let s;return{c(){s=Q("Add Workplace")},l(e){s=X(e,"Add Workplace")},m(e,t){P(e,s,t)},d(e){e&&g(s)}}}function He(l){let s;return{c(){s=Q("Cancel")},l(e){s=X(e,"Cancel")},m(e,t){P(e,s,t)},d(e){e&&g(s)}}}function ve(l){let s,e,t,r,f="Workplace Name",d,a,_,o,n,A="Cancel",w,m,N=l[2]?"Update Workplace":"Add Workplace",J,U,x;return{c(){s=h("div"),e=h("form"),t=h("div"),r=h("label"),r.textContent=f,d=V(),a=h("input"),_=V(),o=h("div"),n=h("button"),n.textContent=A,w=V(),m=h("button"),J=Q(N),this.h()},l(p){s=b(p,"DIV",{class:!0});var v=T(s);e=b(v,"FORM",{class:!0});var y=T(e);t=b(y,"DIV",{});var W=T(t);r=b(W,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(r)!=="svelte-k3bb9o"&&(r.textContent=f),d=D(W),a=b(W,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),W.forEach(g),_=D(y),o=b(y,"DIV",{class:!0});var C=T(o);n=b(C,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1fwqxbr"&&(n.textContent=A),w=D(C),m=b(C,"BUTTON",{type:!0,class:!0});var k=T(m);J=X(k,N),k.forEach(g),C.forEach(g),y.forEach(g),v.forEach(g),this.h()},h(){u(r,"for","workplaceName"),u(r,"class","block text-sm font-medium text-gray-700"),u(a,"type","text"),u(a,"id","workplaceName"),u(a,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"),u(a,"placeholder","Enter workplace name"),a.required=!0,u(n,"type","button"),u(n,"class","inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),u(m,"type","submit"),u(m,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),u(o,"class","flex justify-end space-x-3"),u(e,"class","space-y-4"),u(s,"class","mt-4")},m(p,v){P(p,s,v),c(s,e),c(e,t),c(t,r),c(t,d),c(t,a),$(a,l[4]),c(e,_),c(e,o),c(o,n),c(o,w),c(o,m),c(m,J),U||(x=[O(a,"input",l[20]),O(n,"click",l[18]),O(e,"submit",ce(function(){We(l[2]?l[13]:l[12])&&(l[2]?l[13]:l[12]).apply(this,arguments)}))],U=!0)},p(p,v){l=p,v[0]&16&&a.value!==l[4]&&$(a,l[4]),v[0]&4&&N!==(N=l[2]?"Update Workplace":"Add Workplace")&&se(J,N)},d(p){p&&g(s),U=!1,ee(x)}}}function ye(l){let s,e,t,r=l[6]&&l[5]?.id===l[33].id&&ke(l),f=l[3]&&l[5]?.id===l[33].id&&we(l);function d(o,n){return o[33].jobs&&o[33].jobs.length>0?qe:Pe}let a=d(l),_=a(l);return{c(){s=h("div"),r&&r.c(),e=V(),f&&f.c(),t=V(),_.c(),this.h()},l(o){s=b(o,"DIV",{class:!0});var n=T(s);r&&r.l(n),e=D(n),f&&f.l(n),t=D(n),_.l(n),n.forEach(g),this.h()},h(){u(s,"class","px-4 py-3 bg-white")},m(o,n){P(o,s,n),r&&r.m(s,null),c(s,e),f&&f.m(s,null),c(s,t),_.m(s,null)},p(o,n){o[6]&&o[5]?.id===o[33].id?r?r.p(o,n):(r=ke(o),r.c(),r.m(s,e)):r&&(r.d(1),r=null),o[3]&&o[5]?.id===o[33].id?f?f.p(o,n):(f=we(o),f.c(),f.m(s,t)):f&&(f.d(1),f=null),a===(a=d(o))&&_?_.p(o,n):(_.d(1),_=a(o),_&&(_.c(),_.m(s,null)))},d(o){o&&g(s),r&&r.d(),f&&f.d(),_.d()}}}function ke(l){let s,e,t,r,f="Job Name",d,a,_,o,n,A="Cancel",w,m,N="Add Job",J,U;return{c(){s=h("div"),e=h("form"),t=h("div"),r=h("label"),r.textContent=f,d=V(),a=h("input"),_=V(),o=h("div"),n=h("button"),n.textContent=A,w=V(),m=h("button"),m.textContent=N,this.h()},l(x){s=b(x,"DIV",{class:!0});var p=T(s);e=b(p,"FORM",{class:!0});var v=T(e);t=b(v,"DIV",{});var y=T(t);r=b(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(r)!=="svelte-1owznka"&&(r.textContent=f),d=D(y),a=b(y,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),y.forEach(g),_=D(v),o=b(v,"DIV",{class:!0});var W=T(o);n=b(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(n)!=="svelte-drmpst"&&(n.textContent=A),w=D(W),m=b(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(m)!=="svelte-1hduo9p"&&(m.textContent=N),W.forEach(g),v.forEach(g),p.forEach(g),this.h()},h(){u(r,"for","jobName"),u(r,"class","block text-sm font-medium text-gray-700"),u(a,"type","text"),u(a,"id","jobName"),u(a,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"),u(a,"placeholder","Enter job name"),a.required=!0,u(n,"type","button"),u(n,"class","inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),u(m,"type","submit"),u(m,"class","inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),u(o,"class","flex justify-end space-x-3"),u(e,"class","space-y-4"),u(s,"class","mb-4 p-4 bg-gray-50 rounded-lg")},m(x,p){P(x,s,p),c(s,e),c(e,t),c(t,r),c(t,d),c(t,a),$(a,l[7]),c(e,_),c(e,o),c(o,n),c(o,w),c(o,m),J||(U=[O(a,"input",l[25]),O(n,"click",l[26]),O(e,"submit",ce(l[14]))],J=!0)},p(x,p){p[0]&128&&a.value!==x[7]&&$(a,x[7])},d(x){x&&g(s),J=!1,ee(U)}}}function we(l){let s,e,t,r,f="Job Name",d,a,_,o,n,A="Cancel",w,m,N="Update Job",J,U;return{c(){s=h("div"),e=h("form"),t=h("div"),r=h("label"),r.textContent=f,d=V(),a=h("input"),_=V(),o=h("div"),n=h("button"),n.textContent=A,w=V(),m=h("button"),m.textContent=N,this.h()},l(x){s=b(x,"DIV",{class:!0});var p=T(s);e=b(p,"FORM",{class:!0});var v=T(e);t=b(v,"DIV",{});var y=T(t);r=b(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(r)!=="svelte-1hb1r7y"&&(r.textContent=f),d=D(y),a=b(y,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),y.forEach(g),_=D(v),o=b(v,"DIV",{class:!0});var W=T(o);n=b(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1223msi"&&(n.textContent=A),w=D(W),m=b(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(m)!=="svelte-1lplymb"&&(m.textContent=N),W.forEach(g),v.forEach(g),p.forEach(g),this.h()},h(){u(r,"for","editJobName"),u(r,"class","block text-sm font-medium text-gray-700"),u(a,"type","text"),u(a,"id","editJobName"),u(a,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"),u(a,"placeholder","Enter job name"),a.required=!0,u(n,"type","button"),u(n,"class","inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),u(m,"type","submit"),u(m,"class","inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),u(o,"class","flex justify-end space-x-3"),u(e,"class","space-y-4"),u(s,"class","mb-4 p-4 bg-gray-50 rounded-lg")},m(x,p){P(x,s,p),c(s,e),c(e,t),c(t,r),c(t,d),c(t,a),$(a,l[7]),c(e,_),c(e,o),c(o,n),c(o,w),c(o,m),J||(U=[O(a,"input",l[27]),O(n,"click",l[18]),O(e,"submit",ce(l[15]))],J=!0)},p(x,p){p[0]&128&&a.value!==x[7]&&$(a,x[7])},d(x){x&&g(s),J=!1,ee(U)}}}function Pe(l){let s,e="No jobs added yet";return{c(){s=h("p"),s.textContent=e,this.h()},l(t){s=b(t,"P",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-1746qu"&&(s.textContent=e),this.h()},h(){u(s,"class","text-sm text-gray-500 text-center py-4")},m(t,r){P(t,s,r)},p:Ae,d(t){t&&g(s)}}}function qe(l){let s,e=le(l[33].jobs),t=[];for(let r=0;r<e.length;r+=1)t[r]=xe(ge(l,e,r));return{c(){s=h("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){s=b(r,"DIV",{class:!0});var f=T(s);for(let d=0;d<t.length;d+=1)t[d].l(f);f.forEach(g),this.h()},h(){u(s,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,f){P(r,s,f);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(s,null)},p(r,f){if(f[0]&133121){e=le(r[33].jobs);let d;for(d=0;d<e.length;d+=1){const a=ge(r,e,d);t[d]?t[d].p(a,f):(t[d]=xe(a),t[d].c(),t[d].m(s,null))}for(;d<t.length;d+=1)t[d].d(1);t.length=e.length}},d(r){r&&g(s),Ce(t,r)}}}function xe(l){let s,e,t=l[36].name+"",r,f,d,a,_='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"></path></svg>',o,n,A='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',w,m,N;function J(){return l[28](l[33],l[36])}function U(){return l[29](l[33],l[36])}return{c(){s=h("div"),e=h("span"),r=Q(t),f=V(),d=h("div"),a=h("button"),a.innerHTML=_,o=V(),n=h("button"),n.innerHTML=A,w=V(),this.h()},l(x){s=b(x,"DIV",{class:!0});var p=T(s);e=b(p,"SPAN",{class:!0});var v=T(e);r=X(v,t),v.forEach(g),f=D(p),d=b(p,"DIV",{class:!0});var y=T(d);a=b(y,"BUTTON",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-rqjzy3"&&(a.innerHTML=_),o=D(y),n=b(y,"BUTTON",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-59lf3"&&(n.innerHTML=A),y.forEach(g),w=D(p),p.forEach(g),this.h()},h(){u(e,"class","text-sm font-medium text-gray-900"),u(a,"class","text-primary-600 hover:text-primary-900"),u(n,"class","text-red-600 hover:text-red-900"),u(d,"class","flex items-center space-x-2"),u(s,"class","bg-gray-50 rounded-lg p-4 flex justify-between items-center")},m(x,p){P(x,s,p),c(s,e),c(e,r),c(s,f),c(s,d),c(d,a),c(d,o),c(d,n),c(s,w),m||(N=[O(a,"click",J),O(n,"click",U)],m=!0)},p(x,p){l=x,p[0]&1&&t!==(t=l[36].name+"")&&se(r,t)},d(x){x&&g(s),m=!1,ee(N)}}}function Ee(l){let s,e,t,r,f,d,a,_,o,n=l[33].name+"",A,w,m,N=(l[33].jobs?.length||0)+"",J,U,x,p,v,y="Edit",W,C,k="Add Job",M,j,F="Delete",q,Z=l[8].has(l[33].id),G,K,te;function oe(){return l[21](l[33])}function ne(){return l[22](l[33])}function ue(){return l[23](l[33])}function de(){return l[24](l[33])}let i=Z&&ye(l);return{c(){s=h("div"),e=h("div"),t=h("div"),r=h("button"),f=he("svg"),d=he("path"),_=V(),o=h("h3"),A=Q(n),w=V(),m=h("span"),J=Q(N),U=Q(" Jobs"),x=V(),p=h("div"),v=h("button"),v.textContent=y,W=V(),C=h("button"),C.textContent=k,M=V(),j=h("button"),j.textContent=F,q=V(),i&&i.c(),G=V(),this.h()},l(E){s=b(E,"DIV",{class:!0});var I=T(s);e=b(I,"DIV",{class:!0});var S=T(e);t=b(S,"DIV",{class:!0});var R=T(t);r=b(R,"BUTTON",{class:!0});var fe=T(r);f=be(fe,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0});var me=T(f);d=be(me,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),T(d).forEach(g),me.forEach(g),fe.forEach(g),_=D(R),o=b(R,"H3",{class:!0});var pe=T(o);A=X(pe,n),pe.forEach(g),w=D(R),m=b(R,"SPAN",{class:!0});var ae=T(m);J=X(ae,N),U=X(ae," Jobs"),ae.forEach(g),R.forEach(g),x=D(S),p=b(S,"DIV",{class:!0});var Y=T(p);v=b(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-14z39th"&&(v.textContent=y),W=D(Y),C=b(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-1mz5o18"&&(C.textContent=k),M=D(Y),j=b(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),z(j)!=="svelte-wp0dz3"&&(j.textContent=F),Y.forEach(g),S.forEach(g),q=D(I),i&&i.l(I),G=D(I),I.forEach(g),this.h()},h(){u(d,"fill-rule","evenodd"),u(d,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),u(d,"clip-rule","evenodd"),u(f,"class",a=`h-5 w-5 transform transition-transform ${l[8].has(l[33].id)?"rotate-90":""}`),u(f,"xmlns","http://www.w3.org/2000/svg"),u(f,"viewBox","0 0 20 20"),u(f,"fill","currentColor"),u(r,"class","text-gray-500 hover:text-gray-700"),u(o,"class","text-lg font-medium text-gray-900"),u(m,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),u(t,"class","flex items-center space-x-3"),u(v,"class","inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),u(C,"class","inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),u(j,"class","inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"),u(p,"class","flex items-center space-x-2"),u(e,"class","bg-gray-50 px-4 py-3 flex justify-between items-center"),u(s,"class","border rounded-lg overflow-hidden")},m(E,I){P(E,s,I),c(s,e),c(e,t),c(t,r),c(r,f),c(f,d),c(t,_),c(t,o),c(o,A),c(t,w),c(t,m),c(m,J),c(m,U),c(e,x),c(e,p),c(p,v),c(p,W),c(p,C),c(p,M),c(p,j),c(s,q),i&&i.m(s,null),c(s,G),K||(te=[O(r,"click",oe),O(v,"click",ne),O(C,"click",ue),O(j,"click",de)],K=!0)},p(E,I){l=E,I[0]&257&&a!==(a=`h-5 w-5 transform transition-transform ${l[8].has(l[33].id)?"rotate-90":""}`)&&u(f,"class",a),I[0]&1&&n!==(n=l[33].name+"")&&se(A,n),I[0]&1&&N!==(N=(l[33].jobs?.length||0)+"")&&se(J,N),I[0]&257&&(Z=l[8].has(l[33].id)),Z?i?i.p(l,I):(i=ye(l),i.c(),i.m(s,G)):i&&(i.d(1),i=null)},d(E){E&&g(s),i&&i.d(),K=!1,ee(te)}}}function Se(l){let s,e,t,r,f,d,a,_="Workplaces",o,n,A,w,m,N,J,U;t=new ze({props:{title:"Workplaces & Jobs",subtitle:"Manage workplaces and their associated jobs"}});function x(k,M){return k[1]?He:Fe}let p=x(l),v=p(l),y=(l[1]||l[2])&&ve(l),W=le(l[0]),C=[];for(let k=0;k<W.length;k+=1)C[k]=Ee(_e(l,W,k));return{c(){s=V(),e=h("div"),De(t.$$.fragment),r=V(),f=h("div"),d=h("div"),a=h("h2"),a.textContent=_,o=V(),n=h("button"),v.c(),A=V(),y&&y.c(),w=V(),m=h("div");for(let k=0;k<C.length;k+=1)C[k].c();this.h()},l(k){Te("svelte-r2ri8h",document.head).forEach(g),s=D(k),e=b(k,"DIV",{class:!0});var j=T(e);Ue(t.$$.fragment,j),r=D(j),f=b(j,"DIV",{class:!0});var F=T(f);d=b(F,"DIV",{class:!0});var q=T(d);a=b(q,"H2",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-1auhy83"&&(a.textContent=_),o=D(q),n=b(q,"BUTTON",{class:!0});var Z=T(n);v.l(Z),Z.forEach(g),q.forEach(g),A=D(F),y&&y.l(F),w=D(F),m=b(F,"DIV",{class:!0});var G=T(m);for(let K=0;K<C.length;K+=1)C[K].l(G);G.forEach(g),F.forEach(g),j.forEach(g),this.h()},h(){document.title="Workplaces & Jobs | Cession Management",u(a,"class","text-lg font-medium text-gray-900"),u(n,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),u(d,"class","flex justify-between items-center mb-4"),u(m,"class","mt-6 space-y-4"),u(f,"class","bg-white shadow-sm rounded-lg p-6"),u(e,"class","space-y-6")},m(k,M){P(k,s,M),P(k,e,M),Be(t,e,null),c(e,r),c(e,f),c(f,d),c(d,a),c(d,o),c(d,n),v.m(n,null),c(f,A),y&&y.m(f,null),c(f,w),c(f,m);for(let j=0;j<C.length;j+=1)C[j]&&C[j].m(m,null);N=!0,J||(U=O(n,"click",l[19]),J=!0)},p(k,M){if(p!==(p=x(k))&&(v.d(1),v=p(k),v&&(v.c(),v.m(n,null))),k[1]||k[2]?y?y.p(k,M):(y=ve(k),y.c(),y.m(f,w)):y&&(y.d(1),y=null),M[0]&511977){W=le(k[0]);let j;for(j=0;j<W.length;j+=1){const F=_e(k,W,j);C[j]?C[j].p(F,M):(C[j]=Ee(F),C[j].c(),C[j].m(m,null))}for(;j<C.length;j+=1)C[j].d(1);C.length=W.length}},i(k){N||(Oe(t.$$.fragment,k),N=!0)},o(k){Me(t.$$.fragment,k),N=!1},d(k){k&&(g(s),g(e)),Le(t),v.d(),y&&y.d(),Ce(C,k),J=!1,U()}}}function Re(l,s,e){let t;Ie(l,L,i=>e(31,t=i));let r=[],f=!1,d=!1,a=!1,_="",o=null,n=null,A=!1,w="",m=new Set;Ne(async()=>{await N()});async function N(){H(L,t=!0,t);try{const i=await re.getAll();i&&Array.isArray(i)?(e(0,r=i),e(0,r=r.map(E=>({...E,jobs:E.jobs||[]})))):B("Failed to load workplaces: Invalid response format","error")}catch(i){B(i.message||"Failed to load workplaces","error")}finally{H(L,t=!1,t)}}function J(i){m.has(i)?m.delete(i):m.add(i),e(8,m)}function U(i){e(5,o={...i}),e(2,d=!0),e(4,_=i.name)}function x(i,E){e(5,o=i),n={...E},e(3,a=!0),e(7,w=E.name)}async function p(){if(!_.trim()){B("Workplace name cannot be empty","error");return}H(L,t=!0,t);try{const i=await re.create({name:_});if(i.success)e(0,r=[...r,i.data]),e(4,_=""),e(1,f=!1),B("Workplace added successfully","success");else throw new Error(i.error)}catch(i){B(i.message||"Failed to add workplace","error")}finally{H(L,t=!1,t)}}async function v(){if(!o||!_.trim()){B("Workplace name cannot be empty","error");return}H(L,t=!0,t);try{const i=await re.update(o.id,{name:_});if(i.success){const E=r.findIndex(I=>I.id===o.id);E!==-1&&(e(0,r[E]={...r[E],name:_},r),e(0,r=[...r])),e(4,_=""),e(2,d=!1),e(5,o=null),B("Workplace updated successfully","success")}else throw new Error(i.error)}catch(i){B(i.message||"Failed to update workplace","error")}finally{H(L,t=!1,t)}}async function y(){if(!o){B("Please select a workplace first","error");return}if(!w.trim()){B("Job name cannot be empty","error");return}H(L,t=!0,t);try{const i=await ie.create({name:w,workplaceId:o.id});if(i.success){const E=r.findIndex(I=>I.id===o.id);E!==-1&&(e(0,r[E].jobs=[...r[E].jobs||[],i.data],r),e(0,r=[...r])),e(7,w=""),e(6,A=!1),B("Job added successfully","success")}else throw new Error(i.error)}catch(i){B(i.message||"Failed to add job","error")}finally{H(L,t=!1,t)}}async function W(){if(!o||!n||!w.trim()){B("Job name cannot be empty","error");return}H(L,t=!0,t);try{const i=await ie.update(n.id,{name:w});if(i.success){const E=r.findIndex(I=>I.id===o.id);if(E!==-1){const I=r[E].jobs.findIndex(S=>S.id===n.id);I!==-1&&(e(0,r[E].jobs[I]={...r[E].jobs[I],name:w},r),e(0,r=[...r]))}e(7,w=""),e(3,a=!1),n=null,B("Job updated successfully","success")}else throw new Error(i.error)}catch(i){B(i.message||"Failed to update job","error")}finally{H(L,t=!1,t)}}async function C(i){if(confirm("Are you sure you want to delete this workplace? This will also delete all associated jobs.")){H(L,t=!0,t);try{const E=await re.delete(i.id);if(E.success)e(0,r=r.filter(I=>I.id!==i.id)),B("Workplace deleted successfully","success");else throw new Error(E.error)}catch(E){B(E.message||"Failed to delete workplace","error")}finally{H(L,t=!1,t)}}}async function k(i,E){if(confirm("Are you sure you want to delete this job?")){H(L,t=!0,t);try{const I=await ie.delete(E.id);if(I.success){const S=r.findIndex(R=>R.id===i.id);S!==-1&&(e(0,r[S].jobs=r[S].jobs.filter(R=>R.id!==E.id),r),e(0,r=[...r])),B("Job deleted successfully","success")}else throw new Error(I.error)}catch(I){B(I.message||"Failed to delete job","error")}finally{H(L,t=!1,t)}}}function M(){e(2,d=!1),e(3,a=!1),e(5,o=null),n=null,e(4,_=""),e(7,w="")}const j=()=>{f?M():(e(1,f=!0),e(2,d=!1))};function F(){_=this.value,e(4,_)}const q=i=>J(i.id),Z=i=>U(i),G=i=>{e(5,o=i),e(6,A=!A)},K=i=>C(i);function te(){w=this.value,e(7,w)}const oe=()=>{e(6,A=!1),e(7,w="")};function ne(){w=this.value,e(7,w)}return[r,f,d,a,_,o,A,w,m,J,U,x,p,v,y,W,C,k,M,j,F,q,Z,G,K,te,oe,ne,(i,E)=>x(i,E),(i,E)=>k(i,E)]}class $e extends Je{constructor(s){super(),Ve(this,s,Re,Se,je,{},null,[-1,-1])}}export{$e as component};
