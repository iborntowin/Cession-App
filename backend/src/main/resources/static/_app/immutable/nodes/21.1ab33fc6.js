import{s as je,f as d,a as k,l as j,g as f,h as _,y as le,c as E,m as q,d as c,j as r,i as X,w as a,L as he,z as W,n as ne,P as He,I as ye,H as qe,K as gt,T as _t,e as at,p as vt,U as bt,u as yt,o as wt}from"../chunks/scheduler.55755e91.js";import{S as ze,i as Re,h as xt,b as Xe,d as Ge,m as Je,t as Fe,c as Ct,a as Oe,e as Qe,g as Dt}from"../chunks/index.d2ed93bc.js";import{s as Be,g as kt,u as Et}from"../chunks/navigation.fbd60083.js";import{d as Pt}from"../chunks/helpers.a7fe1391.js";import{f as Ke}from"../chunks/index.7c030542.js";import{s as rt,f as Ae,a as We}from"../chunks/formatters.90833bec.js";import{e as ot}from"../chunks/each.8720bd6f.js";import{p as $e}from"../chunks/api.20dd9789.js";function it(l){let e,t,n="Search by Client",s,o,i,h,u;return{c(){e=d("div"),t=d("label"),t.textContent=n,s=k(),o=d("div"),i=d("input"),this.h()},l(m){e=f(m,"DIV",{class:!0});var p=_(e);t=f(p,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),le(t)!=="svelte-66f8or"&&(t.textContent=n),s=E(p),o=f(p,"DIV",{class:!0});var y=_(o);i=f(y,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),y.forEach(c),p.forEach(c),this.h()},h(){r(t,"for","clientSearch"),r(t,"class","block text-sm font-medium text-gray-700"),r(i,"type","text"),r(i,"id","clientSearch"),r(i,"class","shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md"),r(i,"placeholder","Enter client name..."),r(o,"class","mt-1"),r(e,"class","transition-all duration-200 ease-in-out")},m(m,p){X(m,e,p),a(e,t),a(e,s),a(e,o),a(o,i),he(i,l[4]),h||(u=[W(i,"input",l[12]),W(i,"input",l[9])],h=!0)},p(m,p){p&16&&i.value!==m[4]&&he(i,m[4])},d(m){m&&c(e),h=!1,qe(u)}}}function Tt(l){let e,t,n,s="Filters",o,i,h,u=l[5]?"Hide Search":"Show Search",m,p,y,D="Reset",I,x,N,b,w,V,S="Start Date",M,U,z,P,v,R="End Date",C,T,A,O,se,ae,me="Min Amount",oe,L,G,re,ie,de="Max Amount",fe,J,ue,_e,Y=l[5]&&it(l);return{c(){e=d("div"),t=d("div"),n=d("h2"),n.textContent=s,o=k(),i=d("div"),h=d("button"),m=j(u),p=k(),y=d("button"),y.textContent=D,I=k(),x=d("div"),Y&&Y.c(),N=k(),b=d("div"),w=d("div"),V=d("label"),V.textContent=S,M=k(),U=d("input"),z=k(),P=d("div"),v=d("label"),v.textContent=R,C=k(),T=d("input"),A=k(),O=d("div"),se=d("div"),ae=d("label"),ae.textContent=me,oe=k(),L=d("input"),G=k(),re=d("div"),ie=d("label"),ie.textContent=de,fe=k(),J=d("input"),this.h()},l(K){e=f(K,"DIV",{class:!0});var F=_(e);t=f(F,"DIV",{class:!0});var we=_(t);n=f(we,"H2",{class:!0,"data-svelte-h":!0}),le(n)!=="svelte-c0qz1f"&&(n.textContent=s),o=E(we),i=f(we,"DIV",{class:!0});var ge=_(i);h=f(ge,"BUTTON",{type:!0,class:!0});var $=_(h);m=q($,u),$.forEach(c),p=E(ge),y=f(ge,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),le(y)!=="svelte-1in0m5n"&&(y.textContent=D),ge.forEach(c),we.forEach(c),I=E(F),x=f(F,"DIV",{class:!0});var ve=_(x);Y&&Y.l(ve),N=E(ve),b=f(ve,"DIV",{class:!0});var pe=_(b);w=f(pe,"DIV",{});var ce=_(w);V=f(ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),le(V)!=="svelte-12tmqq8"&&(V.textContent=S),M=E(ce),U=f(ce,"INPUT",{type:!0,id:!0,class:!0}),ce.forEach(c),z=E(pe),P=f(pe,"DIV",{});var De=_(P);v=f(De,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),le(v)!=="svelte-amgs1e"&&(v.textContent=R),C=E(De),T=f(De,"INPUT",{type:!0,id:!0,class:!0}),De.forEach(c),pe.forEach(c),A=E(ve),O=f(ve,"DIV",{class:!0});var Z=_(O);se=f(Z,"DIV",{});var H=_(se);ae=f(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),le(ae)!=="svelte-15h2utw"&&(ae.textContent=me),oe=E(H),L=f(H,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),H.forEach(c),G=E(Z),re=f(Z,"DIV",{});var te=_(re);ie=f(te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),le(ie)!=="svelte-1z0v0fk"&&(ie.textContent=de),fe=E(te),J=f(te,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),te.forEach(c),Z.forEach(c),ve.forEach(c),F.forEach(c),this.h()},h(){r(n,"class","text-lg font-medium text-gray-900"),r(h,"type","button"),r(h,"class","inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),r(y,"type","button"),r(y,"class","inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),r(i,"class","flex space-x-2"),r(t,"class","flex justify-between items-center mb-4"),r(V,"for","startDate"),r(V,"class","block text-sm font-medium text-gray-700"),r(U,"type","date"),r(U,"id","startDate"),r(U,"class","mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),r(v,"for","endDate"),r(v,"class","block text-sm font-medium text-gray-700"),r(T,"type","date"),r(T,"id","endDate"),r(T,"class","mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),r(b,"class","grid grid-cols-1 gap-4 sm:grid-cols-2"),r(ae,"for","minAmount"),r(ae,"class","block text-sm font-medium text-gray-700"),r(L,"type","number"),r(L,"id","minAmount"),r(L,"class","mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),r(L,"placeholder","Enter minimum amount"),r(ie,"for","maxAmount"),r(ie,"class","block text-sm font-medium text-gray-700"),r(J,"type","number"),r(J,"id","maxAmount"),r(J,"class","mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),r(J,"placeholder","Enter maximum amount"),r(O,"class","grid grid-cols-1 gap-4 sm:grid-cols-2"),r(x,"class","space-y-4"),r(e,"class","bg-white shadow rounded-lg p-4")},m(K,F){X(K,e,F),a(e,t),a(t,n),a(t,o),a(t,i),a(i,h),a(h,m),a(i,p),a(i,y),a(e,I),a(e,x),Y&&Y.m(x,null),a(x,N),a(x,b),a(b,w),a(w,V),a(w,M),a(w,U),he(U,l[0]),a(b,z),a(b,P),a(P,v),a(P,C),a(P,T),he(T,l[1]),a(x,A),a(x,O),a(O,se),a(se,ae),a(se,oe),a(se,L),he(L,l[2]),a(O,G),a(O,re),a(re,ie),a(re,fe),a(re,J),he(J,l[3]),ue||(_e=[W(h,"click",l[6]),W(y,"click",l[10]),W(U,"input",l[13]),W(U,"change",l[7]),W(T,"input",l[14]),W(T,"change",l[7]),W(L,"input",l[15]),W(L,"change",l[8]),W(J,"input",l[16]),W(J,"change",l[8])],ue=!0)},p(K,[F]){F&32&&u!==(u=K[5]?"Hide Search":"Show Search")&&ne(m,u),K[5]?Y?Y.p(K,F):(Y=it(K),Y.c(),Y.m(x,N)):Y&&(Y.d(1),Y=null),F&1&&he(U,K[0]),F&2&&he(T,K[1]),F&4&&He(L.value)!==K[2]&&he(L,K[2]),F&8&&He(J.value)!==K[3]&&he(J,K[3])},i:ye,o:ye,d(K){K&&c(e),Y&&Y.d(),ue=!1,qe(_e)}}}function It(l,e,t){let{onFilterChange:n=()=>{}}=e,s=Ke(rt(new Date,1),"yyyy-MM-dd"),o=Ke(new Date,"yyyy-MM-dd"),i=null,h=null,u="",m=!1;function p(){t(5,m=!m),m||(t(4,u=""),n({clientSearch:""}))}function y(){n({startDate:s,endDate:o})}function D(){n({minAmount:i,maxAmount:h})}function I(){x()}const x=Pt(()=>{n({clientSearch:u})},300);function N(){t(0,s=Ke(rt(new Date,1),"yyyy-MM-dd")),t(1,o=Ke(new Date,"yyyy-MM-dd")),t(2,i=null),t(3,h=null),t(4,u=""),n({startDate:s,endDate:o,minAmount:i,maxAmount:h,clientSearch:u})}function b(){u=this.value,t(4,u)}function w(){s=this.value,t(0,s)}function V(){o=this.value,t(1,o)}function S(){i=He(this.value),t(2,i)}function M(){h=He(this.value),t(3,h)}return l.$$set=U=>{"onFilterChange"in U&&t(11,n=U.onFilterChange)},[s,o,i,h,u,m,p,y,D,I,N,n,b,w,V,S,M]}class At extends ze{constructor(e){super(),Re(this,e,It,Tt,je,{onFilterChange:11})}}function Vt(l){let e,t,n,s="Total Payments",o,i,h,u,m,p,y="Total Amount",D,I,x=Ae(l[0])+"",N,b,w,V,S="Average Payment",M,U,z=Ae(l[2])+"",P;return{c(){e=d("div"),t=d("div"),n=d("h3"),n.textContent=s,o=k(),i=d("p"),h=j(l[1]),u=k(),m=d("div"),p=d("h3"),p.textContent=y,D=k(),I=d("p"),N=j(x),b=k(),w=d("div"),V=d("h3"),V.textContent=S,M=k(),U=d("p"),P=j(z),this.h()},l(v){e=f(v,"DIV",{class:!0});var R=_(e);t=f(R,"DIV",{class:!0});var C=_(t);n=f(C,"H3",{class:!0,"data-svelte-h":!0}),le(n)!=="svelte-1scq5yt"&&(n.textContent=s),o=E(C),i=f(C,"P",{class:!0});var T=_(i);h=q(T,l[1]),T.forEach(c),C.forEach(c),u=E(R),m=f(R,"DIV",{class:!0});var A=_(m);p=f(A,"H3",{class:!0,"data-svelte-h":!0}),le(p)!=="svelte-1f41ywa"&&(p.textContent=y),D=E(A),I=f(A,"P",{class:!0});var O=_(I);N=q(O,x),O.forEach(c),A.forEach(c),b=E(R),w=f(R,"DIV",{class:!0});var se=_(w);V=f(se,"H3",{class:!0,"data-svelte-h":!0}),le(V)!=="svelte-l2rhsl"&&(V.textContent=S),M=E(se),U=f(se,"P",{class:!0});var ae=_(U);P=q(ae,z),ae.forEach(c),se.forEach(c),R.forEach(c),this.h()},h(){r(n,"class","text-lg font-medium text-gray-900"),r(i,"class","mt-2 text-3xl font-semibold text-gray-900"),r(t,"class","bg-white rounded-lg shadow p-6"),r(p,"class","text-lg font-medium text-gray-900"),r(I,"class","mt-2 text-3xl font-semibold text-gray-900"),r(m,"class","bg-white rounded-lg shadow p-6"),r(V,"class","text-lg font-medium text-gray-900"),r(U,"class","mt-2 text-3xl font-semibold text-gray-900"),r(w,"class","bg-white rounded-lg shadow p-6"),r(e,"class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-6")},m(v,R){X(v,e,R),a(e,t),a(t,n),a(t,o),a(t,i),a(i,h),a(e,u),a(e,m),a(m,p),a(m,D),a(m,I),a(I,N),a(e,b),a(e,w),a(w,V),a(w,M),a(w,U),a(U,P)},p(v,[R]){R&2&&ne(h,v[1]),R&1&&x!==(x=Ae(v[0])+"")&&ne(N,x),R&4&&z!==(z=Ae(v[2])+"")&&ne(P,z)},i:ye,o:ye,d(v){v&&c(e)}}}function Nt(l,e,t){let n,s,o,{payments:i=[]}=e;return l.$$set=h=>{"payments"in h&&t(3,i=h.payments)},l.$$.update=()=>{l.$$.dirty&8&&t(0,n=i.reduce((h,u)=>h+u.amount,0)),l.$$.dirty&9&&t(2,s=i.length>0?n/i.length:0),l.$$.dirty&8&&t(1,o=i.length)},[n,o,s,i]}class St extends ze{constructor(e){super(),Re(this,e,Nt,Vt,je,{payments:3})}}function ut(l,e,t){const n=l.slice();return n[21]=e[t],n}function ct(l){let e=l[1]==="asc"?"↑":"↓",t;return{c(){t=j(e)},l(n){t=q(n,e)},m(n,s){X(n,t,s)},p(n,s){s&2&&e!==(e=n[1]==="asc"?"↑":"↓")&&ne(t,e)},d(n){n&&c(t)}}}function dt(l){let e=l[1]==="asc"?"↑":"↓",t;return{c(){t=j(e)},l(n){t=q(n,e)},m(n,s){X(n,t,s)},p(n,s){s&2&&e!==(e=n[1]==="asc"?"↑":"↓")&&ne(t,e)},d(n){n&&c(t)}}}function ft(l){let e=l[1]==="asc"?"↑":"↓",t;return{c(){t=j(e)},l(n){t=q(n,e)},m(n,s){X(n,t,s)},p(n,s){s&2&&e!==(e=n[1]==="asc"?"↑":"↓")&&ne(t,e)},d(n){n&&c(t)}}}function mt(l){let e,t,n=l[21].cessionClientName+"",s,o,i,h=Ae(l[21].amount)+"",u,m,p,y=We(l[21].paymentDate)+"",D,I,x,N=(l[21].notes||"No notes")+"",b,w,V,S,M,U="View",z,P,v="Edit",R,C,T="Delete",A,O,se;function ae(){return l[13](l[21])}function me(){return l[14](l[21])}function oe(){return l[15](l[21])}return{c(){e=d("tr"),t=d("td"),s=j(n),o=k(),i=d("td"),u=j(h),m=k(),p=d("td"),D=j(y),I=k(),x=d("td"),b=j(N),w=k(),V=d("td"),S=d("div"),M=d("button"),M.textContent=U,z=k(),P=d("button"),P.textContent=v,R=k(),C=d("button"),C.textContent=T,A=k(),this.h()},l(L){e=f(L,"TR",{class:!0});var G=_(e);t=f(G,"TD",{class:!0});var re=_(t);s=q(re,n),re.forEach(c),o=E(G),i=f(G,"TD",{class:!0});var ie=_(i);u=q(ie,h),ie.forEach(c),m=E(G),p=f(G,"TD",{class:!0});var de=_(p);D=q(de,y),de.forEach(c),I=E(G),x=f(G,"TD",{class:!0});var fe=_(x);b=q(fe,N),fe.forEach(c),w=E(G),V=f(G,"TD",{class:!0});var J=_(V);S=f(J,"DIV",{class:!0});var ue=_(S);M=f(ue,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),le(M)!=="svelte-mhvw9k"&&(M.textContent=U),z=E(ue),P=f(ue,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),le(P)!=="svelte-nrn4zq"&&(P.textContent=v),R=E(ue),C=f(ue,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),le(C)!=="svelte-r562qo"&&(C.textContent=T),ue.forEach(c),J.forEach(c),A=E(G),G.forEach(c),this.h()},h(){r(t,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),r(i,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(p,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(x,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),r(M,"type","button"),r(M,"class","text-indigo-600 hover:text-indigo-900"),r(P,"type","button"),r(P,"class","text-blue-600 hover:text-blue-900"),r(C,"type","button"),r(C,"class","text-red-600 hover:text-red-900"),r(S,"class","flex justify-end space-x-2"),r(V,"class","px-6 py-4 whitespace-nowrap text-right text-sm font-medium"),r(e,"class","hover:bg-gray-50")},m(L,G){X(L,e,G),a(e,t),a(t,s),a(e,o),a(e,i),a(i,u),a(e,m),a(e,p),a(p,D),a(e,I),a(e,x),a(x,b),a(e,w),a(e,V),a(V,S),a(S,M),a(S,z),a(S,P),a(S,R),a(S,C),a(e,A),O||(se=[W(M,"click",ae),W(P,"click",me),W(C,"click",oe)],O=!0)},p(L,G){l=L,G&4&&n!==(n=l[21].cessionClientName+"")&&ne(s,n),G&4&&h!==(h=Ae(l[21].amount)+"")&&ne(u,h),G&4&&y!==(y=We(l[21].paymentDate)+"")&&ne(D,y),G&4&&N!==(N=(l[21].notes||"No notes")+"")&&ne(b,N)},d(L){L&&c(e),O=!1,qe(se)}}}function Lt(l){let e,t,n,s,o,i,h,u,m,p,y,D,I,x,N="Notes",b,w,V="Actions",S,M,U,z,P,v,R,C,T,A,O,se,ae,me,oe,L,G,re,ie,de,fe,J,ue,_e,Y,K,F,we,ge,$,ve,pe,ce,De,Z=l[0]==="cessionClientName"&&ct(l),H=l[0]==="amount"&&dt(l),te=l[0]==="paymentDate"&&ft(l),xe=ot(l[2]),Q=[];for(let g=0;g<xe.length;g+=1)Q[g]=mt(ut(l,xe,g));return{c(){e=d("div"),t=d("table"),n=d("thead"),s=d("tr"),o=d("th"),i=j("Client "),Z&&Z.c(),h=k(),u=d("th"),m=j("Amount "),H&&H.c(),p=k(),y=d("th"),D=j("Date "),te&&te.c(),I=k(),x=d("th"),x.textContent=N,b=k(),w=d("th"),w.textContent=V,S=k(),M=d("tbody");for(let g=0;g<Q.length;g+=1)Q[g].c();U=k(),z=d("div"),P=d("div"),v=d("button"),R=j("Previous"),T=k(),A=d("button"),O=j("Next"),ae=k(),me=d("div"),oe=d("div"),L=d("p"),G=j("Page "),re=d("span"),ie=j(l[3]),de=j(" of "),fe=d("span"),J=j(l[4]),ue=k(),_e=d("div"),Y=d("nav"),K=d("button"),F=j("Previous"),ge=k(),$=d("button"),ve=j("Next"),this.h()},l(g){e=f(g,"DIV",{class:!0});var B=_(e);t=f(B,"TABLE",{class:!0});var ee=_(t);n=f(ee,"THEAD",{class:!0});var ke=_(n);s=f(ke,"TR",{});var be=_(s);o=f(be,"TH",{scope:!0,class:!0});var Me=_(o);i=q(Me,"Client "),Z&&Z.l(Me),Me.forEach(c),h=E(be),u=f(be,"TH",{scope:!0,class:!0});var Ee=_(u);m=q(Ee,"Amount "),H&&H.l(Ee),Ee.forEach(c),p=E(be),y=f(be,"TH",{scope:!0,class:!0});var Ue=_(y);D=q(Ue,"Date "),te&&te.l(Ue),Ue.forEach(c),I=E(be),x=f(be,"TH",{scope:!0,class:!0,"data-svelte-h":!0}),le(x)!=="svelte-rsv13s"&&(x.textContent=N),b=E(be),w=f(be,"TH",{scope:!0,class:!0,"data-svelte-h":!0}),le(w)!=="svelte-12oixyf"&&(w.textContent=V),be.forEach(c),ke.forEach(c),S=E(ee),M=f(ee,"TBODY",{class:!0});var Ce=_(M);for(let Ze=0;Ze<Q.length;Ze+=1)Q[Ze].l(Ce);Ce.forEach(c),ee.forEach(c),B.forEach(c),U=E(g),z=f(g,"DIV",{class:!0});var Pe=_(z);P=f(Pe,"DIV",{class:!0});var Ve=_(P);v=f(Ve,"BUTTON",{type:!0,class:!0});var Ne=_(v);R=q(Ne,"Previous"),Ne.forEach(c),T=E(Ve),A=f(Ve,"BUTTON",{type:!0,class:!0});var Se=_(A);O=q(Se,"Next"),Se.forEach(c),Ve.forEach(c),ae=E(Pe),me=f(Pe,"DIV",{class:!0});var Te=_(me);oe=f(Te,"DIV",{});var Le=_(oe);L=f(Le,"P",{class:!0});var Ie=_(L);G=q(Ie,"Page "),re=f(Ie,"SPAN",{class:!0});var et=_(re);ie=q(et,l[3]),et.forEach(c),de=q(Ie," of "),fe=f(Ie,"SPAN",{class:!0});var tt=_(fe);J=q(tt,l[4]),tt.forEach(c),Ie.forEach(c),Le.forEach(c),ue=E(Te),_e=f(Te,"DIV",{});var st=_(_e);Y=f(st,"NAV",{class:!0,"aria-label":!0});var Ye=_(Y);K=f(Ye,"BUTTON",{type:!0,class:!0});var lt=_(K);F=q(lt,"Previous"),lt.forEach(c),ge=E(Ye),$=f(Ye,"BUTTON",{type:!0,class:!0});var nt=_($);ve=q(nt,"Next"),nt.forEach(c),Ye.forEach(c),st.forEach(c),Te.forEach(c),Pe.forEach(c),this.h()},h(){r(o,"scope","col"),r(o,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"),r(u,"scope","col"),r(u,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"),r(y,"scope","col"),r(y,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"),r(x,"scope","col"),r(x,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),r(w,"scope","col"),r(w,"class","px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"),r(n,"class","bg-gray-50"),r(M,"class","bg-white divide-y divide-gray-200"),r(t,"class","min-w-full divide-y divide-gray-200"),r(e,"class","overflow-x-auto bg-white rounded-lg shadow"),r(v,"type","button"),r(v,"class","relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),v.disabled=C=l[3]===1,r(A,"type","button"),r(A,"class","relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),A.disabled=se=l[3]===l[4],r(P,"class","flex justify-between flex-1 sm:hidden"),r(re,"class","font-medium"),r(fe,"class","font-medium"),r(L,"class","text-sm text-gray-700"),r(K,"type","button"),r(K,"class","relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),K.disabled=we=l[3]===1,r($,"type","button"),r($,"class","relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"),$.disabled=pe=l[3]===l[4],r(Y,"class","relative z-0 inline-flex rounded-md shadow-sm -space-x-px"),r(Y,"aria-label","Pagination"),r(me,"class","hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"),r(z,"class","flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200 sm:px-6")},m(g,B){X(g,e,B),a(e,t),a(t,n),a(n,s),a(s,o),a(o,i),Z&&Z.m(o,null),a(s,h),a(s,u),a(u,m),H&&H.m(u,null),a(s,p),a(s,y),a(y,D),te&&te.m(y,null),a(s,I),a(s,x),a(s,b),a(s,w),a(t,S),a(t,M);for(let ee=0;ee<Q.length;ee+=1)Q[ee]&&Q[ee].m(M,null);X(g,U,B),X(g,z,B),a(z,P),a(P,v),a(v,R),a(P,T),a(P,A),a(A,O),a(z,ae),a(z,me),a(me,oe),a(oe,L),a(L,G),a(L,re),a(re,ie),a(L,de),a(L,fe),a(fe,J),a(me,ue),a(me,_e),a(_e,Y),a(Y,K),a(K,F),a(Y,ge),a(Y,$),a($,ve),ce||(De=[W(o,"click",l[10]),W(u,"click",l[11]),W(y,"click",l[12]),W(v,"click",l[16]),W(A,"click",l[17]),W(K,"click",l[18]),W($,"click",l[19])],ce=!0)},p(g,[B]){if(g[0]==="cessionClientName"?Z?Z.p(g,B):(Z=ct(g),Z.c(),Z.m(o,null)):Z&&(Z.d(1),Z=null),g[0]==="amount"?H?H.p(g,B):(H=dt(g),H.c(),H.m(u,null)):H&&(H.d(1),H=null),g[0]==="paymentDate"?te?te.p(g,B):(te=ft(g),te.c(),te.m(y,null)):te&&(te.d(1),te=null),B&132){xe=ot(g[2]);let ee;for(ee=0;ee<xe.length;ee+=1){const ke=ut(g,xe,ee);Q[ee]?Q[ee].p(ke,B):(Q[ee]=mt(ke),Q[ee].c(),Q[ee].m(M,null))}for(;ee<Q.length;ee+=1)Q[ee].d(1);Q.length=xe.length}B&8&&C!==(C=g[3]===1)&&(v.disabled=C),B&24&&se!==(se=g[3]===g[4])&&(A.disabled=se),B&8&&ne(ie,g[3]),B&16&&ne(J,g[4]),B&8&&we!==(we=g[3]===1)&&(K.disabled=we),B&24&&pe!==(pe=g[3]===g[4])&&($.disabled=pe)},i:ye,o:ye,d(g){g&&(c(e),c(U),c(z)),Z&&Z.d(),H&&H.d(),te&&te.d(),gt(Q,g),ce=!1,qe(De)}}}function Bt(l,e,t){let{payments:n=[]}=e,{currentPage:s=1}=e,{totalPages:o=1}=e,{onPageChange:i=()=>{}}=e,{onSort:h=()=>{}}=e,{sortField:u=""}=e,{sortOrder:m="asc"}=e,{onAction:p=()=>{}}=e;const y=_t();function D(v){u===v?t(1,m=m==="asc"?"desc":"asc"):(t(0,u=v),t(1,m="asc")),h(v,m)}function I(v,R){v==="delete"?confirm("Are you sure you want to delete this payment?")&&y("action",{type:"delete",payment:R}):y("action",{type:v,payment:R})}const x=()=>D("cessionClientName"),N=()=>D("amount"),b=()=>D("paymentDate"),w=v=>I("view",v),V=v=>I("edit",v),S=v=>I("delete",v),M=()=>i(s-1),U=()=>i(s+1),z=()=>i(s-1),P=()=>i(s+1);return l.$$set=v=>{"payments"in v&&t(2,n=v.payments),"currentPage"in v&&t(3,s=v.currentPage),"totalPages"in v&&t(4,o=v.totalPages),"onPageChange"in v&&t(5,i=v.onPageChange),"onSort"in v&&t(8,h=v.onSort),"sortField"in v&&t(0,u=v.sortField),"sortOrder"in v&&t(1,m=v.sortOrder),"onAction"in v&&t(9,p=v.onAction)},[u,m,n,s,o,i,D,I,h,p,x,N,b,w,V,S,M,U,z,P]}class Mt extends ze{constructor(e){super(),Re(this,e,Bt,Lt,je,{payments:2,currentPage:3,totalPages:4,onPageChange:5,onSort:8,sortField:0,sortOrder:1,onAction:9})}}function ht(l){let e,t,n,s,o,i,h,u,m,p=l[0]==="view"?"Payment Details":"Edit Payment",y,D,I,x,N,b,w="Client",V,S,M=l[2]?.cessionClientName+"",U,z,P,v,R="Amount",C,T,A,O,se="Payment Date",ae,me,oe,L,G="Notes",re,ie,de,fe,J,ue=l[0]==="edit"?"Cancel":"Close",_e,Y,K,F=l[4]&&pt(l);function we(g,B){return g[0]==="edit"?Ft:Ut}let ge=we(l),$=ge(l);function ve(g,B){return g[0]==="edit"?Ht:Ot}let pe=ve(l),ce=pe(l);function De(g,B){return g[0]==="edit"?qt:jt}let Z=De(l),H=Z(l);function te(g,B){return g[0]==="view"?Rt:zt}let xe=te(l),Q=xe(l);return{c(){e=d("div"),t=k(),n=d("div"),s=d("div"),o=d("div"),i=d("div"),h=d("div"),u=d("div"),m=d("h3"),y=j(p),D=k(),F&&F.c(),I=k(),x=d("div"),N=d("div"),b=d("label"),b.textContent=w,V=k(),S=d("p"),U=j(M),z=k(),P=d("div"),v=d("label"),v.textContent=R,C=k(),$.c(),T=k(),A=d("div"),O=d("label"),O.textContent=se,ae=k(),ce.c(),me=k(),oe=d("div"),L=d("label"),L.textContent=G,re=k(),H.c(),ie=k(),de=d("div"),Q.c(),fe=k(),J=d("button"),_e=j(ue),this.h()},l(g){e=f(g,"DIV",{class:!0}),_(e).forEach(c),t=E(g),n=f(g,"DIV",{class:!0});var B=_(n);s=f(B,"DIV",{class:!0});var ee=_(s);o=f(ee,"DIV",{class:!0});var ke=_(o);i=f(ke,"DIV",{class:!0});var be=_(i);h=f(be,"DIV",{class:!0});var Me=_(h);u=f(Me,"DIV",{class:!0});var Ee=_(u);m=f(Ee,"H3",{class:!0});var Ue=_(m);y=q(Ue,p),Ue.forEach(c),D=E(Ee),F&&F.l(Ee),I=E(Ee),x=f(Ee,"DIV",{class:!0});var Ce=_(x);N=f(Ce,"DIV",{});var Pe=_(N);b=f(Pe,"LABEL",{class:!0,"data-svelte-h":!0}),le(b)!=="svelte-8anx4v"&&(b.textContent=w),V=E(Pe),S=f(Pe,"P",{class:!0});var Ve=_(S);U=q(Ve,M),Ve.forEach(c),Pe.forEach(c),z=E(Ce),P=f(Ce,"DIV",{});var Ne=_(P);v=f(Ne,"LABEL",{class:!0,"data-svelte-h":!0}),le(v)!=="svelte-1nfvb9q"&&(v.textContent=R),C=E(Ne),$.l(Ne),Ne.forEach(c),T=E(Ce),A=f(Ce,"DIV",{});var Se=_(A);O=f(Se,"LABEL",{class:!0,"data-svelte-h":!0}),le(O)!=="svelte-1ixh3gc"&&(O.textContent=se),ae=E(Se),ce.l(Se),Se.forEach(c),me=E(Ce),oe=f(Ce,"DIV",{});var Te=_(oe);L=f(Te,"LABEL",{class:!0,"data-svelte-h":!0}),le(L)!=="svelte-wqg2kn"&&(L.textContent=G),re=E(Te),H.l(Te),Te.forEach(c),Ce.forEach(c),Ee.forEach(c),Me.forEach(c),be.forEach(c),ie=E(ke),de=f(ke,"DIV",{class:!0});var Le=_(de);Q.l(Le),fe=E(Le),J=f(Le,"BUTTON",{type:!0,class:!0});var Ie=_(J);_e=q(Ie,ue),Ie.forEach(c),Le.forEach(c),ke.forEach(c),ee.forEach(c),B.forEach(c),this.h()},h(){r(e,"class","fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity z-40"),r(m,"class","text-lg font-medium leading-6 text-gray-900 mb-4"),r(b,"class","block text-sm font-medium text-gray-700"),r(S,"class","mt-1 text-sm text-gray-900"),r(v,"class","block text-sm font-medium text-gray-700"),r(O,"class","block text-sm font-medium text-gray-700"),r(L,"class","block text-sm font-medium text-gray-700"),r(x,"class","space-y-4"),r(u,"class","mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"),r(h,"class","sm:flex sm:items-start"),r(i,"class","bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"),r(J,"type","button"),r(J,"class","mt-3 inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"),r(de,"class","bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"),r(o,"class","relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"),r(s,"class","flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"),r(n,"class","fixed inset-0 z-50 overflow-y-auto")},m(g,B){X(g,e,B),X(g,t,B),X(g,n,B),a(n,s),a(s,o),a(o,i),a(i,h),a(h,u),a(u,m),a(m,y),a(u,D),F&&F.m(u,null),a(u,I),a(u,x),a(x,N),a(N,b),a(N,V),a(N,S),a(S,U),a(x,z),a(x,P),a(P,v),a(P,C),$.m(P,null),a(x,T),a(x,A),a(A,O),a(A,ae),ce.m(A,null),a(x,me),a(x,oe),a(oe,L),a(oe,re),H.m(oe,null),a(o,ie),a(o,de),Q.m(de,null),a(de,fe),a(de,J),a(J,_e),Y||(K=W(J,"click",l[7]),Y=!0)},p(g,B){B&1&&p!==(p=g[0]==="view"?"Payment Details":"Edit Payment")&&ne(y,p),g[4]?F?F.p(g,B):(F=pt(g),F.c(),F.m(u,I)):F&&(F.d(1),F=null),B&4&&M!==(M=g[2]?.cessionClientName+"")&&ne(U,M),ge===(ge=we(g))&&$?$.p(g,B):($.d(1),$=ge(g),$&&($.c(),$.m(P,null))),pe===(pe=ve(g))&&ce?ce.p(g,B):(ce.d(1),ce=pe(g),ce&&(ce.c(),ce.m(A,null))),Z===(Z=De(g))&&H?H.p(g,B):(H.d(1),H=Z(g),H&&(H.c(),H.m(oe,null))),xe===(xe=te(g))&&Q?Q.p(g,B):(Q.d(1),Q=xe(g),Q&&(Q.c(),Q.m(de,fe))),B&1&&ue!==(ue=g[0]==="edit"?"Cancel":"Close")&&ne(_e,ue)},d(g){g&&(c(e),c(t),c(n)),F&&F.d(),$.d(),ce.d(),H.d(),Q.d(),Y=!1,K()}}}function pt(l){let e,t;return{c(){e=d("div"),t=j(l[4]),this.h()},l(n){e=f(n,"DIV",{class:!0});var s=_(e);t=q(s,l[4]),s.forEach(c),this.h()},h(){r(e,"class","mb-4 p-4 bg-red-50 text-red-700 rounded-lg")},m(n,s){X(n,e,s),a(e,t)},p(n,s){s&16&&ne(t,n[4])},d(n){n&&c(e)}}}function Ut(l){let e,t=Ae(l[2]?.amount)+"",n;return{c(){e=d("p"),n=j(t),this.h()},l(s){e=f(s,"P",{class:!0});var o=_(e);n=q(o,t),o.forEach(c),this.h()},h(){r(e,"class","mt-1 text-sm text-gray-900")},m(s,o){X(s,e,o),a(e,n)},p(s,o){o&4&&t!==(t=Ae(s[2]?.amount)+"")&&ne(n,t)},d(s){s&&c(e)}}}function Ft(l){let e,t,n;return{c(){e=d("input"),this.h()},l(s){e=f(s,"INPUT",{type:!0,class:!0}),this.h()},h(){r(e,"type","number"),r(e,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm")},m(s,o){X(s,e,o),he(e,l[3].amount),t||(n=W(e,"input",l[9]),t=!0)},p(s,o){o&8&&He(e.value)!==s[3].amount&&he(e,s[3].amount)},d(s){s&&c(e),t=!1,n()}}}function Ot(l){let e,t=We(l[2]?.paymentDate)+"",n;return{c(){e=d("p"),n=j(t),this.h()},l(s){e=f(s,"P",{class:!0});var o=_(e);n=q(o,t),o.forEach(c),this.h()},h(){r(e,"class","mt-1 text-sm text-gray-900")},m(s,o){X(s,e,o),a(e,n)},p(s,o){o&4&&t!==(t=We(s[2]?.paymentDate)+"")&&ne(n,t)},d(s){s&&c(e)}}}function Ht(l){let e,t,n;return{c(){e=d("input"),this.h()},l(s){e=f(s,"INPUT",{type:!0,class:!0}),this.h()},h(){r(e,"type","date"),r(e,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm")},m(s,o){X(s,e,o),he(e,l[3].paymentDate),t||(n=W(e,"input",l[10]),t=!0)},p(s,o){o&8&&he(e,s[3].paymentDate)},d(s){s&&c(e),t=!1,n()}}}function jt(l){let e,t=(l[2]?.notes||"No notes")+"",n;return{c(){e=d("p"),n=j(t),this.h()},l(s){e=f(s,"P",{class:!0});var o=_(e);n=q(o,t),o.forEach(c),this.h()},h(){r(e,"class","mt-1 text-sm text-gray-900")},m(s,o){X(s,e,o),a(e,n)},p(s,o){o&4&&t!==(t=(s[2]?.notes||"No notes")+"")&&ne(n,t)},d(s){s&&c(e)}}}function qt(l){let e,t,n;return{c(){e=d("textarea"),this.h()},l(s){e=f(s,"TEXTAREA",{class:!0,rows:!0}),_(e).forEach(c),this.h()},h(){r(e,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"),r(e,"rows","3")},m(s,o){X(s,e,o),he(e,l[3].notes),t||(n=W(e,"input",l[11]),t=!0)},p(s,o){o&8&&he(e,s[3].notes)},d(s){s&&c(e),t=!1,n()}}}function zt(l){let e,t=l[5]?"Saving...":"Save Changes",n,s,o;return{c(){e=d("button"),n=j(t),this.h()},l(i){e=f(i,"BUTTON",{type:!0,class:!0});var h=_(e);n=q(h,t),h.forEach(c),this.h()},h(){r(e,"type","button"),r(e,"class","inline-flex justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"),e.disabled=l[5]},m(i,h){X(i,e,h),a(e,n),s||(o=W(e,"click",l[6]),s=!0)},p(i,h){h&32&&t!==(t=i[5]?"Saving...":"Save Changes")&&ne(n,t),h&32&&(e.disabled=i[5])},d(i){i&&c(e),s=!1,o()}}}function Rt(l){let e,t="Edit",n,s,o=l[5]?"Deleting...":"Delete",i,h,u;return{c(){e=d("button"),e.textContent=t,n=k(),s=d("button"),i=j(o),this.h()},l(m){e=f(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1l3ow49"&&(e.textContent=t),n=E(m),s=f(m,"BUTTON",{type:!0,class:!0});var p=_(s);i=q(p,o),p.forEach(c),this.h()},h(){r(e,"type","button"),r(e,"class","inline-flex justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"),r(s,"type","button"),r(s,"class","inline-flex justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"),s.disabled=l[5]},m(m,p){X(m,e,p),X(m,n,p),X(m,s,p),a(s,i),h||(u=[W(e,"click",l[12]),W(s,"click",l[8])],h=!0)},p(m,p){p&32&&o!==(o=m[5]?"Deleting...":"Delete")&&ne(i,o),p&32&&(s.disabled=m[5])},d(m){m&&(c(e),c(n),c(s)),h=!1,qe(u)}}}function Yt(l){let e,t=l[1]&&ht(l);return{c(){t&&t.c(),e=at()},l(n){t&&t.l(n),e=at()},m(n,s){t&&t.m(n,s),X(n,e,s)},p(n,[s]){n[1]?t?t.p(n,s):(t=ht(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ye,o:ye,d(n){n&&c(e),t&&t.d(n)}}}function Kt(l,e,t){let{show:n=!1}=e,{payment:s=null}=e,{mode:o="view"}=e;const i=_t();let h={},u="",m=!1;async function p(){try{t(5,m=!0),t(4,u=""),i("save",h),t(1,n=!1)}catch(w){t(4,u=w.message)}finally{t(5,m=!1)}}function y(){t(1,n=!1),t(4,u=""),i("close")}async function D(){if(confirm("Are you sure you want to delete this payment?"))try{t(5,m=!0),t(4,u=""),i("delete",s),t(1,n=!1)}catch(w){t(4,u=w.message)}finally{t(5,m=!1)}}function I(){h.amount=He(this.value),t(3,h),t(2,s),t(0,o)}function x(){h.paymentDate=this.value,t(3,h),t(2,s),t(0,o)}function N(){h.notes=this.value,t(3,h),t(2,s),t(0,o)}const b=()=>t(0,o="edit");return l.$$set=w=>{"show"in w&&t(1,n=w.show),"payment"in w&&t(2,s=w.payment),"mode"in w&&t(0,o=w.mode)},l.$$.update=()=>{l.$$.dirty&5&&s&&o==="edit"&&t(3,h={...s})},[o,n,s,h,u,m,p,y,D,I,x,N,b]}class Xt extends ze{constructor(e){super(),Re(this,e,Kt,Yt,je,{show:1,payment:2,mode:0})}}function Gt(l){let e,t,n,s,o,i,h;return t=new St({props:{payments:l[0]}}),s=new At({props:{onFilterChange:l[11]}}),i=new Mt({props:{payments:l[1],currentPage:l[4],totalPages:l[5],onPageChange:l[13],onSort:l[12],sortField:l[6],sortOrder:l[7]}}),i.$on("action",l[14]),{c(){e=d("div"),Xe(t.$$.fragment),n=k(),Xe(s.$$.fragment),o=k(),Xe(i.$$.fragment),this.h()},l(u){e=f(u,"DIV",{class:!0});var m=_(e);Ge(t.$$.fragment,m),n=E(m),Ge(s.$$.fragment,m),o=E(m),Ge(i.$$.fragment,m),m.forEach(c),this.h()},h(){r(e,"class","space-y-6")},m(u,m){X(u,e,m),Je(t,e,null),a(e,n),Je(s,e,null),a(e,o),Je(i,e,null),h=!0},p(u,m){const p={};m&1&&(p.payments=u[0]),t.$set(p);const y={};m&2&&(y.payments=u[1]),m&16&&(y.currentPage=u[4]),m&32&&(y.totalPages=u[5]),m&64&&(y.sortField=u[6]),m&128&&(y.sortOrder=u[7]),i.$set(y)},i(u){h||(Oe(t.$$.fragment,u),Oe(s.$$.fragment,u),Oe(i.$$.fragment,u),h=!0)},o(u){Fe(t.$$.fragment,u),Fe(s.$$.fragment,u),Fe(i.$$.fragment,u),h=!1},d(u){u&&c(e),Qe(t),Qe(s),Qe(i)}}}function Jt(l){let e,t,n,s='<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',o,i,h,u;return{c(){e=d("div"),t=d("div"),n=d("div"),n.innerHTML=s,o=k(),i=d("div"),h=d("p"),u=j(l[3]),this.h()},l(m){e=f(m,"DIV",{class:!0});var p=_(e);t=f(p,"DIV",{class:!0});var y=_(t);n=f(y,"DIV",{class:!0,"data-svelte-h":!0}),le(n)!=="svelte-mukaun"&&(n.innerHTML=s),o=E(y),i=f(y,"DIV",{class:!0});var D=_(i);h=f(D,"P",{class:!0});var I=_(h);u=q(I,l[3]),I.forEach(c),D.forEach(c),y.forEach(c),p.forEach(c),this.h()},h(){r(n,"class","flex-shrink-0"),r(h,"class","text-sm text-red-700"),r(i,"class","ml-3"),r(t,"class","flex"),r(e,"class","bg-red-50 border-l-4 border-red-400 p-4")},m(m,p){X(m,e,p),a(e,t),a(t,n),a(t,o),a(t,i),a(i,h),a(h,u)},p(m,p){p&8&&ne(u,m[3])},i:ye,o:ye,d(m){m&&c(e)}}}function Qt(l){let e,t='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(n){e=f(n,"DIV",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-13v74tx"&&(e.innerHTML=t),this.h()},h(){r(e,"class","flex justify-center items-center h-64")},m(n,s){X(n,e,s)},p:ye,i:ye,o:ye,d(n){n&&c(e)}}}function Wt(l){let e,t,n="Payments",s,o,i,h,u,m,p;const y=[Qt,Jt,Gt],D=[];function I(b,w){return b[2]?0:b[3]?1:2}o=I(l),i=D[o]=y[o](l);function x(b){l[17](b)}let N={payment:l[9],mode:l[10]};return l[8]!==void 0&&(N.show=l[8]),u=new Xt({props:N}),vt.push(()=>xt(u,"show",x)),u.$on("save",l[15]),u.$on("delete",l[16]),u.$on("close",l[18]),{c(){e=d("div"),t=d("h1"),t.textContent=n,s=k(),i.c(),h=k(),Xe(u.$$.fragment),this.h()},l(b){e=f(b,"DIV",{class:!0});var w=_(e);t=f(w,"H1",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-fv8r07"&&(t.textContent=n),s=E(w),i.l(w),w.forEach(c),h=E(b),Ge(u.$$.fragment,b),this.h()},h(){r(t,"class","text-3xl font-bold text-gray-900 mb-8"),r(e,"class","container mx-auto px-4 py-8")},m(b,w){X(b,e,w),a(e,t),a(e,s),D[o].m(e,null),X(b,h,w),Je(u,b,w),p=!0},p(b,[w]){let V=o;o=I(b),o===V?D[o].p(b,w):(Dt(),Fe(D[V],1,1,()=>{D[V]=null}),Ct(),i=D[o],i?i.p(b,w):(i=D[o]=y[o](b),i.c()),Oe(i,1),i.m(e,null));const S={};w&512&&(S.payment=b[9]),w&1024&&(S.mode=b[10]),!m&&w&256&&(m=!0,S.show=b[8],bt(()=>m=!1)),u.$set(S)},i(b){p||(Oe(i),Oe(u.$$.fragment,b),p=!0)},o(b){Fe(i),Fe(u.$$.fragment,b),p=!1},d(b){b&&(c(e),c(h)),D[o].d(),Qe(u,b)}}}function Zt(l,e,t){let n;yt(l,Et,C=>t(20,n=C));let s=[],o=[],i=!0,h=null,u=1,m=1,p="",y="asc",D={startDate:null,endDate:null,minAmount:null,maxAmount:null,clientSearch:""},I=!1,x=null,N="view";wt(async()=>{const C=n;if(!C||C.role!=="ADMIN"){Be("You do not have permission to access this page","error"),kt("/");return}await b()});async function b(){try{t(2,i=!0),t(3,h=null);const C=await $e.getAllPayments();C.success?(t(0,s=C.data),V()):t(3,h=C.error)}catch(C){t(3,h=C.message)}finally{t(2,i=!1)}}function w(C){D={...D,...C},V()}function V(){t(1,o=s.filter(T=>!(D.clientSearch&&!T.cessionClientName.toLowerCase().includes(D.clientSearch.toLowerCase())||D.startDate&&new Date(T.paymentDate)<new Date(D.startDate)||D.endDate&&new Date(T.paymentDate)>new Date(D.endDate)||D.minAmount&&T.amount<D.minAmount||D.maxAmount&&T.amount>D.maxAmount))),p&&o.sort((T,A)=>{let O=0;return p==="cessionClientName"?O=T.cessionClientName.localeCompare(A.cessionClientName):p==="amount"?O=T.amount-A.amount:p==="paymentDate"&&(O=new Date(T.paymentDate)-new Date(A.paymentDate)),y==="asc"?O:-O}),t(5,m=Math.ceil(o.length/10)),t(4,u=Math.min(u,m));const C=(u-1)*10;t(1,o=o.slice(C,C+10))}function S(C){p===C?t(7,y=y==="asc"?"desc":"asc"):(t(6,p=C),t(7,y="asc")),V()}function M(C){t(4,u=C),V()}function U(C){const{type:T,payment:A}=C.detail;T==="delete"?P(A):(t(9,x=A),t(10,N=T),t(8,I=!0))}async function z(C){const T=C.detail;try{const A=await $e.update(T.id,T);A.success?(Be("Payment updated successfully","success"),await b()):Be(A.error||"Failed to update payment","error")}catch(A){Be(A.message||"Failed to update payment","error")}}async function P(C){try{const T=await $e.delete(C.id);T.success?(Be("Payment deleted successfully","success"),await b()):Be(T.error||"Failed to delete payment","error")}catch(T){Be(T.message||"Failed to delete payment","error")}}function v(C){I=C,t(8,I)}return[s,o,i,h,u,m,p,y,I,x,N,w,S,M,U,z,P,v,()=>t(8,I=!1)]}class os extends ze{constructor(e){super(),Re(this,e,Zt,Wt,je,{})}}export{os as component};
