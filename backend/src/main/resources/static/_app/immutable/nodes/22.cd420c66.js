import{s as tr,f as o,l as m,a as D,g as i,h as u,m as b,d as n,c as E,y as lr,j as d,L as F,x as hl,i as Ut,w as l,M as Ie,z as Se,n as y,P as wl,I as za,K as Qa,H as ar,u as Ba,o as rr,A as ml,v as sr,N as bl,p as nr,e as Wa}from"../chunks/scheduler.55755e91.js";import{e as Dl}from"../chunks/each.8720bd6f.js";import{S as or,i as ir}from"../chunks/index.d2ed93bc.js";import{b as Xl}from"../chunks/api.20dd9789.js";import{s as fe,l as Vt}from"../chunks/navigation.fbd60083.js";import"../chunks/paths.452213a7.js";import{C as ur}from"../chunks/auto.c1974a99.js";import{t as cr}from"../chunks/index.7dc5fa01.js";import{r as pe,t as ea,e as Ne,g as Ga,f as El}from"../chunks/index.7c030542.js";function dr(t,e){var a,r,s,c,v,g,h,w;pe(1,arguments);var I=Ga(),N=ea((a=(r=(s=(c=e?.weekStartsOn)!==null&&c!==void 0?c:e==null||(v=e.locale)===null||v===void 0||(g=v.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&s!==void 0?s:I.weekStartsOn)!==null&&r!==void 0?r:(h=I.locale)===null||h===void 0||(w=h.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&a!==void 0?a:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var O=Ne(t),P=O.getDay(),M=(P<N?7:0)+P-N;return O.setDate(O.getDate()-M),O.setHours(0,0,0,0),O}function fr(t){pe(1,arguments);var e=Ne(t);return e.setHours(0,0,0,0),e}var Xa=6e4,$a=36e5;function vr(t){pe(1,arguments);var e=Ne(t);return e.setHours(23,59,59,999),e}function pr(t){pe(1,arguments);var e=Ne(t),a=e.getMonth();return e.setFullYear(e.getFullYear(),a+1,0),e.setHours(23,59,59,999),e}function _r(t){pe(1,arguments);var e=Ne(t);return e.setDate(1),e.setHours(0,0,0,0),e}function gr(t){pe(1,arguments);var e=Ne(t),a=e.getFullYear();return e.setFullYear(a+1,0,0),e.setHours(23,59,59,999),e}function hr(t){pe(1,arguments);var e=Ne(t),a=new Date(0);return a.setFullYear(e.getFullYear(),0,1),a.setHours(0,0,0,0),a}function mr(t,e){var a,r,s,c,v,g,h,w;pe(1,arguments);var I=Ga(),N=ea((a=(r=(s=(c=e?.weekStartsOn)!==null&&c!==void 0?c:e==null||(v=e.locale)===null||v===void 0||(g=v.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&s!==void 0?s:I.weekStartsOn)!==null&&r!==void 0?r:(h=I.locale)===null||h===void 0||(w=h.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&a!==void 0?a:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var O=Ne(t),P=O.getDay(),M=(P<N?-7:0)+6-(P-N);return O.setDate(O.getDate()+M),O.setHours(23,59,59,999),O}function dt(t,e){var a;pe(1,arguments);var r=ea((a=e?.additionalDigits)!==null&&a!==void 0?a:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var s=Dr(t),c;if(s.date){var v=Er(s.date,r);c=Tr(v.restDateString,v.year)}if(!c||isNaN(c.getTime()))return new Date(NaN);var g=c.getTime(),h=0,w;if(s.time&&(h=Or(s.time),isNaN(h)))return new Date(NaN);if(s.timezone){if(w=kr(s.timezone),isNaN(w))return new Date(NaN)}else{var I=new Date(g+h),N=new Date(0);return N.setFullYear(I.getUTCFullYear(),I.getUTCMonth(),I.getUTCDate()),N.setHours(I.getUTCHours(),I.getUTCMinutes(),I.getUTCSeconds(),I.getUTCMilliseconds()),N}return new Date(g+h+w)}var yl={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},br=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,yr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,wr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Dr(t){var e={},a=t.split(yl.dateTimeDelimiter),r;if(a.length>2)return e;if(/:/.test(a[0])?r=a[0]:(e.date=a[0],r=a[1],yl.timeZoneDelimiter.test(e.date)&&(e.date=t.split(yl.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){var s=yl.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function Er(t,e){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(a);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,c=r[2]?parseInt(r[2]):null;return{year:c===null?s:c*100,restDateString:t.slice((r[1]||r[2]).length)}}function Tr(t,e){if(e===null)return new Date(NaN);var a=t.match(br);if(!a)return new Date(NaN);var r=!!a[4],s=Ht(a[1]),c=Ht(a[2])-1,v=Ht(a[3]),g=Ht(a[4]),h=Ht(a[5])-1;if(r)return Cr(e,g,h)?Ir(e,g,h):new Date(NaN);var w=new Date(0);return!Nr(e,c,v)||!Pr(e,s)?new Date(NaN):(w.setUTCFullYear(e,c,Math.max(s,v)),w)}function Ht(t){return t?parseInt(t):1}function Or(t){var e=t.match(yr);if(!e)return NaN;var a=$l(e[1]),r=$l(e[2]),s=$l(e[3]);return Ar(a,r,s)?a*$a+r*Xa+s*1e3:NaN}function $l(t){return t&&parseFloat(t.replace(",","."))||0}function kr(t){if(t==="Z")return 0;var e=t.match(wr);if(!e)return 0;var a=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return Mr(r,s)?a*(r*$a+s*Xa):NaN}function Ir(t,e,a){var r=new Date(0);r.setUTCFullYear(t,0,4);var s=r.getUTCDay()||7,c=(e-1)*7+a+1-s;return r.setUTCDate(r.getUTCDate()+c),r}var Sr=[31,null,31,30,31,30,31,31,30,31,30,31];function er(t){return t%400===0||t%4===0&&t%100!==0}function Nr(t,e,a){return e>=0&&e<=11&&a>=1&&a<=(Sr[e]||(er(t)?29:28))}function Pr(t,e){return e>=1&&e<=(er(t)?366:365)}function Cr(t,e,a){return e>=1&&e<=53&&a>=0&&a<=6}function Ar(t,e,a){return t===24?e===0&&a===0:a>=0&&a<60&&e>=0&&e<60&&t>=0&&t<25}function Mr(t,e){return e>=0&&e<=59}function Za(t,e,a){const r=t.slice();return r[36]=e[a],r}function ja(t,e,a){const r=t.slice();return r[39]=e[a],r}function Ja(t){let e,a=t[39].name+"",r,s;return{c(){e=o("option"),r=m(a),this.h()},l(c){e=i(c,"OPTION",{});var v=u(e);r=b(v,a),v.forEach(n),this.h()},h(){e.__value=s=t[39],F(e,e.__value)},m(c,v){Ut(c,e,v),l(e,r)},p(c,v){v[0]&2048&&a!==(a=c[39].name+"")&&y(r,a),v[0]&2048&&s!==(s=c[39])&&(e.__value=s,F(e,e.__value))},d(c){c&&n(e)}}}function Vr(t){let e,a=Dl(t[2]),r=[];for(let s=0;s<a.length;s+=1)r[s]=Ka(Za(t,a,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Wa()},l(s){for(let c=0;c<r.length;c+=1)r[c].l(s);e=Wa()},m(s,c){for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(s,c);Ut(s,e,c)},p(s,c){if(c[0]&4){a=Dl(s[2]);let v;for(v=0;v<a.length;v+=1){const g=Za(s,a,v);r[v]?r[v].p(g,c):(r[v]=Ka(g),r[v].c(),r[v].m(e.parentNode,e))}for(;v<r.length;v+=1)r[v].d(1);r.length=a.length}},d(s){s&&n(e),Qa(r,s)}}}function Hr(t){let e,a,r=t[12]("selling.recent_sales.no_sales")+"",s;return{c(){e=o("tr"),a=o("td"),s=m(r),this.h()},l(c){e=i(c,"TR",{});var v=u(e);a=i(v,"TD",{colspan:!0,class:!0});var g=u(a);s=b(g,r),g.forEach(n),v.forEach(n),this.h()},h(){d(a,"colspan","5"),d(a,"class","px-6 py-4 text-center text-gray-500")},m(c,v){Ut(c,e,v),l(e,a),l(a,s)},p(c,v){v[0]&4096&&r!==(r=c[12]("selling.recent_sales.no_sales")+"")&&y(s,r)},d(c){c&&n(e)}}}function Ka(t){let e,a,r=El(dt(t[36].createdAt),"PPp")+"",s,c,v,g=t[36].productName+"",h,w,I,N=t[36].quantity+"",O,P,M,S=ve(t[36].sellingPriceAtSale)+"",R,B,A,C=ve(t[36].profit)+"",Y,j;return{c(){e=o("tr"),a=o("td"),s=m(r),c=D(),v=o("td"),h=m(g),w=D(),I=o("td"),O=m(N),P=D(),M=o("td"),R=m(S),B=D(),A=o("td"),Y=m(C),j=D(),this.h()},l(q){e=i(q,"TR",{});var T=u(e);a=i(T,"TD",{class:!0});var J=u(a);s=b(J,r),J.forEach(n),c=E(T),v=i(T,"TD",{class:!0});var ie=u(v);h=b(ie,g),ie.forEach(n),w=E(T),I=i(T,"TD",{class:!0});var W=u(I);O=b(W,N),W.forEach(n),P=E(T),M=i(T,"TD",{class:!0});var ee=u(M);R=b(ee,S),ee.forEach(n),B=E(T),A=i(T,"TD",{class:!0});var ue=u(A);Y=b(ue,C),ue.forEach(n),j=E(T),T.forEach(n),this.h()},h(){d(a,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),d(v,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),d(I,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),d(M,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),d(A,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900")},m(q,T){Ut(q,e,T),l(e,a),l(a,s),l(e,c),l(e,v),l(v,h),l(e,w),l(e,I),l(I,O),l(e,P),l(e,M),l(M,R),l(e,B),l(e,A),l(A,Y),l(e,j)},p(q,T){T[0]&4&&r!==(r=El(dt(q[36].createdAt),"PPp")+"")&&y(s,r),T[0]&4&&g!==(g=q[36].productName+"")&&y(h,g),T[0]&4&&N!==(N=q[36].quantity+"")&&y(O,N),T[0]&4&&S!==(S=ve(q[36].sellingPriceAtSale)+"")&&y(R,S),T[0]&4&&C!==(C=ve(q[36].profit)+"")&&y(Y,C)},d(q){q&&n(e)}}}function Ur(t){let e,a,r,s,c=t[12]("selling.title")+"",v,g,h,w=t[12]("selling.subtitle")+"",I,N,O,P,M,S,R,B,A,C,Y,j=t[12]("selling.time_range.today")+"",q,T,J=t[12]("selling.time_range.week")+"",ie,W,ee=t[12]("selling.time_range.month")+"",ue,te,Pe=t[12]("selling.time_range.year")+"",qe,le,Ce=t[12]("selling.time_range.all")+"",xe,ft,_,k,H,V=t[12]("selling.stats.total_profit")+"",x,z,_e,ae=ve(t[8].totalProfit)+"",qt,Tl,ge,Fe,vt=t[12]("selling.stats.total_sales")+"",xt,Ol,Le,pt=t[8].totalSales+"",Ft,kl,he,Ye,_t=t[12]("selling.stats.average_profit")+"",Lt,Il,Re,gt=ve(t[8].averageProfit)+"",Yt,Sl,me,be,ze,ht=t[12]("selling.chart.title")+"",Rt,Nl,ye,Q,we,mt=t[12]("selling.chart.type.line")+"",zt,De,bt=t[12]("selling.chart.type.bar")+"",Bt,Pl,Be,G,Ee,yt=t[12]("selling.chart.export.csv")+"",Wt,Te,wt=t[12]("selling.chart.export.excel")+"",Zt,Cl,We,Dt,Al,re,Ze,Et=t[12]("selling.sell_product.title")+"",jt,Ml,se,Ae,je,Tt=t[12]("selling.sell_product.select_product")+"",Jt,Vl,K,ce,ta="Select a product",Hl,Me,Je,Ot=t[12]("selling.sell_product.quantity")+"",Kt,Ul,ne,ql,Ve,Ke,kt=t[12]("selling.sell_product.selling_price")+"",Qt,xl,X,Fl,Qe,de,It=t[12]("selling.sell_product.submit")+"",Gt,Ll,Oe,Ge,Xe,St=t[12]("selling.recent_sales.title")+"",Xt,Yl,$e,ke,et,Z,tt,Nt=t[12]("selling.recent_sales.columns.date")+"",$t,Rl,lt,Pt=t[12]("selling.recent_sales.columns.product")+"",el,zl,at,Ct=t[12]("selling.recent_sales.columns.quantity")+"",tl,Bl,rt,At=t[12]("selling.recent_sales.columns.price")+"",ll,Wl,st,Mt=t[12]("selling.recent_sales.columns.profit")+"",al,Zl,He,jl,la,nt=Dl(t[11]),L=[];for(let f=0;f<nt.length;f+=1)L[f]=Ja(ja(t,nt,f));function aa(f,p){return f[2].length===0?Hr:Vr}let rl=aa(t),$=rl(t);return{c(){e=o("div"),a=o("div"),r=o("div"),s=o("h1"),v=m(c),g=D(),h=o("p"),I=m(w),N=D(),O=o("div"),P=o("div"),M=o("div"),S=o("input"),B=D(),A=o("div"),C=o("select"),Y=o("option"),q=m(j),T=o("option"),ie=m(J),W=o("option"),ue=m(ee),te=o("option"),qe=m(Pe),le=o("option"),xe=m(Ce),ft=D(),_=o("div"),k=o("div"),H=o("h3"),x=m(V),z=D(),_e=o("p"),qt=m(ae),Tl=D(),ge=o("div"),Fe=o("h3"),xt=m(vt),Ol=D(),Le=o("p"),Ft=m(pt),kl=D(),he=o("div"),Ye=o("h3"),Lt=m(_t),Il=D(),Re=o("p"),Yt=m(gt),Sl=D(),me=o("div"),be=o("div"),ze=o("h2"),Rt=m(ht),Nl=D(),ye=o("div"),Q=o("select"),we=o("option"),zt=m(mt),De=o("option"),Bt=m(bt),Pl=D(),Be=o("div"),G=o("select"),Ee=o("option"),Wt=m(yt),Te=o("option"),Zt=m(wt),Cl=D(),We=o("div"),Dt=o("canvas"),Al=D(),re=o("div"),Ze=o("h2"),jt=m(Et),Ml=D(),se=o("div"),Ae=o("div"),je=o("label"),Jt=m(Tt),Vl=D(),K=o("select"),ce=o("option"),ce.textContent=ta;for(let f=0;f<L.length;f+=1)L[f].c();Hl=D(),Me=o("div"),Je=o("label"),Kt=m(Ot),Ul=D(),ne=o("input"),ql=D(),Ve=o("div"),Ke=o("label"),Qt=m(kt),xl=D(),X=o("input"),Fl=D(),Qe=o("div"),de=o("button"),Gt=m(It),Ll=D(),Oe=o("div"),Ge=o("div"),Xe=o("h2"),Xt=m(St),Yl=D(),$e=o("div"),ke=o("table"),et=o("thead"),Z=o("tr"),tt=o("th"),$t=m(Nt),Rl=D(),lt=o("th"),el=m(Pt),zl=D(),at=o("th"),tl=m(Ct),Bl=D(),rt=o("th"),ll=m(At),Wl=D(),st=o("th"),al=m(Mt),Zl=D(),He=o("tbody"),$.c(),this.h()},l(f){e=i(f,"DIV",{class:!0});var p=u(e);a=i(p,"DIV",{class:!0});var U=u(a);r=i(U,"DIV",{});var Ue=u(r);s=i(Ue,"H1",{class:!0});var ra=u(s);v=b(ra,c),ra.forEach(n),g=E(Ue),h=i(Ue,"P",{class:!0});var sa=u(h);I=b(sa,w),sa.forEach(n),Ue.forEach(n),U.forEach(n),N=E(p),O=i(p,"DIV",{class:!0});var na=u(O);P=i(na,"DIV",{class:!0});var sl=u(P);M=i(sl,"DIV",{class:!0});var oa=u(M);S=i(oa,"INPUT",{type:!0,placeholder:!0,class:!0}),oa.forEach(n),B=E(sl),A=i(sl,"DIV",{class:!0});var ia=u(A);C=i(ia,"SELECT",{class:!0});var ot=u(C);Y=i(ot,"OPTION",{});var ua=u(Y);q=b(ua,j),ua.forEach(n),T=i(ot,"OPTION",{});var ca=u(T);ie=b(ca,J),ca.forEach(n),W=i(ot,"OPTION",{});var da=u(W);ue=b(da,ee),da.forEach(n),te=i(ot,"OPTION",{});var fa=u(te);qe=b(fa,Pe),fa.forEach(n),le=i(ot,"OPTION",{});var va=u(le);xe=b(va,Ce),va.forEach(n),ot.forEach(n),ia.forEach(n),sl.forEach(n),na.forEach(n),ft=E(p),_=i(p,"DIV",{class:!0});var it=u(_);k=i(it,"DIV",{class:!0});var nl=u(k);H=i(nl,"H3",{class:!0});var pa=u(H);x=b(pa,V),pa.forEach(n),z=E(nl),_e=i(nl,"P",{class:!0});var _a=u(_e);qt=b(_a,ae),_a.forEach(n),nl.forEach(n),Tl=E(it),ge=i(it,"DIV",{class:!0});var ol=u(ge);Fe=i(ol,"H3",{class:!0});var ga=u(Fe);xt=b(ga,vt),ga.forEach(n),Ol=E(ol),Le=i(ol,"P",{class:!0});var ha=u(Le);Ft=b(ha,pt),ha.forEach(n),ol.forEach(n),kl=E(it),he=i(it,"DIV",{class:!0});var il=u(he);Ye=i(il,"H3",{class:!0});var ma=u(Ye);Lt=b(ma,_t),ma.forEach(n),Il=E(il),Re=i(il,"P",{class:!0});var ba=u(Re);Yt=b(ba,gt),ba.forEach(n),il.forEach(n),it.forEach(n),Sl=E(p),me=i(p,"DIV",{class:!0});var ul=u(me);be=i(ul,"DIV",{class:!0});var cl=u(be);ze=i(cl,"H2",{class:!0});var ya=u(ze);Rt=b(ya,ht),ya.forEach(n),Nl=E(cl),ye=i(cl,"DIV",{class:!0});var dl=u(ye);Q=i(dl,"SELECT",{class:!0});var Jl=u(Q);we=i(Jl,"OPTION",{});var wa=u(we);zt=b(wa,mt),wa.forEach(n),De=i(Jl,"OPTION",{});var Da=u(De);Bt=b(Da,bt),Da.forEach(n),Jl.forEach(n),Pl=E(dl),Be=i(dl,"DIV",{class:!0});var Ea=u(Be);G=i(Ea,"SELECT",{class:!0});var Kl=u(G);Ee=i(Kl,"OPTION",{});var Ta=u(Ee);Wt=b(Ta,yt),Ta.forEach(n),Te=i(Kl,"OPTION",{});var Oa=u(Te);Zt=b(Oa,wt),Oa.forEach(n),Kl.forEach(n),Ea.forEach(n),dl.forEach(n),cl.forEach(n),Cl=E(ul),We=i(ul,"DIV",{class:!0});var ka=u(We);Dt=i(ka,"CANVAS",{}),u(Dt).forEach(n),ka.forEach(n),ul.forEach(n),Al=E(p),re=i(p,"DIV",{class:!0});var ut=u(re);Ze=i(ut,"H2",{class:!0});var Ia=u(Ze);jt=b(Ia,Et),Ia.forEach(n),Ml=E(ut),se=i(ut,"DIV",{class:!0});var ct=u(se);Ae=i(ct,"DIV",{});var fl=u(Ae);je=i(fl,"LABEL",{class:!0});var Sa=u(je);Jt=b(Sa,Tt),Sa.forEach(n),Vl=E(fl),K=i(fl,"SELECT",{class:!0});var Ql=u(K);ce=i(Ql,"OPTION",{"data-svelte-h":!0}),lr(ce)!=="svelte-18pv585"&&(ce.textContent=ta);for(let Gl=0;Gl<L.length;Gl+=1)L[Gl].l(Ql);Ql.forEach(n),fl.forEach(n),Hl=E(ct),Me=i(ct,"DIV",{});var vl=u(Me);Je=i(vl,"LABEL",{class:!0});var Na=u(Je);Kt=b(Na,Ot),Na.forEach(n),Ul=E(vl),ne=i(vl,"INPUT",{type:!0,min:!0,class:!0}),vl.forEach(n),ql=E(ct),Ve=i(ct,"DIV",{});var pl=u(Ve);Ke=i(pl,"LABEL",{class:!0});var Pa=u(Ke);Qt=b(Pa,kt),Pa.forEach(n),xl=E(pl),X=i(pl,"INPUT",{type:!0,min:!0,step:!0,class:!0}),pl.forEach(n),ct.forEach(n),Fl=E(ut),Qe=i(ut,"DIV",{class:!0});var Ca=u(Qe);de=i(Ca,"BUTTON",{class:!0});var Aa=u(de);Gt=b(Aa,It),Aa.forEach(n),Ca.forEach(n),ut.forEach(n),Ll=E(p),Oe=i(p,"DIV",{class:!0});var _l=u(Oe);Ge=i(_l,"DIV",{class:!0});var Ma=u(Ge);Xe=i(Ma,"H2",{class:!0});var Va=u(Xe);Xt=b(Va,St),Va.forEach(n),Ma.forEach(n),Yl=E(_l),$e=i(_l,"DIV",{class:!0});var Ha=u($e);ke=i(Ha,"TABLE",{class:!0});var gl=u(ke);et=i(gl,"THEAD",{class:!0});var Ua=u(et);Z=i(Ua,"TR",{});var oe=u(Z);tt=i(oe,"TH",{class:!0});var qa=u(tt);$t=b(qa,Nt),qa.forEach(n),Rl=E(oe),lt=i(oe,"TH",{class:!0});var xa=u(lt);el=b(xa,Pt),xa.forEach(n),zl=E(oe),at=i(oe,"TH",{class:!0});var Fa=u(at);tl=b(Fa,Ct),Fa.forEach(n),Bl=E(oe),rt=i(oe,"TH",{class:!0});var La=u(rt);ll=b(La,At),La.forEach(n),Wl=E(oe),st=i(oe,"TH",{class:!0});var Ya=u(st);al=b(Ya,Mt),Ya.forEach(n),oe.forEach(n),Ua.forEach(n),Zl=E(gl),He=i(gl,"TBODY",{class:!0});var Ra=u(He);$.l(Ra),Ra.forEach(n),gl.forEach(n),Ha.forEach(n),_l.forEach(n),p.forEach(n),this.h()},h(){d(s,"class","text-2xl font-bold text-gray-900"),d(h,"class","text-gray-600"),d(a,"class","flex justify-between items-center mb-6"),d(S,"type","text"),d(S,"placeholder",R=t[12]("selling.search.placeholder")),d(S,"class","w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),d(M,"class","flex-1"),Y.__value="today",F(Y,Y.__value),T.__value="week",F(T,T.__value),W.__value="month",F(W,W.__value),te.__value="year",F(te,te.__value),le.__value="all",F(le,le.__value),d(C,"class","px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),t[1]===void 0&&hl(()=>t[16].call(C)),d(A,"class","flex gap-2"),d(P,"class","flex flex-col md:flex-row gap-4"),d(O,"class","mb-6"),d(H,"class","text-lg font-semibold text-gray-700 mb-2"),d(_e,"class","text-2xl font-bold text-green-600"),d(k,"class","bg-white p-6 rounded-lg shadow"),d(Fe,"class","text-lg font-semibold text-gray-700 mb-2"),d(Le,"class","text-2xl font-bold text-blue-600"),d(ge,"class","bg-white p-6 rounded-lg shadow"),d(Ye,"class","text-lg font-semibold text-gray-700 mb-2"),d(Re,"class","text-2xl font-bold text-purple-600"),d(he,"class","bg-white p-6 rounded-lg shadow"),d(_,"class","grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"),d(ze,"class","text-xl font-semibold text-gray-900"),we.__value="line",F(we,we.__value),De.__value="bar",F(De,De.__value),d(Q,"class","px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),t[3]===void 0&&hl(()=>t[17].call(Q)),Ee.__value="csv",F(Ee,Ee.__value),Te.__value="excel",F(Te,Te.__value),d(G,"class","px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),t[10]===void 0&&hl(()=>t[18].call(G)),d(Be,"class","relative"),d(ye,"class","flex gap-4"),d(be,"class","flex justify-between items-center mb-4"),d(We,"class","h-96"),d(me,"class","bg-white p-6 rounded-lg shadow mb-6"),d(Ze,"class","text-xl font-semibold text-gray-900 mb-4"),d(je,"class","block text-sm font-medium text-gray-700 mb-2"),ce.__value=null,F(ce,ce.__value),d(K,"class","w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),t[4]===void 0&&hl(()=>t[20].call(K)),d(Je,"class","block text-sm font-medium text-gray-700 mb-2"),d(ne,"type","number"),d(ne,"min","1"),d(ne,"class","w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),d(Ke,"class","block text-sm font-medium text-gray-700 mb-2"),d(X,"type","number"),d(X,"min","0"),d(X,"step","0.01"),d(X,"class","w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),d(se,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),de.disabled=t[7],d(de,"class","w-full md:w-auto px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50"),d(Qe,"class","mt-4"),d(re,"class","bg-white p-6 rounded-lg shadow mb-6"),d(Xe,"class","text-xl font-semibold text-gray-900"),d(Ge,"class","px-6 py-4 border-b"),d(tt,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),d(lt,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),d(at,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),d(rt,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),d(st,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),d(et,"class","bg-gray-50"),d(He,"class","bg-white divide-y divide-gray-200"),d(ke,"class","min-w-full divide-y divide-gray-200"),d($e,"class","overflow-x-auto"),d(Oe,"class","bg-white rounded-lg shadow overflow-hidden"),d(e,"class","container mx-auto px-4 py-8")},m(f,p){Ut(f,e,p),l(e,a),l(a,r),l(r,s),l(s,v),l(r,g),l(r,h),l(h,I),l(e,N),l(e,O),l(O,P),l(P,M),l(M,S),F(S,t[0]),l(P,B),l(P,A),l(A,C),l(C,Y),l(Y,q),l(C,T),l(T,ie),l(C,W),l(W,ue),l(C,te),l(te,qe),l(C,le),l(le,xe),Ie(C,t[1],!0),l(e,ft),l(e,_),l(_,k),l(k,H),l(H,x),l(k,z),l(k,_e),l(_e,qt),l(_,Tl),l(_,ge),l(ge,Fe),l(Fe,xt),l(ge,Ol),l(ge,Le),l(Le,Ft),l(_,kl),l(_,he),l(he,Ye),l(Ye,Lt),l(he,Il),l(he,Re),l(Re,Yt),l(e,Sl),l(e,me),l(me,be),l(be,ze),l(ze,Rt),l(be,Nl),l(be,ye),l(ye,Q),l(Q,we),l(we,zt),l(Q,De),l(De,Bt),Ie(Q,t[3],!0),l(ye,Pl),l(ye,Be),l(Be,G),l(G,Ee),l(Ee,Wt),l(G,Te),l(Te,Zt),Ie(G,t[10],!0),l(me,Cl),l(me,We),l(We,Dt),t[19](Dt),l(e,Al),l(e,re),l(re,Ze),l(Ze,jt),l(re,Ml),l(re,se),l(se,Ae),l(Ae,je),l(je,Jt),l(Ae,Vl),l(Ae,K),l(K,ce);for(let U=0;U<L.length;U+=1)L[U]&&L[U].m(K,null);Ie(K,t[4],!0),l(se,Hl),l(se,Me),l(Me,Je),l(Je,Kt),l(Me,Ul),l(Me,ne),F(ne,t[5]),l(se,ql),l(se,Ve),l(Ve,Ke),l(Ke,Qt),l(Ve,xl),l(Ve,X),F(X,t[6]),l(re,Fl),l(re,Qe),l(Qe,de),l(de,Gt),l(e,Ll),l(e,Oe),l(Oe,Ge),l(Ge,Xe),l(Xe,Xt),l(Oe,Yl),l(Oe,$e),l($e,ke),l(ke,et),l(et,Z),l(Z,tt),l(tt,$t),l(Z,Rl),l(Z,lt),l(lt,el),l(Z,zl),l(Z,at),l(at,tl),l(Z,Bl),l(Z,rt),l(rt,ll),l(Z,Wl),l(Z,st),l(st,al),l(ke,Zl),l(ke,He),$.m(He,null),jl||(la=[Se(S,"input",t[15]),Se(C,"change",t[16]),Se(Q,"change",t[17]),Se(G,"change",t[18]),Se(K,"change",t[20]),Se(ne,"input",t[21]),Se(X,"input",t[22]),Se(de,"click",t[13])],jl=!0)},p(f,p){if(p[0]&4096&&c!==(c=f[12]("selling.title")+"")&&y(v,c),p[0]&4096&&w!==(w=f[12]("selling.subtitle")+"")&&y(I,w),p[0]&4096&&R!==(R=f[12]("selling.search.placeholder"))&&d(S,"placeholder",R),p[0]&1&&S.value!==f[0]&&F(S,f[0]),p[0]&4096&&j!==(j=f[12]("selling.time_range.today")+"")&&y(q,j),p[0]&4096&&J!==(J=f[12]("selling.time_range.week")+"")&&y(ie,J),p[0]&4096&&ee!==(ee=f[12]("selling.time_range.month")+"")&&y(ue,ee),p[0]&4096&&Pe!==(Pe=f[12]("selling.time_range.year")+"")&&y(qe,Pe),p[0]&4096&&Ce!==(Ce=f[12]("selling.time_range.all")+"")&&y(xe,Ce),p[0]&2&&Ie(C,f[1]),p[0]&4096&&V!==(V=f[12]("selling.stats.total_profit")+"")&&y(x,V),p[0]&256&&ae!==(ae=ve(f[8].totalProfit)+"")&&y(qt,ae),p[0]&4096&&vt!==(vt=f[12]("selling.stats.total_sales")+"")&&y(xt,vt),p[0]&256&&pt!==(pt=f[8].totalSales+"")&&y(Ft,pt),p[0]&4096&&_t!==(_t=f[12]("selling.stats.average_profit")+"")&&y(Lt,_t),p[0]&256&&gt!==(gt=ve(f[8].averageProfit)+"")&&y(Yt,gt),p[0]&4096&&ht!==(ht=f[12]("selling.chart.title")+"")&&y(Rt,ht),p[0]&4096&&mt!==(mt=f[12]("selling.chart.type.line")+"")&&y(zt,mt),p[0]&4096&&bt!==(bt=f[12]("selling.chart.type.bar")+"")&&y(Bt,bt),p[0]&8&&Ie(Q,f[3]),p[0]&4096&&yt!==(yt=f[12]("selling.chart.export.csv")+"")&&y(Wt,yt),p[0]&4096&&wt!==(wt=f[12]("selling.chart.export.excel")+"")&&y(Zt,wt),p[0]&1024&&Ie(G,f[10]),p[0]&4096&&Et!==(Et=f[12]("selling.sell_product.title")+"")&&y(jt,Et),p[0]&4096&&Tt!==(Tt=f[12]("selling.sell_product.select_product")+"")&&y(Jt,Tt),p[0]&2048){nt=Dl(f[11]);let U;for(U=0;U<nt.length;U+=1){const Ue=ja(f,nt,U);L[U]?L[U].p(Ue,p):(L[U]=Ja(Ue),L[U].c(),L[U].m(K,null))}for(;U<L.length;U+=1)L[U].d(1);L.length=nt.length}p[0]&2064&&Ie(K,f[4]),p[0]&4096&&Ot!==(Ot=f[12]("selling.sell_product.quantity")+"")&&y(Kt,Ot),p[0]&32&&wl(ne.value)!==f[5]&&F(ne,f[5]),p[0]&4096&&kt!==(kt=f[12]("selling.sell_product.selling_price")+"")&&y(Qt,kt),p[0]&64&&wl(X.value)!==f[6]&&F(X,f[6]),p[0]&4096&&It!==(It=f[12]("selling.sell_product.submit")+"")&&y(Gt,It),p[0]&128&&(de.disabled=f[7]),p[0]&4096&&St!==(St=f[12]("selling.recent_sales.title")+"")&&y(Xt,St),p[0]&4096&&Nt!==(Nt=f[12]("selling.recent_sales.columns.date")+"")&&y($t,Nt),p[0]&4096&&Pt!==(Pt=f[12]("selling.recent_sales.columns.product")+"")&&y(el,Pt),p[0]&4096&&Ct!==(Ct=f[12]("selling.recent_sales.columns.quantity")+"")&&y(tl,Ct),p[0]&4096&&At!==(At=f[12]("selling.recent_sales.columns.price")+"")&&y(ll,At),p[0]&4096&&Mt!==(Mt=f[12]("selling.recent_sales.columns.profit")+"")&&y(al,Mt),rl===(rl=aa(f))&&$?$.p(f,p):($.d(1),$=rl(f),$&&($.c(),$.m(He,null)))},i:za,o:za,d(f){f&&n(e),t[19](null),Qa(L,f),$.d(),jl=!1,ar(la)}}}function ve(t){return t==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function qr(t,e,a){let r,s,c;Ba(t,cr,_=>a(12,s=_)),Ba(t,Vt,_=>a(25,c=_));let v=[],g=null,h=1,w=0,I=!1,N=[],O="",P="today",M={totalProfit:0,totalSales:0,averageProfit:0},S=[],R,B,A="line",C="csv";rr(async()=>{await Y(),await j()});async function Y(){ml(Vt,c=!0,c);try{const _=await Xl.products.getAll();_.success?a(14,v=_.data.filter(k=>k.stock_quantity>0)):fe(_.error||"Failed to load products","error")}catch(_){fe(_.message||"Failed to load products","error")}finally{ml(Vt,c=!1,c)}}async function j(){ml(Vt,c=!0,c);try{const _=await Xl.stockMovements.getRecent("OUTBOUND",1e3);_.success?(N=_.data.map(k=>({...k,productName:k.productName||k.product?.name||"Unknown Product",profit:k.profit||0,quantity:Math.abs(k.quantity),sellingPriceAtSale:k.sellingPriceAtSale||0,purchasePriceAtSale:k.purchasePrice||0,createdAt:k.createdAt})),T(),J()):fe(_.error||"Failed to load recent sales","error")}catch(_){fe(_.message||"Failed to load recent sales","error")}finally{ml(Vt,c=!1,c)}}function q(){const _=new Date;switch(P){case"today":return{start:fr(_),end:vr(_)};case"week":return{start:dr(_),end:mr(_)};case"month":return{start:_r(_),end:pr(_)};case"year":return{start:hr(_),end:gr(_)};default:return{start:new Date(0),end:_}}}function T(){const{start:_,end:k}=q();a(2,S=N.filter(H=>{const V=dt(H.createdAt);return V>=_&&V<=k})),S.sort((H,V)=>dt(V.createdAt)-dt(H.createdAt)),J()}function J(){if(!S.length){a(8,M={totalProfit:0,totalSales:0,averageProfit:0});return}const _=S.reduce((V,x)=>V+(x.profit||0),0),k=S.reduce((V,x)=>V+Math.abs(x.quantity),0),H=_/S.length;a(8,M={totalProfit:_,totalSales:k,averageProfit:H})}async function ie(){if(!g){fe(s("selling.validation.select_product"),"warning");return}if(h<=0||h>g.stock_quantity){fe(s("selling.validation.invalid_quantity"),"warning");return}if(w==null||w<0){fe(s("selling.validation.invalid_price"),"warning");return}a(7,I=!0);try{const _={productId:g.id,quantity:-h,sellingPrice:w,notes:s("selling.sell_product.success",{quantity:h,product:g.name}),previous_quantity:g.stock_quantity,new_quantity:g.stock_quantity-h},k=await Xl.stockMovements.create(_);if(k.success)fe(s("selling.sell_product.success",{quantity:h,product:g.name}),"success"),await Y(),await j(),a(4,g=null),a(5,h=1),a(6,w=0);else throw new Error(k.error)}catch(_){fe(s("selling.sell_product.error",{error:_.message||"Unknown error"}),"error")}finally{a(7,I=!1)}}function W(){const{start:_,end:k}=q(),H=new Map,V=new Map;let x=_;for(;x<=k;){const z=El(x,"MMM dd");H.set(z,0),V.set(z,0),x=new Date(x.setDate(x.getDate()+1))}return S.forEach(z=>{const _e=dt(z.createdAt),ae=El(_e,"MMM dd");H.set(ae,(H.get(ae)||0)+(z.profit||0)),V.set(ae,(V.get(ae)||0)+1)}),{labels:Array.from(H.keys()),profitData:Array.from(H.values()),salesData:Array.from(V.values())}}function ee(){if(!B)return;const{labels:_,profitData:k,salesData:H}=W();R&&R.destroy();const V=B.getContext("2d");R=new ur(V,{type:A,data:{labels:_,datasets:[{label:"Profit",data:k,borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",yAxisID:"y",type:A==="bar"?"bar":"line",fill:A==="line"},{label:"Sales Count",data:H,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",yAxisID:"y1",type:A==="bar"?"bar":"line",fill:A==="line"}]},options:{responsive:!0,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:"Sales and Profit Over Time"},tooltip:{callbacks:{label(x){let z=x.dataset.label||"";return z&&(z+=": "),x.dataset.yAxisID==="y"?z+=ve(x.parsed.y):z+=x.parsed.y,z}}}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Profit"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Sales Count"},grid:{drawOnChartArea:!1}}}}})}sr(()=>{R&&R.destroy()});function ue(){O=this.value,a(0,O)}function te(){P=bl(this),a(1,P)}function Pe(){A=bl(this),a(3,A)}function qe(){C=bl(this),a(10,C)}function le(_){nr[_?"unshift":"push"](()=>{B=_,a(9,B)})}function Ce(){g=bl(this),a(4,g),a(11,r),a(14,v),a(0,O)}function xe(){h=wl(this.value),a(5,h)}function ft(){w=wl(this.value),a(6,w)}return t.$$.update=()=>{t.$$.dirty[0]&16385&&a(11,r=v.filter(_=>_.name.toLowerCase().includes(O.toLowerCase())||_.sku.toLowerCase().includes(O.toLowerCase()))),t.$$.dirty[0]&2&&P&&T(),t.$$.dirty[0]&12&&(A||S)&&ee()},J(),[O,P,S,A,g,h,w,I,M,B,C,r,s,ie,v,ue,te,Pe,qe,le,Ce,xe,ft]}class jr extends or{constructor(e){super(),ir(this,e,qr,Ur,tr,{},null,[-1,-1])}}export{jr as component};
