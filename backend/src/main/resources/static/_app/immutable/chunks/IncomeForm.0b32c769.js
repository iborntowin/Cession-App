import{s as Te,f as n,a as D,l as le,g as i,h as y,c as O,y as H,d as m,m as ae,j as s,L as q,x as Ne,i as Q,w as l,M as me,z as W,O as Se,P as be,I as oe,K as Le,H as De,T as Oe,n as Pe,r as Be,N as qe}from"./scheduler.55755e91.js";import{e as pe}from"./each.8720bd6f.js";import{S as Re,i as Ve}from"./index.d2ed93bc.js";import{f as Ue}from"./api.20dd9789.js";import{u as je,s as he}from"./navigation.fbd60083.js";function ye(o,e,r){const t=o.slice();return t[11]=e[r],t}function Ee(o){let e,r,t;return{c(){e=n("div"),r=n("span"),t=le(o[2]),this.h()},l(a){e=i(a,"DIV",{class:!0,role:!0});var c=y(e);r=i(c,"SPAN",{class:!0});var w=y(r);t=ae(w,o[2]),w.forEach(m),c.forEach(m),this.h()},h(){s(r,"class","block sm:inline"),s(e,"class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"),s(e,"role","alert")},m(a,c){Q(a,e,c),l(e,r),l(r,t)},p(a,c){c&4&&Pe(t,a[2])},d(a){a&&m(e)}}}function we(o){let e,r=o[11].charAt(0)+o[11].slice(1).toLowerCase().replace("_"," ")+"",t;return{c(){e=n("option"),t=le(r),this.h()},l(a){e=i(a,"OPTION",{});var c=y(e);t=ae(c,r),c.forEach(m),this.h()},h(){e.__value=o[11],q(e,e.__value)},m(a,c){Q(a,e,c),l(e,t)},p:oe,d(a){a&&m(e)}}}function ke(o){let e,r="⟳";return{c(){e=n("span"),e.textContent=r,this.h()},l(t){e=i(t,"SPAN",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-70ggdd"&&(e.textContent=r),this.h()},h(){s(e,"class","inline-block animate-spin mr-2")},m(t,a){Q(t,e,a)},d(t){t&&m(e)}}}function Fe(o){let e,r,t,a,c="Category *",w,u,k,J="Select a category",K,P,A,U="Description *",I,h,G,B,R,ne="Amount (TND) *",Z,E,$,j,V,ie="Date *",ee,x,te,F,T,re="Additional Notes",se,M,N,X,b,S,p,g,d=o[2]&&Ee(o),z=pe(o[3]),C=[];for(let f=0;f<z.length;f+=1)C[f]=we(ye(o,z,f));let L=o[1]&&ke();return{c(){e=n("form"),d&&d.c(),r=D(),t=n("div"),a=n("label"),a.textContent=c,w=D(),u=n("select"),k=n("option"),k.textContent=J;for(let f=0;f<C.length;f+=1)C[f].c();K=D(),P=n("div"),A=n("label"),A.textContent=U,I=D(),h=n("input"),G=D(),B=n("div"),R=n("label"),R.textContent=ne,Z=D(),E=n("input"),$=D(),j=n("div"),V=n("label"),V.textContent=ie,ee=D(),x=n("input"),te=D(),F=n("div"),T=n("label"),T.textContent=re,se=D(),M=n("textarea"),N=D(),X=n("div"),b=n("button"),L&&L.c(),S=le(`\r
      Add Expense`),this.h()},l(f){e=i(f,"FORM",{class:!0});var _=y(e);d&&d.l(_),r=O(_),t=i(_,"DIV",{});var v=y(t);a=i(v,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(a)!=="svelte-25opnq"&&(a.textContent=c),w=O(v),u=i(v,"SELECT",{id:!0,class:!0});var Y=y(u);k=i(Y,"OPTION",{"data-svelte-h":!0}),H(k)!=="svelte-15swqsp"&&(k.textContent=J);for(let ge=0;ge<C.length;ge+=1)C[ge].l(Y);Y.forEach(m),v.forEach(m),K=O(_),P=i(_,"DIV",{});var ue=y(P);A=i(ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(A)!=="svelte-1snfuiq"&&(A.textContent=U),I=O(ue),h=i(ue,"INPUT",{type:!0,id:!0,class:!0}),ue.forEach(m),G=O(_),B=i(_,"DIV",{});var de=y(B);R=i(de,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(R)!=="svelte-10d86z"&&(R.textContent=ne),Z=O(de),E=i(de,"INPUT",{type:!0,id:!0,min:!0,step:!0,class:!0}),de.forEach(m),$=O(_),j=i(_,"DIV",{});var ce=y(j);V=i(ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(V)!=="svelte-1iygwdq"&&(V.textContent=ie),ee=O(ce),x=i(ce,"INPUT",{type:!0,id:!0,class:!0}),ce.forEach(m),te=O(_),F=i(_,"DIV",{});var fe=y(F);T=i(fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(T)!=="svelte-1b8k7oi"&&(T.textContent=re),se=O(fe),M=i(fe,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),y(M).forEach(m),fe.forEach(m),N=O(_),X=i(_,"DIV",{class:!0});var ve=y(X);b=i(ve,"BUTTON",{type:!0,class:!0});var _e=y(b);L&&L.l(_e),S=ae(_e,`\r
      Add Expense`),_e.forEach(m),ve.forEach(m),_.forEach(m),this.h()},h(){s(a,"for","category"),s(a,"class","block text-sm font-medium text-primary-700 mb-1"),k.__value="",q(k,k.__value),s(u,"id","category"),s(u,"class","mt-1 block w-full rounded-md border border-gray-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 bg-white text-gray-900"),u.required=!0,o[0].category===void 0&&Ne(()=>o[5].call(u)),s(A,"for","label"),s(A,"class","block text-sm font-medium text-primary-700 mb-1"),s(h,"type","text"),s(h,"id","label"),s(h,"class","mt-1 block w-full rounded-md border border-gray-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 bg-white text-gray-900"),h.required=!0,s(R,"for","amount"),s(R,"class","block text-sm font-medium text-primary-700 mb-1"),s(E,"type","number"),s(E,"id","amount"),s(E,"min","0"),s(E,"step","0.01"),s(E,"class","mt-1 block w-full rounded-md border border-gray-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 bg-white text-gray-900"),E.required=!0,s(V,"for","date"),s(V,"class","block text-sm font-medium text-primary-700 mb-1"),s(x,"type","date"),s(x,"id","date"),s(x,"class","mt-1 block w-full rounded-md border border-gray-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 bg-white text-gray-900"),x.required=!0,s(T,"for","description"),s(T,"class","block text-sm font-medium text-primary-700 mb-1"),s(M,"id","description"),s(M,"rows","3"),s(M,"class","mt-1 block w-full rounded-md border border-gray-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 bg-white text-gray-900"),s(M,"placeholder","Add any additional details about this expense..."),s(b,"type","submit"),s(b,"class","inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 transition-colors duration-200"),b.disabled=o[1],s(X,"class","flex justify-end"),s(e,"class","space-y-4 bg-white p-6 rounded-lg shadow-md border border-gray-100")},m(f,_){Q(f,e,_),d&&d.m(e,null),l(e,r),l(e,t),l(t,a),l(t,w),l(t,u),l(u,k);for(let v=0;v<C.length;v+=1)C[v]&&C[v].m(u,null);me(u,o[0].category,!0),l(e,K),l(e,P),l(P,A),l(P,I),l(P,h),q(h,o[0].label),l(e,G),l(e,B),l(B,R),l(B,Z),l(B,E),q(E,o[0].amount),l(e,$),l(e,j),l(j,V),l(j,ee),l(j,x),q(x,o[0].date),l(e,te),l(e,F),l(F,T),l(F,se),l(F,M),q(M,o[0].description),l(e,N),l(e,X),l(X,b),L&&L.m(b,null),l(b,S),p||(g=[W(u,"change",o[5]),W(h,"input",o[6]),W(E,"input",o[7]),W(x,"input",o[8]),W(M,"input",o[9]),W(e,"submit",Se(o[4]))],p=!0)},p(f,[_]){if(f[2]?d?d.p(f,_):(d=Ee(f),d.c(),d.m(e,r)):d&&(d.d(1),d=null),_&8){z=pe(f[3]);let v;for(v=0;v<z.length;v+=1){const Y=ye(f,z,v);C[v]?C[v].p(Y,_):(C[v]=we(Y),C[v].c(),C[v].m(u,null))}for(;v<C.length;v+=1)C[v].d(1);C.length=z.length}_&9&&me(u,f[0].category),_&9&&h.value!==f[0].label&&q(h,f[0].label),_&9&&be(E.value)!==f[0].amount&&q(E,f[0].amount),_&9&&q(x,f[0].date),_&9&&q(M,f[0].description),f[1]?L||(L=ke(),L.c(),L.m(b,S)):L&&(L.d(1),L=null),_&2&&(b.disabled=f[1])},i:oe,o:oe,d(f){f&&m(e),d&&d.d(),Le(C,f),L&&L.d(),p=!1,De(g)}}}function Me(o,e,r){let{expense:t={category:"",label:"",amount:"",date:new Date().toISOString().split("T")[0],description:""}}=e;const a=Oe();let c=!1,w=null;const u=["WATER","ELECTRICITY","TRANSPORT","RENT","SUPPLIES","MAINTENANCE","SALARIES","INSURANCE","TAXES","MARKETING","OTHER"];async function k(){try{if(r(1,c=!0),r(2,w=null),!t.category||!t.label||!t.amount||!t.date)throw new Error("Please fill in all required fields");const I=parseFloat(t.amount);if(isNaN(I)||I<=0)throw new Error("Amount must be a positive number");const h=Be(je);if(!h||!h.id)throw new Error("User not authenticated");const G=await Ue.createExpense({...t,amount:I,userId:h.id});if(G.success)he("Expense added successfully","success"),a("submit",G.data),r(0,t={category:"",label:"",amount:"",date:new Date().toISOString().split("T")[0],description:""});else throw new Error(G.error)}catch(I){r(2,w=I.message),he(w,"error")}finally{r(1,c=!1)}}function J(){t.category=qe(this),r(0,t),r(3,u)}function K(){t.label=this.value,r(0,t),r(3,u)}function P(){t.amount=be(this.value),r(0,t),r(3,u)}function A(){t.date=this.value,r(0,t),r(3,u)}function U(){t.description=this.value,r(0,t),r(3,u)}return o.$$set=I=>{"expense"in I&&r(0,t=I.expense)},[t,c,w,u,k,J,K,P,A,U]}class Je extends Re{constructor(e){super(),Ve(this,e,Me,Fe,Te,{expense:0})}}function xe(o,e,r){const t=o.slice();return t[10]=e[r],t}function Ce(o){let e,r,t;return{c(){e=n("div"),r=n("span"),t=le(o[2]),this.h()},l(a){e=i(a,"DIV",{class:!0,role:!0});var c=y(e);r=i(c,"SPAN",{class:!0});var w=y(r);t=ae(w,o[2]),w.forEach(m),c.forEach(m),this.h()},h(){s(r,"class","block sm:inline"),s(e,"class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"),s(e,"role","alert")},m(a,c){Q(a,e,c),l(e,r),l(r,t)},p(a,c){c&4&&Pe(t,a[2])},d(a){a&&m(e)}}}function Ae(o){let e,r=o[10].charAt(0).toUpperCase()+o[10].slice(1)+"",t;return{c(){e=n("option"),t=le(r),this.h()},l(a){e=i(a,"OPTION",{});var c=y(e);t=ae(c,r),c.forEach(m),this.h()},h(){e.__value=o[10],q(e,e.__value)},m(a,c){Q(a,e,c),l(e,t)},p:oe,d(a){a&&m(e)}}}function Ie(o){let e,r="⟳";return{c(){e=n("span"),e.textContent=r,this.h()},l(t){e=i(t,"SPAN",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-70ggdd"&&(e.textContent=r),this.h()},h(){s(e,"class","inline-block animate-spin mr-2")},m(t,a){Q(t,e,a)},d(t){t&&m(e)}}}function Xe(o){let e,r,t,a,c="Source",w,u,k,J="Select a source",K,P,A,U="Amount (TND) *",I,h,G,B,R,ne="Date *",Z,E,$,j,V,ie="Additional Notes",ee,x,te,F,T,re,se,M,N=o[2]&&Ce(o),X=pe(o[3]),b=[];for(let p=0;p<X.length;p+=1)b[p]=Ae(xe(o,X,p));let S=o[1]&&Ie();return{c(){e=n("form"),N&&N.c(),r=D(),t=n("div"),a=n("label"),a.textContent=c,w=D(),u=n("select"),k=n("option"),k.textContent=J;for(let p=0;p<b.length;p+=1)b[p].c();K=D(),P=n("div"),A=n("label"),A.textContent=U,I=D(),h=n("input"),G=D(),B=n("div"),R=n("label"),R.textContent=ne,Z=D(),E=n("input"),$=D(),j=n("div"),V=n("label"),V.textContent=ie,ee=D(),x=n("textarea"),te=D(),F=n("div"),T=n("button"),S&&S.c(),re=le(`\r
      Add Income`),this.h()},l(p){e=i(p,"FORM",{class:!0});var g=y(e);N&&N.l(g),r=O(g),t=i(g,"DIV",{});var d=y(t);a=i(d,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(a)!=="svelte-1tv23ej"&&(a.textContent=c),w=O(d),u=i(d,"SELECT",{id:!0,class:!0});var z=y(u);k=i(z,"OPTION",{"data-svelte-h":!0}),H(k)!=="svelte-1twuwjc"&&(k.textContent=J);for(let Y=0;Y<b.length;Y+=1)b[Y].l(z);z.forEach(m),d.forEach(m),K=O(g),P=i(g,"DIV",{});var C=y(P);A=i(C,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(A)!=="svelte-1wkgato"&&(A.textContent=U),I=O(C),h=i(C,"INPUT",{type:!0,id:!0,min:!0,step:!0,class:!0}),C.forEach(m),G=O(g),B=i(g,"DIV",{});var L=y(B);R=i(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(R)!=="svelte-e3rulf"&&(R.textContent=ne),Z=O(L),E=i(L,"INPUT",{type:!0,id:!0,class:!0}),L.forEach(m),$=O(g),j=i(g,"DIV",{});var f=y(j);V=i(f,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(V)!=="svelte-uaf79x"&&(V.textContent=ie),ee=O(f),x=i(f,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),y(x).forEach(m),f.forEach(m),te=O(g),F=i(g,"DIV",{class:!0});var _=y(F);T=i(_,"BUTTON",{type:!0,class:!0});var v=y(T);S&&S.l(v),re=ae(v,`\r
      Add Income`),v.forEach(m),_.forEach(m),g.forEach(m),this.h()},h(){s(a,"for","source"),s(a,"class","block text-sm font-medium text-gray-700 dark:text-gray-300"),k.__value="",q(k,k.__value),s(u,"id","source"),s(u,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"),o[0].source===void 0&&Ne(()=>o[5].call(u)),s(A,"for","amount"),s(A,"class","block text-sm font-medium text-gray-700 dark:text-gray-300"),s(h,"type","number"),s(h,"id","amount"),s(h,"min","0"),s(h,"step","0.01"),s(h,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"),h.required=!0,s(R,"for","date"),s(R,"class","block text-sm font-medium text-gray-700 dark:text-gray-300"),s(E,"type","date"),s(E,"id","date"),s(E,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"),E.required=!0,s(V,"for","description"),s(V,"class","block text-sm font-medium text-gray-700 dark:text-gray-300"),s(x,"id","description"),s(x,"rows","3"),s(x,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"),s(x,"placeholder","Add any additional details about this income..."),s(T,"type","submit"),s(T,"class","inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"),T.disabled=o[1],s(F,"class","flex justify-end"),s(e,"class","space-y-4")},m(p,g){Q(p,e,g),N&&N.m(e,null),l(e,r),l(e,t),l(t,a),l(t,w),l(t,u),l(u,k);for(let d=0;d<b.length;d+=1)b[d]&&b[d].m(u,null);me(u,o[0].source,!0),l(e,K),l(e,P),l(P,A),l(P,I),l(P,h),q(h,o[0].amount),l(e,G),l(e,B),l(B,R),l(B,Z),l(B,E),q(E,o[0].date),l(e,$),l(e,j),l(j,V),l(j,ee),l(j,x),q(x,o[0].description),l(e,te),l(e,F),l(F,T),S&&S.m(T,null),l(T,re),se||(M=[W(u,"change",o[5]),W(h,"input",o[6]),W(E,"input",o[7]),W(x,"input",o[8]),W(e,"submit",Se(o[4]))],se=!0)},p(p,[g]){if(p[2]?N?N.p(p,g):(N=Ce(p),N.c(),N.m(e,r)):N&&(N.d(1),N=null),g&8){X=pe(p[3]);let d;for(d=0;d<X.length;d+=1){const z=xe(p,X,d);b[d]?b[d].p(z,g):(b[d]=Ae(z),b[d].c(),b[d].m(u,null))}for(;d<b.length;d+=1)b[d].d(1);b.length=X.length}g&9&&me(u,p[0].source),g&9&&be(h.value)!==p[0].amount&&q(h,p[0].amount),g&9&&q(E,p[0].date),g&9&&q(x,p[0].description),p[1]?S||(S=Ie(),S.c(),S.m(T,re)):S&&(S.d(1),S=null),g&2&&(T.disabled=p[1])},i:oe,o:oe,d(p){p&&m(e),N&&N.d(),Le(b,p),S&&S.d(),se=!1,De(M)}}}function ze(o,e,r){let{income:t={amount:"",source:"",date:new Date().toISOString().split("T")[0],description:""}}=e;const a=Oe();let c=!1,w=null;const u=["salary","commission","investment","rental","other"];async function k(){try{if(r(1,c=!0),r(2,w=null),!t.amount||!t.date)throw new Error("Please fill in all required fields");const U=parseFloat(t.amount);if(isNaN(U)||U<=0)throw new Error("Amount must be a positive number");const I=await Ue.createIncome({...t,amount:U});if(I.success)he("Income added successfully","success"),a("submit",I.data),r(0,t={amount:"",source:"",date:new Date().toISOString().split("T")[0],description:""});else throw new Error(I.error)}catch(U){r(2,w=U.message),he(w,"error")}finally{r(1,c=!1)}}function J(){t.source=qe(this),r(0,t),r(3,u)}function K(){t.amount=be(this.value),r(0,t),r(3,u)}function P(){t.date=this.value,r(0,t),r(3,u)}function A(){t.description=this.value,r(0,t),r(3,u)}return o.$$set=U=>{"income"in U&&r(0,t=U.income)},[t,c,w,u,k,J,K,P,A]}class Qe extends Re{constructor(e){super(),Ve(this,e,ze,Xe,Te,{income:0})}}export{Je as E,Qe as I};
