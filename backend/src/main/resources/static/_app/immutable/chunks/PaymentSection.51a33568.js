import{s as cl,f as d,l as B,a as P,g as f,h as u,m as S,d as o,c as A,j as r,k as pt,i as j,w as l,L as ne,z as ue,O as hl,n as F,P as fl,I as Zt,H as ml,u as pl,o as _l,y as Ge,K as ul,F as ke,G as De}from"./scheduler.55755e91.js";import{e as _t}from"./each.8720bd6f.js";import{S as yl,i as vl}from"./index.d2ed93bc.js";import{p as $t}from"./api.20dd9789.js";import{f as ce,s as gl,a as yt}from"./formatters.90833bec.js";import{t as bl}from"./index.7dc5fa01.js";import{f as mt}from"./index.7c030542.js";function el(a,e,t){const s=a.slice();return s[28]=e[t],s[30]=t,s}function tl(a,e,t){const s=a.slice();return s[31]=e[t],s}function ll(a){let e,t;return{c(){e=d("div"),t=B(a[5]),this.h()},l(s){e=f(s,"DIV",{class:!0});var n=u(e);t=S(n,a[5]),n.forEach(o),this.h()},h(){r(e,"class","mb-4 p-4 bg-red-50 text-red-700 rounded-lg")},m(s,n){j(s,e,n),l(e,t)},p(s,n){n[0]&32&&F(t,s[5])},d(s){s&&o(e)}}}function sl(a){let e,t;return{c(){e=d("div"),t=B(a[6]),this.h()},l(s){e=f(s,"DIV",{class:!0});var n=u(e);t=S(n,a[6]),n.forEach(o),this.h()},h(){r(e,"class","mb-4 p-4 bg-green-50 text-green-700 rounded-lg")},m(s,n){j(s,e,n),l(e,t)},p(s,n){n[0]&64&&F(t,s[6])},d(s){s&&o(e)}}}function al(a){let e,t="‚ü≥";return{c(){e=d("span"),e.textContent=t,this.h()},l(s){e=f(s,"SPAN",{class:!0,"data-svelte-h":!0}),Ge(e)!=="svelte-70ggdd"&&(e.textContent=t),this.h()},h(){r(e,"class","inline-block animate-spin mr-2")},m(s,n){j(s,e,n)},d(s){s&&o(e)}}}function El(a){let e,t,s,n,i,c=a[14]("payments.history.columns.date")+"",h,k,b,L=a[14]("payments.history.columns.amount")+"",M,D,R,I=a[14]("payments.history.columns.notes")+"",p,m,_,w=_t(a[3]),V=[];for(let y=0;y<w.length;y+=1)V[y]=rl(tl(a,w,y));return{c(){e=d("div"),t=d("table"),s=d("thead"),n=d("tr"),i=d("th"),h=B(c),k=P(),b=d("th"),M=B(L),D=P(),R=d("th"),p=B(I),m=P(),_=d("tbody");for(let y=0;y<V.length;y+=1)V[y].c();this.h()},l(y){e=f(y,"DIV",{class:!0});var E=u(e);t=f(E,"TABLE",{class:!0});var v=u(t);s=f(v,"THEAD",{class:!0});var T=u(s);n=f(T,"TR",{});var H=u(n);i=f(H,"TH",{class:!0});var Q=u(i);h=S(Q,c),Q.forEach(o),k=A(H),b=f(H,"TH",{class:!0});var J=u(b);M=S(J,L),J.forEach(o),D=A(H),R=f(H,"TH",{class:!0});var G=u(R);p=S(G,I),G.forEach(o),H.forEach(o),T.forEach(o),m=A(v),_=f(v,"TBODY",{class:!0});var X=u(_);for(let U=0;U<V.length;U+=1)V[U].l(X);X.forEach(o),v.forEach(o),E.forEach(o),this.h()},h(){r(i,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),r(b,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),r(R,"class","px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),r(s,"class","bg-gray-50"),r(_,"class","bg-white divide-y divide-gray-200"),r(t,"class","min-w-full divide-y divide-gray-200"),r(e,"class","overflow-x-auto")},m(y,E){j(y,e,E),l(e,t),l(t,s),l(s,n),l(n,i),l(i,h),l(n,k),l(n,b),l(b,M),l(n,D),l(n,R),l(R,p),l(t,m),l(t,_);for(let v=0;v<V.length;v+=1)V[v]&&V[v].m(_,null)},p(y,E){if(E[0]&16384&&c!==(c=y[14]("payments.history.columns.date")+"")&&F(h,c),E[0]&16384&&L!==(L=y[14]("payments.history.columns.amount")+"")&&F(M,L),E[0]&16384&&I!==(I=y[14]("payments.history.columns.notes")+"")&&F(p,I),E[0]&8){w=_t(y[3]);let v;for(v=0;v<w.length;v+=1){const T=tl(y,w,v);V[v]?V[v].p(T,E):(V[v]=rl(T),V[v].c(),V[v].m(_,null))}for(;v<V.length;v+=1)V[v].d(1);V.length=w.length}},d(y){y&&o(e),ul(V,y)}}}function wl(a){let e,t=a[14]("payments.history.no_payments")+"",s;return{c(){e=d("div"),s=B(t),this.h()},l(n){e=f(n,"DIV",{class:!0});var i=u(e);s=S(i,t),i.forEach(o),this.h()},h(){r(e,"class","text-center py-4 text-gray-500")},m(n,i){j(n,e,i),l(e,s)},p(n,i){i[0]&16384&&t!==(t=n[14]("payments.history.no_payments")+"")&&F(s,t)},d(n){n&&o(e)}}}function kl(a){let e,t;return{c(){e=d("div"),t=B(a[5]),this.h()},l(s){e=f(s,"DIV",{class:!0});var n=u(e);t=S(n,a[5]),n.forEach(o),this.h()},h(){r(e,"class","text-center py-4 text-red-600")},m(s,n){j(s,e,n),l(e,t)},p(s,n){n[0]&32&&F(t,s[5])},d(s){s&&o(e)}}}function Dl(a){let e,t,s="‚ü≥",n,i=a[14]("payments.history.loading")+"",c;return{c(){e=d("div"),t=d("span"),t.textContent=s,n=P(),c=B(i),this.h()},l(h){e=f(h,"DIV",{class:!0});var k=u(e);t=f(k,"SPAN",{class:!0,"data-svelte-h":!0}),Ge(t)!=="svelte-70ggdd"&&(t.textContent=s),n=A(k),c=S(k,i),k.forEach(o),this.h()},h(){r(t,"class","inline-block animate-spin mr-2"),r(e,"class","text-center py-4")},m(h,k){j(h,e,k),l(e,t),l(e,n),l(e,c)},p(h,k){k[0]&16384&&i!==(i=h[14]("payments.history.loading")+"")&&F(c,i)},d(h){h&&o(e)}}}function rl(a){let e,t,s=yt(a[31].paymentDate)+"",n,i,c,h=ce(a[31].amount)+"",k,b,L,M=(a[31].notes||"-")+"",D,R;return{c(){e=d("tr"),t=d("td"),n=B(s),i=P(),c=d("td"),k=B(h),b=P(),L=d("td"),D=B(M),R=P(),this.h()},l(I){e=f(I,"TR",{});var p=u(e);t=f(p,"TD",{class:!0});var m=u(t);n=S(m,s),m.forEach(o),i=A(p),c=f(p,"TD",{class:!0});var _=u(c);k=S(_,h),_.forEach(o),b=A(p),L=f(p,"TD",{class:!0});var w=u(L);D=S(w,M),w.forEach(o),R=A(p),p.forEach(o),this.h()},h(){r(t,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),r(c,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),r(L,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500")},m(I,p){j(I,e,p),l(e,t),l(t,n),l(e,i),l(e,c),l(c,k),l(e,b),l(e,L),l(L,D),l(e,R)},p(I,p){p[0]&8&&s!==(s=yt(I[31].paymentDate)+"")&&F(n,s),p[0]&8&&h!==(h=ce(I[31].amount)+"")&&F(k,h),p[0]&8&&M!==(M=(I[31].notes||"-")+"")&&F(D,M)},d(I){I&&o(e)}}}function nl(a){let e,t,s,n,i,c,h,k,b,L,M=(a[2]+a[13]).toFixed(2)+"",D,R,I,p,m,_=a[2]+a[13]>=18&&ol(),w=a[2]+a[13]<18&&il(a),V=_t(Array(18)),y=[];for(let E=0;E<V.length;E+=1)y[E]=dl(el(a,V,E));return{c(){e=d("div"),t=d("h3"),s=B(`18-Month Payment Tracker
          `),_&&_.c(),n=P(),i=d("div"),c=d("div"),h=d("div"),k=P(),b=d("div"),L=d("span"),D=B(M),R=B(" / 18 months paid"),I=P(),w&&w.c(),p=P(),m=d("div");for(let E=0;E<y.length;E+=1)y[E].c();this.h()},l(E){e=f(E,"DIV",{class:!0});var v=u(e);t=f(v,"H3",{class:!0});var T=u(t);s=S(T,`18-Month Payment Tracker
          `),_&&_.l(T),T.forEach(o),n=A(v),i=f(v,"DIV",{class:!0});var H=u(i);c=f(H,"DIV",{class:!0});var Q=u(c);h=f(Q,"DIV",{class:!0,style:!0}),u(h).forEach(o),Q.forEach(o),k=A(H),b=f(H,"DIV",{class:!0});var J=u(b);L=f(J,"SPAN",{});var G=u(L);D=S(G,M),R=S(G," / 18 months paid"),G.forEach(o),I=A(J),w&&w.l(J),J.forEach(o),H.forEach(o),p=A(v),m=f(v,"DIV",{class:!0});var X=u(m);for(let U=0;U<y.length;U+=1)y[U].l(X);X.forEach(o),v.forEach(o),this.h()},h(){r(t,"class","text-lg font-semibold text-gray-900 mb-2 flex items-center gap-2"),r(h,"class","bg-green-500 h-2.5 rounded-full transition-all duration-300"),pt(h,"width",Math.min((a[2]+a[13])/18*100,100)+"%"),r(c,"class","w-full bg-gray-200 rounded-full h-2.5"),r(b,"class","flex justify-between text-xs text-gray-500 mt-1"),r(i,"class","mb-2"),r(m,"class","grid grid-cols-3 sm:grid-cols-6 gap-2 mt-4"),r(e,"class","mt-8")},m(E,v){j(E,e,v),l(e,t),l(t,s),_&&_.m(t,null),l(e,n),l(e,i),l(i,c),l(c,h),l(i,k),l(i,b),l(b,L),l(L,D),l(L,R),l(b,I),w&&w.m(b,null),l(e,p),l(e,m);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(m,null)},p(E,v){if(E[2]+E[13]>=18?_||(_=ol(),_.c(),_.m(t,null)):_&&(_.d(1),_=null),v[0]&8196&&pt(h,"width",Math.min((E[2]+E[13])/18*100,100)+"%"),v[0]&8196&&M!==(M=(E[2]+E[13]).toFixed(2)+"")&&F(D,M),E[2]+E[13]<18?w?w.p(E,v):(w=il(E),w.c(),w.m(b,null)):w&&(w.d(1),w=null),v[0]&24588){V=_t(Array(18));let T;for(T=0;T<V.length;T+=1){const H=el(E,V,T);y[T]?y[T].p(H,v):(y[T]=dl(H),y[T].c(),y[T].m(m,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=V.length}},d(E){E&&o(e),_&&_.d(),w&&w.d(),ul(y,E)}}}function ol(a){let e,t="üéâ Fully Paid!";return{c(){e=d("span"),e.textContent=t,this.h()},l(s){e=f(s,"SPAN",{class:!0,"data-svelte-h":!0}),Ge(e)!=="svelte-q8ydod"&&(e.textContent=t),this.h()},h(){r(e,"class","ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-800 animate-bounce")},m(s,n){j(s,e,n)},d(s){s&&o(e)}}}function il(a){let e,t=(18-(a[2]+a[13])).toFixed(2)+"",s,n;return{c(){e=d("span"),s=B(t),n=B(" months left")},l(i){e=f(i,"SPAN",{});var c=u(e);s=S(c,t),n=S(c," months left"),c.forEach(o)},m(i,c){j(i,e,c),l(e,s),l(e,n)},p(i,c){c[0]&8196&&t!==(t=(18-(i[2]+i[13])).toFixed(2)+"")&&F(s,t)},d(i){i&&o(e)}}}function Il(a){let e,t="‚Äî";return{c(){e=d("span"),e.textContent=t,this.h()},l(s){e=f(s,"SPAN",{class:!0,"data-svelte-h":!0}),Ge(e)!=="svelte-1fw3r8p"&&(e.textContent=t),this.h()},h(){r(e,"class","text-gray-400 text-lg font-bold")},m(s,n){j(s,e,n)},d(s){s&&o(e)}}}function Vl(a){let e,t,s,n,i,c,h;return{c(){e=ke("svg"),t=ke("defs"),s=ke("linearGradient"),n=ke("stop"),i=ke("stop"),c=ke("rect"),h=ke("path"),this.h()},l(k){e=De(k,"svg",{class:!0,fill:!0,viewBox:!0,stroke:!0});var b=u(e);t=De(b,"defs",{});var L=u(t);s=De(L,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0});var M=u(s);n=De(M,"stop",{offset:!0,"stop-color":!0}),u(n).forEach(o),i=De(M,"stop",{offset:!0,"stop-color":!0}),u(i).forEach(o),M.forEach(o),L.forEach(o),c=De(b,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,fill:!0}),u(c).forEach(o),h=De(b,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),u(h).forEach(o),b.forEach(o),this.h()},h(){r(n,"offset","50%"),r(n,"stop-color","#f59e42"),r(i,"offset","50%"),r(i,"stop-color","#fff"),r(s,"id","half-fill"),r(s,"x1","0"),r(s,"x2","1"),r(s,"y1","0"),r(s,"y2","0"),r(c,"x","4"),r(c,"y","4"),r(c,"width","16"),r(c,"height","16"),r(c,"rx","4"),r(c,"fill","url(#half-fill)"),r(h,"d","M9 12l2 2 4-4"),r(h,"stroke","#f59e42"),r(h,"stroke-width","2"),r(h,"stroke-linecap","round"),r(h,"stroke-linejoin","round"),r(e,"class","h-6 w-6 text-yellow-500"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke","currentColor")},m(k,b){j(k,e,b),l(e,t),l(t,s),l(s,n),l(s,i),l(e,c),l(e,h)},d(k){k&&o(e)}}}function Pl(a){let e,t="‚úî";return{c(){e=d("span"),e.textContent=t,this.h()},l(s){e=f(s,"SPAN",{class:!0,"data-svelte-h":!0}),Ge(e)!=="svelte-1gyrnma"&&(e.textContent=t),this.h()},h(){r(e,"class","text-green-600 text-lg font-bold animate-pulse")},m(s,n){j(s,e,n)},d(s){s&&o(e)}}}function Al(a){let e,t=a[14]("payments.tracker.partial_paid",{percent:Math.round(a[13]*100)})+"",s;return{c(){e=d("div"),s=B(t),this.h()},l(n){e=f(n,"DIV",{class:!0});var i=u(e);s=S(i,t),i.forEach(o),this.h()},h(){r(e,"class","absolute z-10 left-1/2 -translate-x-1/2 bottom-full mb-2 hidden group-hover:block bg-white border border-yellow-300 rounded shadow px-2 py-1 text-xs text-yellow-700 whitespace-nowrap")},m(n,i){j(n,e,i),l(e,s)},p(n,i){i[0]&24576&&t!==(t=n[14]("payments.tracker.partial_paid",{percent:Math.round(n[13]*100)})+"")&&F(s,t)},d(n){n&&o(e)}}}function Ml(a){let e,t=a[14]("payments.tracker.paid_on",{date:yt(a[3][a[30]]?.paymentDate),amount:ce(a[3][a[30]]?.amount)})+"",s;return{c(){e=d("div"),s=B(t),this.h()},l(n){e=f(n,"DIV",{class:!0});var i=u(e);s=S(i,t),i.forEach(o),this.h()},h(){r(e,"class","absolute z-10 left-1/2 -translate-x-1/2 bottom-full mb-2 hidden group-hover:block bg-white border border-gray-300 rounded shadow px-2 py-1 text-xs text-gray-700 whitespace-nowrap")},m(n,i){j(n,e,i),l(e,s)},p(n,i){i[0]&16392&&t!==(t=n[14]("payments.tracker.paid_on",{date:yt(n[3][n[30]]?.paymentDate),amount:ce(n[3][n[30]]?.amount)})+"")&&F(s,t)},d(n){n&&o(e)}}}function dl(a){let e,t,s,n=a[14]("payments.tracker.month",{n:a[30]+1})+"",i,c,h,k,b;function L(m,_){return m[30]<m[2]?Pl:m[30]===m[2]&&m[13]>0?Vl:Il}let M=L(a),D=M(a);function R(m,_){if(m[30]<m[2])return Ml;if(m[30]===m[2]&&m[13]>0)return Al}let I=R(a),p=I&&I(a);return{c(){e=d("div"),t=d("div"),s=d("span"),i=B(n),c=P(),D.c(),k=P(),p&&p.c(),b=P(),this.h()},l(m){e=f(m,"DIV",{class:!0});var _=u(e);t=f(_,"DIV",{class:!0});var w=u(t);s=f(w,"SPAN",{class:!0});var V=u(s);i=S(V,n),V.forEach(o),c=A(w),D.l(w),w.forEach(o),k=A(_),p&&p.l(_),b=A(_),_.forEach(o),this.h()},h(){r(s,"class","text-xs font-semibold mb-1"),r(t,"class",h="flex flex-col items-center justify-center h-16 w-full rounded-lg border-2 transition-colors duration-300 "+(a[30]<a[2]?"bg-green-100 border-green-500":a[30]===a[2]&&a[13]>0?"bg-yellow-100 border-yellow-500":"bg-gray-100 border-gray-300")+" hover:shadow-lg cursor-pointer"),r(e,"class","relative group")},m(m,_){j(m,e,_),l(e,t),l(t,s),l(s,i),l(t,c),D.m(t,null),l(e,k),p&&p.m(e,null),l(e,b)},p(m,_){_[0]&16384&&n!==(n=m[14]("payments.tracker.month",{n:m[30]+1})+"")&&F(i,n),M!==(M=L(m))&&(D.d(1),D=M(m),D&&(D.c(),D.m(t,null))),_[0]&8196&&h!==(h="flex flex-col items-center justify-center h-16 w-full rounded-lg border-2 transition-colors duration-300 "+(m[30]<m[2]?"bg-green-100 border-green-500":m[30]===m[2]&&m[13]>0?"bg-yellow-100 border-yellow-500":"bg-gray-100 border-gray-300")+" hover:shadow-lg cursor-pointer")&&r(t,"class",h),I===(I=R(m))&&p?p.p(m,_):(p&&p.d(1),p=I&&I(m),p&&(p.c(),p.m(e,b)))},d(m){m&&o(e),D.d(),p&&p.d()}}}function Tl(a){let e,t,s,n,i,c=a[14]("payments.stats.total_paid")+"",h,k,b,L=ce(a[1])+"",M,D,R,I,p=a[14]("payments.stats.remaining_balance")+"",m,_,w,V=ce(a[0])+"",y,E,v,T,H=a[14]("payments.stats.progress")+"",Q,J,G,X,U,Ce,N,W=a[12].toFixed(1)+"",Ue,vt,gt,Y,Ie,Le=a[14]("payments.form.add_payment")+"",qe,bt,xe,Oe,ee,oe,he,me,Be=a[14]("payments.form.amount")+"",ze,Et,z,wt,pe,_e,Se=a[14]("payments.form.payment_date")+"",Ke,kt,le,Dt,ye,ve,Ne=a[14]("payments.form.notes")+"",Xe,It,se,Vt,Ve,Z,Ye,Fe=a[14]("payments.form.add_payment")+"",Je,Pt,$,ie,Pe,Re=a[14]("payments.history.title")+"",Qe,At,de,ge,be,He=a[14]("payments.history.start_date")+"",We,Mt,ae,Tt,Ee,we,je=a[14]("payments.history.end_date")+"",Ze,Ct,re,Lt,$e,Bt,Nt,q=a[5]&&ll(a),x=a[6]&&sl(a),K=a[4]&&al();function Ft(g,C){return g[4]?Dl:g[5]?kl:g[3].length===0?wl:El}let et=Ft(a),te=et(a),O=!a[4]&&a[3].length>0&&nl(a);return{c(){e=d("div"),t=d("div"),s=d("div"),n=d("div"),i=d("h3"),h=B(c),k=P(),b=d("p"),M=B(L),D=P(),R=d("div"),I=d("h3"),m=B(p),_=P(),w=d("p"),y=B(V),E=P(),v=d("div"),T=d("h3"),Q=B(H),J=P(),G=d("div"),X=d("div"),U=d("div"),Ce=P(),N=d("p"),Ue=B(W),vt=B("%"),gt=P(),Y=d("div"),Ie=d("h3"),qe=B(Le),bt=P(),q&&q.c(),xe=P(),x&&x.c(),Oe=P(),ee=d("form"),oe=d("div"),he=d("div"),me=d("label"),ze=B(Be),Et=P(),z=d("input"),wt=P(),pe=d("div"),_e=d("label"),Ke=B(Se),kt=P(),le=d("input"),Dt=P(),ye=d("div"),ve=d("label"),Xe=B(Ne),It=P(),se=d("textarea"),Vt=P(),Ve=d("div"),Z=d("button"),K&&K.c(),Ye=P(),Je=B(Fe),Pt=P(),$=d("div"),ie=d("div"),Pe=d("h3"),Qe=B(Re),At=P(),de=d("div"),ge=d("div"),be=d("label"),We=B(He),Mt=P(),ae=d("input"),Tt=P(),Ee=d("div"),we=d("label"),Ze=B(je),Ct=P(),re=d("input"),Lt=P(),te.c(),$e=P(),O&&O.c(),this.h()},l(g){e=f(g,"DIV",{class:!0});var C=u(e);t=f(C,"DIV",{class:!0});var Rt=u(t);s=f(Rt,"DIV",{class:!0});var Ae=u(s);n=f(Ae,"DIV",{});var tt=u(n);i=f(tt,"H3",{class:!0});var Ht=u(i);h=S(Ht,c),Ht.forEach(o),k=A(tt),b=f(tt,"P",{class:!0});var jt=u(b);M=S(jt,L),jt.forEach(o),tt.forEach(o),D=A(Ae),R=f(Ae,"DIV",{});var lt=u(R);I=f(lt,"H3",{class:!0});var Gt=u(I);m=S(Gt,p),Gt.forEach(o),_=A(lt),w=f(lt,"P",{class:!0});var Ut=u(w);y=S(Ut,V),Ut.forEach(o),lt.forEach(o),E=A(Ae),v=f(Ae,"DIV",{});var st=u(v);T=f(st,"H3",{class:!0});var qt=u(T);Q=S(qt,H),qt.forEach(o),J=A(st),G=f(st,"DIV",{class:!0});var at=u(G);X=f(at,"DIV",{class:!0});var xt=u(X);U=f(xt,"DIV",{class:!0,style:!0}),u(U).forEach(o),xt.forEach(o),Ce=A(at),N=f(at,"P",{class:!0});var St=u(N);Ue=S(St,W),vt=S(St,"%"),St.forEach(o),at.forEach(o),st.forEach(o),Ae.forEach(o),Rt.forEach(o),gt=A(C),Y=f(C,"DIV",{class:!0});var fe=u(Y);Ie=f(fe,"H3",{class:!0});var Ot=u(Ie);qe=S(Ot,Le),Ot.forEach(o),bt=A(fe),q&&q.l(fe),xe=A(fe),x&&x.l(fe),Oe=A(fe),ee=f(fe,"FORM",{class:!0});var Me=u(ee);oe=f(Me,"DIV",{class:!0});var rt=u(oe);he=f(rt,"DIV",{});var nt=u(he);me=f(nt,"LABEL",{for:!0,class:!0});var zt=u(me);ze=S(zt,Be),zt.forEach(o),Et=A(nt),z=f(nt,"INPUT",{type:!0,id:!0,step:!0,min:!0,max:!0,class:!0}),nt.forEach(o),wt=A(rt),pe=f(rt,"DIV",{});var ot=u(pe);_e=f(ot,"LABEL",{for:!0,class:!0});var Kt=u(_e);Ke=S(Kt,Se),Kt.forEach(o),kt=A(ot),le=f(ot,"INPUT",{type:!0,id:!0,class:!0}),ot.forEach(o),rt.forEach(o),Dt=A(Me),ye=f(Me,"DIV",{});var it=u(ye);ve=f(it,"LABEL",{for:!0,class:!0});var Xt=u(ve);Xe=S(Xt,Ne),Xt.forEach(o),It=A(it),se=f(it,"TEXTAREA",{id:!0,rows:!0,class:!0}),u(se).forEach(o),it.forEach(o),Vt=A(Me),Ve=f(Me,"DIV",{class:!0});var Yt=u(Ve);Z=f(Yt,"BUTTON",{type:!0,class:!0});var dt=u(Z);K&&K.l(dt),Ye=A(dt),Je=S(dt,Fe),dt.forEach(o),Yt.forEach(o),Me.forEach(o),fe.forEach(o),Pt=A(C),$=f(C,"DIV",{class:!0});var Te=u($);ie=f(Te,"DIV",{class:!0});var ft=u(ie);Pe=f(ft,"H3",{class:!0});var Jt=u(Pe);Qe=S(Jt,Re),Jt.forEach(o),At=A(ft),de=f(ft,"DIV",{class:!0});var ut=u(de);ge=f(ut,"DIV",{});var ct=u(ge);be=f(ct,"LABEL",{for:!0,class:!0});var Qt=u(be);We=S(Qt,He),Qt.forEach(o),Mt=A(ct),ae=f(ct,"INPUT",{type:!0,id:!0,class:!0}),ct.forEach(o),Tt=A(ut),Ee=f(ut,"DIV",{});var ht=u(Ee);we=f(ht,"LABEL",{for:!0,class:!0});var Wt=u(we);Ze=S(Wt,je),Wt.forEach(o),Ct=A(ht),re=f(ht,"INPUT",{type:!0,id:!0,class:!0}),ht.forEach(o),ut.forEach(o),ft.forEach(o),Lt=A(Te),te.l(Te),$e=A(Te),O&&O.l(Te),Te.forEach(o),C.forEach(o),this.h()},h(){r(i,"class","text-sm font-medium text-gray-500"),r(b,"class","mt-1 text-2xl font-semibold text-gray-900"),r(I,"class","text-sm font-medium text-gray-500"),r(w,"class","mt-1 text-2xl font-semibold text-gray-900"),r(T,"class","text-sm font-medium text-gray-500"),r(U,"class","bg-primary-600 h-2.5 rounded-full transition-all duration-300"),pt(U,"width",a[12]+"%"),r(X,"class","w-full bg-gray-200 rounded-full h-2.5"),r(N,"class","mt-1 text-sm text-gray-600"),r(G,"class","mt-1"),r(s,"class","grid grid-cols-1 md:grid-cols-3 gap-6"),r(t,"class","bg-white rounded-xl shadow p-6"),r(Ie,"class","text-lg font-medium text-gray-900 mb-4"),r(me,"for","amount"),r(me,"class","block text-sm font-medium text-gray-700"),r(z,"type","number"),r(z,"id","amount"),r(z,"step","0.01"),r(z,"min","0"),r(z,"max",a[0]),r(z,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"),z.required=!0,r(_e,"for","paymentDate"),r(_e,"class","block text-sm font-medium text-gray-700"),r(le,"type","date"),r(le,"id","paymentDate"),r(le,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"),le.required=!0,r(oe,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),r(ve,"for","notes"),r(ve,"class","block text-sm font-medium text-gray-700"),r(se,"id","notes"),r(se,"rows","3"),r(se,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"),r(Z,"type","submit"),Z.disabled=a[4],r(Z,"class","inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"),r(Ve,"class","flex justify-end"),r(ee,"class","space-y-4"),r(Y,"class","bg-white rounded-xl shadow p-6"),r(Pe,"class","text-lg font-medium text-gray-900"),r(be,"for","startDate"),r(be,"class","block text-sm font-medium text-gray-700"),r(ae,"type","date"),r(ae,"id","startDate"),r(ae,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"),r(we,"for","endDate"),r(we,"class","block text-sm font-medium text-gray-700"),r(re,"type","date"),r(re,"id","endDate"),r(re,"class","mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"),r(de,"class","flex space-x-4"),r(ie,"class","flex justify-between items-center mb-4"),r($,"class","bg-white rounded-xl shadow p-6"),r(e,"class","space-y-8")},m(g,C){j(g,e,C),l(e,t),l(t,s),l(s,n),l(n,i),l(i,h),l(n,k),l(n,b),l(b,M),l(s,D),l(s,R),l(R,I),l(I,m),l(R,_),l(R,w),l(w,y),l(s,E),l(s,v),l(v,T),l(T,Q),l(v,J),l(v,G),l(G,X),l(X,U),l(G,Ce),l(G,N),l(N,Ue),l(N,vt),l(e,gt),l(e,Y),l(Y,Ie),l(Ie,qe),l(Y,bt),q&&q.m(Y,null),l(Y,xe),x&&x.m(Y,null),l(Y,Oe),l(Y,ee),l(ee,oe),l(oe,he),l(he,me),l(me,ze),l(he,Et),l(he,z),ne(z,a[7]),l(oe,wt),l(oe,pe),l(pe,_e),l(_e,Ke),l(pe,kt),l(pe,le),ne(le,a[8]),l(ee,Dt),l(ee,ye),l(ye,ve),l(ve,Xe),l(ye,It),l(ye,se),ne(se,a[9]),l(ee,Vt),l(ee,Ve),l(Ve,Z),K&&K.m(Z,null),l(Z,Ye),l(Z,Je),l(e,Pt),l(e,$),l($,ie),l(ie,Pe),l(Pe,Qe),l(ie,At),l(ie,de),l(de,ge),l(ge,be),l(be,We),l(ge,Mt),l(ge,ae),ne(ae,a[10]),l(de,Tt),l(de,Ee),l(Ee,we),l(we,Ze),l(Ee,Ct),l(Ee,re),ne(re,a[11]),l($,Lt),te.m($,null),l($,$e),O&&O.m($,null),Bt||(Nt=[ue(z,"input",a[20]),ue(le,"input",a[21]),ue(se,"input",a[22]),ue(ee,"submit",hl(a[15])),ue(ae,"input",a[23]),ue(ae,"change",a[16]),ue(re,"input",a[24]),ue(re,"change",a[16])],Bt=!0)},p(g,C){C[0]&16384&&c!==(c=g[14]("payments.stats.total_paid")+"")&&F(h,c),C[0]&2&&L!==(L=ce(g[1])+"")&&F(M,L),C[0]&16384&&p!==(p=g[14]("payments.stats.remaining_balance")+"")&&F(m,p),C[0]&1&&V!==(V=ce(g[0])+"")&&F(y,V),C[0]&16384&&H!==(H=g[14]("payments.stats.progress")+"")&&F(Q,H),C[0]&4096&&pt(U,"width",g[12]+"%"),C[0]&4096&&W!==(W=g[12].toFixed(1)+"")&&F(Ue,W),C[0]&16384&&Le!==(Le=g[14]("payments.form.add_payment")+"")&&F(qe,Le),g[5]?q?q.p(g,C):(q=ll(g),q.c(),q.m(Y,xe)):q&&(q.d(1),q=null),g[6]?x?x.p(g,C):(x=sl(g),x.c(),x.m(Y,Oe)):x&&(x.d(1),x=null),C[0]&16384&&Be!==(Be=g[14]("payments.form.amount")+"")&&F(ze,Be),C[0]&1&&r(z,"max",g[0]),C[0]&128&&fl(z.value)!==g[7]&&ne(z,g[7]),C[0]&16384&&Se!==(Se=g[14]("payments.form.payment_date")+"")&&F(Ke,Se),C[0]&256&&ne(le,g[8]),C[0]&16384&&Ne!==(Ne=g[14]("payments.form.notes")+"")&&F(Xe,Ne),C[0]&512&&ne(se,g[9]),g[4]?K||(K=al(),K.c(),K.m(Z,Ye)):K&&(K.d(1),K=null),C[0]&16384&&Fe!==(Fe=g[14]("payments.form.add_payment")+"")&&F(Je,Fe),C[0]&16&&(Z.disabled=g[4]),C[0]&16384&&Re!==(Re=g[14]("payments.history.title")+"")&&F(Qe,Re),C[0]&16384&&He!==(He=g[14]("payments.history.start_date")+"")&&F(We,He),C[0]&1024&&ne(ae,g[10]),C[0]&16384&&je!==(je=g[14]("payments.history.end_date")+"")&&F(Ze,je),C[0]&2048&&ne(re,g[11]),et===(et=Ft(g))&&te?te.p(g,C):(te.d(1),te=et(g),te&&(te.c(),te.m($,$e))),!g[4]&&g[3].length>0?O?O.p(g,C):(O=nl(g),O.c(),O.m($,null)):O&&(O.d(1),O=null)},i:Zt,o:Zt,d(g){g&&o(e),q&&q.d(),x&&x.d(),K&&K.d(),te.d(),O&&O.d(),Bt=!1,ml(Nt)}}}function Cl(a,e,t){let s,n,i;pl(a,bl,N=>t(14,i=N));let{cessionId:c}=e,{remainingBalance:h}=e,{totalLoanAmount:k}=e,{monthlyPayment:b}=e,L=[],M=!1,D="",R="",I="",p=mt(new Date,"yyyy-MM-dd"),m="REGULAR",_="",w=mt(gl(new Date,3),"yyyy-MM-dd"),V=mt(new Date,"yyyy-MM-dd"),y=0,E=0;_l(async()=>{if(!c||c==="null"||c==="undefined"){t(5,D=i("payments.errors.invalid_cession_id"));return}await v()});async function v(){if(!c||c==="null"||c==="undefined"){t(5,D=i("payments.errors.invalid_cession_id"));return}t(4,M=!0),t(5,D="");try{const N=await $t.getPaymentsByDateRange(c,w,V);N.success?(t(3,L=N.data),T()):t(5,D=N.error||i("payments.errors.load_failed"))}catch{t(5,D=i("payments.errors.load_failed"))}finally{t(4,M=!1)}}function T(){t(1,y=L.reduce((N,W)=>N+W.amount,0)),t(12,E=k>0?y/k*100:0)}async function H(){if(!I||!p){t(5,D=i("payments.validation.required_fields"));return}const N=parseFloat(I);if(isNaN(N)||N<=0){t(5,D=i("payments.validation.invalid_amount"));return}if(N>h){t(5,D=i("payments.validation.amount_exceeds_balance"));return}t(4,M=!0),t(5,D="");try{const W=await $t.create({cessionId:c,amount:N,paymentDate:p,paymentType:m,notes:_});W.success?(t(6,R=i("payments.success.added")),t(7,I=""),t(8,p=mt(new Date,"yyyy-MM-dd")),m="REGULAR",t(9,_=""),await v(),t(0,h-=N),h<0&&t(0,h=0)):t(5,D=W.error||i("payments.errors.add_failed"))}catch(W){t(5,D=W.message||i("payments.errors.add_failed"))}finally{t(4,M=!1)}}function Q(){v()}function J(){I=fl(this.value),t(7,I)}function G(){p=this.value,t(8,p)}function X(){_=this.value,t(9,_)}function U(){w=this.value,t(10,w)}function Ce(){V=this.value,t(11,V)}return a.$$set=N=>{"cessionId"in N&&t(17,c=N.cessionId),"remainingBalance"in N&&t(0,h=N.remainingBalance),"totalLoanAmount"in N&&t(18,k=N.totalLoanAmount),"monthlyPayment"in N&&t(19,b=N.monthlyPayment)},a.$$.update=()=>{a.$$.dirty[0]&524290&&t(2,s=b>0?Math.floor(y/b):0),a.$$.dirty[0]&524294&&t(13,n=b>0?y/b-s:0)},[h,y,s,L,M,D,R,I,p,_,w,V,E,n,i,H,Q,c,k,b,J,G,X,U,Ce]}class jl extends yl{constructor(e){super(),vl(this,e,Cl,Tl,cl,{cessionId:17,remainingBalance:0,totalLoanAmount:18,monthlyPayment:19},null,[-1,-1])}}export{jl as P};
