import{s as il,f as d,a as g,l as w,g as u,h as i,y as ct,c as b,m as E,d as a,j as r,k as sr,i as U,w as t,N as Ne,z as We,Q as dl,n as T,R as al,x as kt,H as ul,u as fl,o as cl,t as hl,F as ke,G as De,L as Yr,I as ht}from"./scheduler.fb6ad399.js";import{S as pl,i as ml,g as ol,t as ar,c as nl,a as Lt,f as we}from"./index.19f0e15d.js";import{e as rr}from"./each.eb6105d2.js";import{a as Jr}from"./api.b4688d57.js";import{f as Ze,a as Kr}from"./formatters.e505497c.js";import{t as vl}from"./index.92f608cc.js";import{c as Re,a as Ee}from"./index.548ee1c0.js";import{f as lr}from"./index.7c030542.js";import{s as _l}from"./index.324547c2.js";function Wr(o,e,l){const s=o.slice();return s[28]=e[l],s[30]=l,s}function Zr(o,e,l){const s=o.slice();return s[31]=e[l],s[30]=l,s}function $r(o){let e,l;return{c(){e=d("div"),l=w(o[3]),this.h()},l(s){e=u(s,"DIV",{class:!0});var n=i(e);l=E(n,o[3]),n.forEach(a),this.h()},h(){r(e,"class","mb-4 p-4 bg-red-50 text-red-600 rounded-lg border border-red-200 text-sm font-medium")},m(s,n){U(s,e,n),t(e,l)},p(s,n){n[0]&8&&T(l,s[3])},d(s){s&&a(e)}}}function el(o){let e,l;return{c(){e=d("div"),l=w(o[4]),this.h()},l(s){e=u(s,"DIV",{class:!0});var n=i(e);l=E(n,o[4]),n.forEach(a),this.h()},h(){r(e,"class","mb-4 p-4 bg-green-50 text-green-600 rounded-lg border border-green-200 text-sm font-medium")},m(s,n){U(s,e,n),t(e,l)},p(s,n){n[0]&16&&T(l,s[4])},d(s){s&&a(e)}}}function yl(o){let e,l,s,n=o[14]("payments.form.add_payment")+"",c;return{c(){e=ke("svg"),l=ke("path"),s=g(),c=w(n),this.h()},l(h){e=De(h,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var f=i(e);l=De(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),i(l).forEach(a),f.forEach(a),s=b(h),c=E(h,n),this.h()},h(){r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),r(e,"class","w-4 h-4 mr-2"),r(e,"fill","none"),r(e,"stroke","currentColor"),r(e,"viewBox","0 0 24 24")},m(h,f){U(h,e,f),t(e,l),U(h,s,f),U(h,c,f)},p(h,f){f[0]&16384&&n!==(n=h[14]("payments.form.add_payment")+"")&&T(c,n)},d(h){h&&(a(e),a(s),a(c))}}}function gl(o){let e,l,s,n,c=o[14]("common.processing")+"",h;return{c(){e=ke("svg"),l=ke("circle"),s=ke("path"),n=g(),h=w(c),this.h()},l(f){e=De(f,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var _=i(e);l=De(_,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),i(l).forEach(a),s=De(_,"path",{class:!0,fill:!0,d:!0}),i(s).forEach(a),_.forEach(a),n=b(f),h=E(f,c),this.h()},h(){r(l,"class","opacity-25"),r(l,"cx","12"),r(l,"cy","12"),r(l,"r","10"),r(l,"stroke","currentColor"),r(l,"stroke-width","4"),r(s,"class","opacity-75"),r(s,"fill","currentColor"),r(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),r(e,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24")},m(f,_){U(f,e,_),t(e,l),t(e,s),U(f,n,_),U(f,h,_)},p(f,_){_[0]&16384&&c!==(c=f[14]("common.processing")+"")&&T(h,c)},d(f){f&&(a(e),a(n),a(h))}}}function bl(o){let e,l,s,n,c,h=o[14]("payments.history.columns.date")+"",f,_,k,x=o[14]("payments.history.columns.amount")+"",A,I,v,P=o[14]("payments.history.columns.type")+"",H,N,Q,F=o[14]("payments.history.columns.notes")+"",R,S,B,C,G,z,Z,te=o[14]("payments.tracker.title")+"",ce,pe,xe,re,V,K,me,W,le,Se=(o[12]+o[13]).toFixed(2)+"",Fe,ne,ve=o[14]("payments.tracker.months_paid")+"",Te,Ge,$e,ie,X,Ie=rr(o[1]),L=[];for(let m=0;m<Ie.length;m+=1)L[m]=tl(Zr(o,Ie,m));const et=m=>ar(L[m],1,1,()=>{L[m]=null});let q=o[12]+o[13]>=18&&rl(o),Y=o[12]+o[13]<18&&ll(o),se=rr(Array(18)),O=[];for(let m=0;m<se.length;m+=1)O[m]=sl(Wr(o,se,m));return{c(){e=d("div"),l=d("table"),s=d("thead"),n=d("tr"),c=d("th"),f=w(h),_=g(),k=d("th"),A=w(x),I=g(),v=d("th"),H=w(P),N=g(),Q=d("th"),R=w(F),S=g(),B=d("tbody");for(let m=0;m<L.length;m+=1)L[m].c();C=g(),G=d("div"),z=d("h3"),Z=d("span"),ce=w(te),pe=g(),q&&q.c(),xe=g(),re=d("div"),V=d("div"),K=d("div"),me=g(),W=d("div"),le=d("span"),Fe=w(Se),ne=w(" / 18 "),Te=w(ve),Ge=g(),Y&&Y.c(),$e=g(),ie=d("div");for(let m=0;m<O.length;m+=1)O[m].c();this.h()},l(m){e=u(m,"DIV",{class:!0});var M=i(e);l=u(M,"TABLE",{class:!0});var y=i(l);s=u(y,"THEAD",{class:!0});var de=i(s);n=u(de,"TR",{});var he=i(n);c=u(he,"TH",{class:!0});var pt=i(c);f=E(pt,h),pt.forEach(a),_=b(he),k=u(he,"TH",{class:!0});var ae=i(k);A=E(ae,x),ae.forEach(a),I=b(he),v=u(he,"TH",{class:!0});var tt=i(v);H=E(tt,P),tt.forEach(a),N=b(he),Q=u(he,"TH",{class:!0});var rt=i(Q);R=E(rt,F),rt.forEach(a),he.forEach(a),de.forEach(a),S=b(y),B=u(y,"TBODY",{class:!0});var ue=i(B);for(let _e=0;_e<L.length;_e+=1)L[_e].l(ue);ue.forEach(a),y.forEach(a),M.forEach(a),C=b(m),G=u(m,"DIV",{class:!0});var oe=i(G);z=u(oe,"H3",{class:!0});var fe=i(z);Z=u(fe,"SPAN",{class:!0});var Ve=i(Z);ce=E(Ve,te),Ve.forEach(a),pe=b(fe),q&&q.l(fe),fe.forEach(a),xe=b(oe),re=u(oe,"DIV",{class:!0});var Ae=i(re);V=u(Ae,"DIV",{class:!0});var lt=i(V);K=u(lt,"DIV",{class:!0,style:!0}),i(K).forEach(a),lt.forEach(a),me=b(Ae),W=u(Ae,"DIV",{class:!0});var Ue=i(W);le=u(Ue,"SPAN",{});var ze=i(le);Fe=E(ze,Se),ne=E(ze," / 18 "),Te=E(ze,ve),ze.forEach(a),Ge=b(Ue),Y&&Y.l(Ue),Ue.forEach(a),Ae.forEach(a),$e=b(oe),ie=u(oe,"DIV",{class:!0});var J=i(ie);for(let _e=0;_e<O.length;_e+=1)O[_e].l(J);J.forEach(a),oe.forEach(a),this.h()},h(){r(c,"class","py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),r(k,"class","py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),r(v,"class","py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),r(Q,"class","py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),r(s,"class","bg-gray-50/80 backdrop-blur-sm"),r(B,"class","divide-y divide-gray-200"),r(l,"class","min-w-full bg-white/80 backdrop-blur-sm rounded-lg overflow-hidden"),r(e,"class","overflow-x-auto"),r(Z,"class","bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent"),r(z,"class","text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"),r(K,"class","bg-gradient-to-r from-green-500 to-green-600 h-2.5 rounded-full transition-all duration-300"),sr(K,"width",Math.min((o[12]+o[13])/18*100,100)+"%"),r(V,"class","w-full bg-gray-200 rounded-full h-2.5"),r(W,"class","flex justify-between text-xs text-gray-500 mt-1"),r(re,"class","mb-4"),r(ie,"class","grid grid-cols-3 sm:grid-cols-6 gap-2"),r(G,"class","mt-8 pt-6 border-t border-gray-200/50")},m(m,M){U(m,e,M),t(e,l),t(l,s),t(s,n),t(n,c),t(c,f),t(n,_),t(n,k),t(k,A),t(n,I),t(n,v),t(v,H),t(n,N),t(n,Q),t(Q,R),t(l,S),t(l,B);for(let y=0;y<L.length;y+=1)L[y]&&L[y].m(B,null);U(m,C,M),U(m,G,M),t(G,z),t(z,Z),t(Z,ce),t(z,pe),q&&q.m(z,null),t(G,xe),t(G,re),t(re,V),t(V,K),t(re,me),t(re,W),t(W,le),t(le,Fe),t(le,ne),t(le,Te),t(W,Ge),Y&&Y.m(W,null),t(G,$e),t(G,ie);for(let y=0;y<O.length;y+=1)O[y]&&O[y].m(ie,null);X=!0},p(m,M){if((!X||M[0]&16384)&&h!==(h=m[14]("payments.history.columns.date")+"")&&T(f,h),(!X||M[0]&16384)&&x!==(x=m[14]("payments.history.columns.amount")+"")&&T(A,x),(!X||M[0]&16384)&&P!==(P=m[14]("payments.history.columns.type")+"")&&T(H,P),(!X||M[0]&16384)&&F!==(F=m[14]("payments.history.columns.notes")+"")&&T(R,F),M[0]&2){Ie=rr(m[1]);let y;for(y=0;y<Ie.length;y+=1){const de=Zr(m,Ie,y);L[y]?(L[y].p(de,M),Lt(L[y],1)):(L[y]=tl(de),L[y].c(),Lt(L[y],1),L[y].m(B,null))}for(ol(),y=Ie.length;y<L.length;y+=1)et(y);nl()}if((!X||M[0]&16384)&&te!==(te=m[14]("payments.tracker.title")+"")&&T(ce,te),m[12]+m[13]>=18?q?q.p(m,M):(q=rl(m),q.c(),q.m(z,null)):q&&(q.d(1),q=null),(!X||M[0]&12288)&&sr(K,"width",Math.min((m[12]+m[13])/18*100,100)+"%"),(!X||M[0]&12288)&&Se!==(Se=(m[12]+m[13]).toFixed(2)+"")&&T(Fe,Se),(!X||M[0]&16384)&&ve!==(ve=m[14]("payments.tracker.months_paid")+"")&&T(Te,ve),m[12]+m[13]<18?Y?Y.p(m,M):(Y=ll(m),Y.c(),Y.m(W,null)):Y&&(Y.d(1),Y=null),M[0]&12288){se=rr(Array(18));let y;for(y=0;y<se.length;y+=1){const de=Wr(m,se,y);O[y]?O[y].p(de,M):(O[y]=sl(de),O[y].c(),O[y].m(ie,null))}for(;y<O.length;y+=1)O[y].d(1);O.length=se.length}},i(m){if(!X){for(let M=0;M<Ie.length;M+=1)Lt(L[M]);X=!0}},o(m){L=L.filter(Boolean);for(let M=0;M<L.length;M+=1)ar(L[M]);X=!1},d(m){m&&(a(e),a(C),a(G)),Yr(L,m),q&&q.d(),Y&&Y.d(),Yr(O,m)}}}function wl(o){let e,l,s='<svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H4a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>',n,c,h=o[14]("payments.history.no_payments")+"",f,_,k,x=o[14]("payments.history.no_payments_hint")+"",A;return{c(){e=d("div"),l=d("div"),l.innerHTML=s,n=g(),c=d("h3"),f=w(h),_=g(),k=d("p"),A=w(x),this.h()},l(I){e=u(I,"DIV",{class:!0});var v=i(e);l=u(v,"DIV",{class:!0,"data-svelte-h":!0}),ct(l)!=="svelte-1oo0vzi"&&(l.innerHTML=s),n=b(v),c=u(v,"H3",{class:!0});var P=i(c);f=E(P,h),P.forEach(a),_=b(v),k=u(v,"P",{class:!0});var H=i(k);A=E(H,x),H.forEach(a),v.forEach(a),this.h()},h(){r(l,"class","w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"),r(c,"class","text-lg font-medium text-gray-900 mb-2"),r(k,"class","text-gray-500"),r(e,"class","text-center py-16")},m(I,v){U(I,e,v),t(e,l),t(e,n),t(e,c),t(c,f),t(e,_),t(e,k),t(k,A)},p(I,v){v[0]&16384&&h!==(h=I[14]("payments.history.no_payments")+"")&&T(f,h),v[0]&16384&&x!==(x=I[14]("payments.history.no_payments_hint")+"")&&T(A,x)},i:ht,o:ht,d(I){I&&a(e)}}}function El(o){let e,l;return{c(){e=d("div"),l=w(o[3]),this.h()},l(s){e=u(s,"DIV",{class:!0});var n=i(e);l=E(n,o[3]),n.forEach(a),this.h()},h(){r(e,"class","text-center py-16 text-red-600 font-medium")},m(s,n){U(s,e,n),t(e,l)},p(s,n){n[0]&8&&T(l,s[3])},i:ht,o:ht,d(s){s&&a(e)}}}function kl(o){let e,l='<div class="relative"><div class="w-12 h-12 border-4 border-purple-200 rounded-full animate-spin"></div> <div class="absolute top-0 left-0 w-12 h-12 border-4 border-purple-600 rounded-full animate-spin border-t-transparent"></div></div>';return{c(){e=d("div"),e.innerHTML=l,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),ct(e)!=="svelte-1e1uibq"&&(e.innerHTML=l),this.h()},h(){r(e,"class","flex justify-center items-center py-16")},m(s,n){U(s,e,n)},p:ht,i:ht,o:ht,d(s){s&&a(e)}}}function tl(o){let e,l,s,n=Kr(o[31].paymentDate)+"",c,h,f,_=Ze(o[31].amount)+"",k,x,A,I=(o[31].paymentType||"REGULAR")+"",v,P,H,N=(o[31].notes||"-")+"",Q,F,R,S;return{c(){e=d("tr"),l=d("td"),s=d("span"),c=w(n),h=g(),f=d("td"),k=w(_),x=g(),A=d("td"),v=w(I),P=g(),H=d("td"),Q=w(N),F=g(),this.h()},l(B){e=u(B,"TR",{class:!0});var C=i(e);l=u(C,"TD",{class:!0});var G=i(l);s=u(G,"SPAN",{dir:!0});var z=i(s);c=E(z,n),z.forEach(a),G.forEach(a),h=b(C),f=u(C,"TD",{class:!0});var Z=i(f);k=E(Z,_),Z.forEach(a),x=b(C),A=u(C,"TD",{class:!0});var te=i(A);v=E(te,I),te.forEach(a),P=b(C),H=u(C,"TD",{class:!0});var ce=i(H);Q=E(ce,N),ce.forEach(a),F=b(C),C.forEach(a),this.h()},h(){r(s,"dir","ltr"),r(l,"class","py-4 px-4 whitespace-nowrap text-sm text-gray-700"),r(f,"class","py-4 px-4 whitespace-nowrap text-sm font-medium text-gray-900"),r(A,"class","py-4 px-4 whitespace-nowrap text-sm text-gray-700"),r(H,"class","py-4 px-4 text-sm text-gray-700"),r(e,"class","hover:bg-purple-50/80 transition-colors duration-150")},m(B,C){U(B,e,C),t(e,l),t(l,s),t(s,c),t(e,h),t(e,f),t(f,k),t(e,x),t(e,A),t(A,v),t(e,P),t(e,H),t(H,Q),t(e,F),S=!0},p(B,C){(!S||C[0]&2)&&n!==(n=Kr(B[31].paymentDate)+"")&&T(c,n),(!S||C[0]&2)&&_!==(_=Ze(B[31].amount)+"")&&T(k,_),(!S||C[0]&2)&&I!==(I=(B[31].paymentType||"REGULAR")+"")&&T(v,I),(!S||C[0]&2)&&N!==(N=(B[31].notes||"-")+"")&&T(Q,N)},i(B){S||(B&&kt(()=>{S&&(R||(R=we(e,Ee,{y:10,delay:o[30]*50,duration:200},!0)),R.run(1))}),S=!0)},o(B){B&&(R||(R=we(e,Ee,{y:10,delay:o[30]*50,duration:200},!1)),R.run(0)),S=!1},d(B){B&&a(e),B&&R&&R.end()}}}function rl(o){let e,l,s=o[14]("payments.tracker.fully_paid")+"",n;return{c(){e=d("span"),l=w("ðŸŽ‰ "),n=w(s),this.h()},l(c){e=u(c,"SPAN",{class:!0});var h=i(e);l=E(h,"ðŸŽ‰ "),n=E(h,s),h.forEach(a),this.h()},h(){r(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-800 animate-bounce")},m(c,h){U(c,e,h),t(e,l),t(e,n)},p(c,h){h[0]&16384&&s!==(s=c[14]("payments.tracker.fully_paid")+"")&&T(n,s)},d(c){c&&a(e)}}}function ll(o){let e,l=(18-(o[12]+o[13])).toFixed(2)+"",s,n,c=o[14]("payments.tracker.months_left")+"",h;return{c(){e=d("span"),s=w(l),n=g(),h=w(c)},l(f){e=u(f,"SPAN",{});var _=i(e);s=E(_,l),n=b(_),h=E(_,c),_.forEach(a)},m(f,_){U(f,e,_),t(e,s),t(e,n),t(e,h)},p(f,_){_[0]&12288&&l!==(l=(18-(f[12]+f[13])).toFixed(2)+"")&&T(s,l),_[0]&16384&&c!==(c=f[14]("payments.tracker.months_left")+"")&&T(h,c)},d(f){f&&a(e)}}}function Dl(o){let e,l="â€”";return{c(){e=d("span"),e.textContent=l,this.h()},l(s){e=u(s,"SPAN",{class:!0,"data-svelte-h":!0}),ct(e)!=="svelte-1fw3r8p"&&(e.textContent=l),this.h()},h(){r(e,"class","text-gray-400 text-lg font-bold")},m(s,n){U(s,e,n)},d(s){s&&a(e)}}}function xl(o){let e,l,s,n,c,h,f;return{c(){e=ke("svg"),l=ke("defs"),s=ke("linearGradient"),n=ke("stop"),c=ke("stop"),h=ke("rect"),f=ke("path"),this.h()},l(_){e=De(_,"svg",{class:!0,fill:!0,viewBox:!0,stroke:!0});var k=i(e);l=De(k,"defs",{});var x=i(l);s=De(x,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0});var A=i(s);n=De(A,"stop",{offset:!0,"stop-color":!0}),i(n).forEach(a),c=De(A,"stop",{offset:!0,"stop-color":!0}),i(c).forEach(a),A.forEach(a),x.forEach(a),h=De(k,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,fill:!0}),i(h).forEach(a),f=De(k,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),i(f).forEach(a),k.forEach(a),this.h()},h(){r(n,"offset","50%"),r(n,"stop-color","#f59e42"),r(c,"offset","50%"),r(c,"stop-color","#fff"),r(s,"id","half-fill"),r(s,"x1","0"),r(s,"x2","1"),r(s,"y1","0"),r(s,"y2","0"),r(h,"x","4"),r(h,"y","4"),r(h,"width","16"),r(h,"height","16"),r(h,"rx","4"),r(h,"fill","url(#half-fill)"),r(f,"d","M9 12l2 2 4-4"),r(f,"stroke","#f59e42"),r(f,"stroke-width","2"),r(f,"stroke-linecap","round"),r(f,"stroke-linejoin","round"),r(e,"class","h-6 w-6 text-yellow-500"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke","currentColor")},m(_,k){U(_,e,k),t(e,l),t(l,s),t(s,n),t(s,c),t(e,h),t(e,f)},d(_){_&&a(e)}}}function Il(o){let e,l="âœ”";return{c(){e=d("span"),e.textContent=l,this.h()},l(s){e=u(s,"SPAN",{class:!0,"data-svelte-h":!0}),ct(e)!=="svelte-1gyrnma"&&(e.textContent=l),this.h()},h(){r(e,"class","text-green-600 text-lg font-bold animate-pulse")},m(s,n){U(s,e,n)},d(s){s&&a(e)}}}function sl(o){let e,l,s,n,c=o[30]+1+"",h,f,_,k;function x(v,P){return v[30]<v[12]?Il:v[30]===v[12]&&v[13]>0?xl:Dl}let A=x(o),I=A(o);return{c(){e=d("div"),l=d("div"),s=d("span"),n=w("Mois "),h=w(c),f=g(),I.c(),k=g(),this.h()},l(v){e=u(v,"DIV",{class:!0});var P=i(e);l=u(P,"DIV",{class:!0});var H=i(l);s=u(H,"SPAN",{class:!0});var N=i(s);n=E(N,"Mois "),h=E(N,c),N.forEach(a),f=b(H),I.l(H),H.forEach(a),k=b(P),P.forEach(a),this.h()},h(){r(s,"class","text-xs font-semibold mb-1"),r(l,"class",_="flex flex-col items-center justify-center h-16 w-full rounded-lg border-2 transition-all duration-300 "+(o[30]<o[12]?"bg-green-100 border-green-500 hover:shadow-lg":o[30]===o[12]&&o[13]>0?"bg-yellow-100 border-yellow-500 hover:shadow-lg":"bg-gray-100 border-gray-300 hover:border-gray-400")),r(e,"class","relative group")},m(v,P){U(v,e,P),t(e,l),t(l,s),t(s,n),t(s,h),t(l,f),I.m(l,null),t(e,k)},p(v,P){A!==(A=x(v))&&(I.d(1),I=A(v),I&&(I.c(),I.m(l,null))),P[0]&12288&&_!==(_="flex flex-col items-center justify-center h-16 w-full rounded-lg border-2 transition-all duration-300 "+(v[30]<v[12]?"bg-green-100 border-green-500 hover:shadow-lg":v[30]===v[12]&&v[13]>0?"bg-yellow-100 border-yellow-500 hover:shadow-lg":"bg-gray-100 border-gray-300 hover:border-gray-400"))&&r(l,"class",_)},d(v){v&&a(e),I.d()}}}function Vl(o){let e,l,s,n,c,h='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01"></path></svg>',f,_,k,x=o[14]("payments.stats.total_paid")+"",A,I,v,P=Ze(o[10])+"",H,N,Q,F,R,S,B='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01"></path></svg>',C,G,z,Z=o[14]("payments.stats.remaining_balance")+"",te,ce,pe,xe=Ze(o[0])+"",re,V,K,me,W,le,Se='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l-4 4-4-4"></path></svg>',Fe,ne,ve,Te=o[14]("payments.stats.progress")+"",Ge,$e,ie,X,Ie,L,et=o[11].toFixed(1)+"",q,Y,se,O,m,M,y,de=o[14]("payments.form.add_payment")+"",he,pt,ae,tt,rt,ue,oe,fe,Ve,Ae=o[14]("payments.form.amount")+"",lt,Ue,ze,J,_e,or,qe,Dt=o[14]("payments.form.remaining_balance")+"",Pt,nr,mt,xt=Ze(o[0])+"",Ht,ir,st,Oe,It=o[14]("payments.form.payment_date")+"",Bt,dr,ur,Le,fr,at,ot,Vt=o[14]("payments.form.notes")+"",Ct,cr,ye,jt,hr,vt,Pe,Qe,pr,He,_t,Xe,yt,Mt=o[14]("payments.history.title")+"",Nt,mr,Ye,nt,it,Tt=o[14]("payments.history.start_date")+"",Rt,vr,Be,_r,dt,ut,At=o[14]("payments.history.end_date")+"",St,yr,Ce,gr,ft,ge,be,Je,j,br,Dr,$=o[3]&&$r(o),ee=o[4]&&el(o);function xr(p,D){return p[2]?gl:yl}let Ft=xr(o),Me=Ft(o);const Ir=[kl,El,wl,bl],Ke=[];function Vr(p,D){return p[2]?0:p[3]?1:p[1].length===0?2:3}return ge=Vr(o),be=Ke[ge]=Ir[ge](o),{c(){e=d("div"),l=d("div"),s=d("div"),n=d("div"),c=d("div"),c.innerHTML=h,f=g(),_=d("div"),k=d("h3"),A=w(x),I=g(),v=d("p"),H=w(P),Q=g(),F=d("div"),R=d("div"),S=d("div"),S.innerHTML=B,C=g(),G=d("div"),z=d("h3"),te=w(Z),ce=g(),pe=d("p"),re=w(xe),K=g(),me=d("div"),W=d("div"),le=d("div"),le.innerHTML=Se,Fe=g(),ne=d("div"),ve=d("h3"),Ge=w(Te),$e=g(),ie=d("div"),X=d("div"),Ie=g(),L=d("p"),q=w(et),Y=w("%"),O=g(),m=d("div"),M=d("div"),y=d("h3"),he=w(de),pt=g(),ae=d("div"),$&&$.c(),tt=g(),ee&&ee.c(),rt=g(),ue=d("form"),oe=d("div"),fe=d("div"),Ve=d("label"),lt=w(Ae),Ue=w("*"),ze=g(),J=d("input"),or=g(),qe=d("p"),Pt=w(Dt),nr=w(": "),mt=d("span"),Ht=w(xt),ir=g(),st=d("div"),Oe=d("label"),Bt=w(It),dr=w("*"),ur=g(),Le=d("input"),fr=g(),at=d("div"),ot=d("label"),Ct=w(Vt),cr=g(),ye=d("textarea"),hr=g(),vt=d("div"),Pe=d("button"),Me.c(),pr=g(),He=d("div"),_t=d("div"),Xe=d("div"),yt=d("h3"),Nt=w(Mt),mr=g(),Ye=d("div"),nt=d("div"),it=d("label"),Rt=w(Tt),vr=g(),Be=d("input"),_r=g(),dt=d("div"),ut=d("label"),St=w(At),yr=g(),Ce=d("input"),gr=g(),ft=d("div"),be.c(),this.h()},l(p){e=u(p,"DIV",{class:!0});var D=i(e);l=u(D,"DIV",{class:!0});var je=i(l);s=u(je,"DIV",{class:!0});var Mr=i(s);n=u(Mr,"DIV",{class:!0});var Gt=i(n);c=u(Gt,"DIV",{class:!0,"data-svelte-h":!0}),ct(c)!=="svelte-1hzzmo"&&(c.innerHTML=h),f=b(Gt),_=u(Gt,"DIV",{});var Ut=i(_);k=u(Ut,"H3",{class:!0});var Tr=i(k);A=E(Tr,x),Tr.forEach(a),I=b(Ut),v=u(Ut,"P",{class:!0});var Ar=i(v);H=E(Ar,P),Ar.forEach(a),Ut.forEach(a),Gt.forEach(a),Mr.forEach(a),Q=b(je),F=u(je,"DIV",{class:!0});var Lr=i(F);R=u(Lr,"DIV",{class:!0});var zt=i(R);S=u(zt,"DIV",{class:!0,"data-svelte-h":!0}),ct(S)!=="svelte-1jg62ho"&&(S.innerHTML=B),C=b(zt),G=u(zt,"DIV",{});var qt=i(G);z=u(qt,"H3",{class:!0});var Pr=i(z);te=E(Pr,Z),Pr.forEach(a),ce=b(qt),pe=u(qt,"P",{class:!0});var Hr=i(pe);re=E(Hr,xe),Hr.forEach(a),qt.forEach(a),zt.forEach(a),Lr.forEach(a),K=b(je),me=u(je,"DIV",{class:!0});var Br=i(me);W=u(Br,"DIV",{class:!0});var Ot=i(W);le=u(Ot,"DIV",{class:!0,"data-svelte-h":!0}),ct(le)!=="svelte-ip13kc"&&(le.innerHTML=Se),Fe=b(Ot),ne=u(Ot,"DIV",{class:!0});var gt=i(ne);ve=u(gt,"H3",{class:!0});var Cr=i(ve);Ge=E(Cr,Te),Cr.forEach(a),$e=b(gt),ie=u(gt,"DIV",{class:!0});var jr=i(ie);X=u(jr,"DIV",{class:!0,style:!0}),i(X).forEach(a),jr.forEach(a),Ie=b(gt),L=u(gt,"P",{class:!0});var wr=i(L);q=E(wr,et),Y=E(wr,"%"),wr.forEach(a),gt.forEach(a),Ot.forEach(a),Br.forEach(a),je.forEach(a),O=b(D),m=u(D,"DIV",{class:!0});var Qt=i(m);M=u(Qt,"DIV",{class:!0});var Nr=i(M);y=u(Nr,"H3",{class:!0});var Rr=i(y);he=E(Rr,de),Rr.forEach(a),Nr.forEach(a),pt=b(Qt),ae=u(Qt,"DIV",{class:!0});var bt=i(ae);$&&$.l(bt),tt=b(bt),ee&&ee.l(bt),rt=b(bt),ue=u(bt,"FORM",{class:!0});var wt=i(ue);oe=u(wt,"DIV",{class:!0});var Xt=i(oe);fe=u(Xt,"DIV",{});var Et=i(fe);Ve=u(Et,"LABEL",{for:!0,class:!0});var Er=i(Ve);lt=E(Er,Ae),Ue=E(Er,"*"),Er.forEach(a),ze=b(Et),J=u(Et,"INPUT",{id:!0,type:!0,step:!0,placeholder:!0,min:!0,max:!0,class:!0}),or=b(Et),qe=u(Et,"P",{class:!0});var Yt=i(qe);Pt=E(Yt,Dt),nr=E(Yt,": "),mt=u(Yt,"SPAN",{class:!0});var Sr=i(mt);Ht=E(Sr,xt),Sr.forEach(a),Yt.forEach(a),Et.forEach(a),ir=b(Xt),st=u(Xt,"DIV",{});var Jt=i(st);Oe=u(Jt,"LABEL",{for:!0,class:!0});var kr=i(Oe);Bt=E(kr,It),dr=E(kr,"*"),kr.forEach(a),ur=b(Jt),Le=u(Jt,"INPUT",{id:!0,type:!0,class:!0}),Jt.forEach(a),Xt.forEach(a),fr=b(wt),at=u(wt,"DIV",{});var Kt=i(at);ot=u(Kt,"LABEL",{for:!0,class:!0});var Fr=i(ot);Ct=E(Fr,Vt),Fr.forEach(a),cr=b(Kt),ye=u(Kt,"TEXTAREA",{id:!0,rows:!0,placeholder:!0,class:!0}),i(ye).forEach(a),Kt.forEach(a),hr=b(wt),vt=u(wt,"DIV",{class:!0});var Gr=i(vt);Pe=u(Gr,"BUTTON",{type:!0,class:!0});var Ur=i(Pe);Me.l(Ur),Ur.forEach(a),Gr.forEach(a),wt.forEach(a),bt.forEach(a),Qt.forEach(a),pr=b(D),He=u(D,"DIV",{class:!0});var Wt=i(He);_t=u(Wt,"DIV",{class:!0});var zr=i(_t);Xe=u(zr,"DIV",{class:!0});var Zt=i(Xe);yt=u(Zt,"H3",{class:!0});var qr=i(yt);Nt=E(qr,Mt),qr.forEach(a),mr=b(Zt),Ye=u(Zt,"DIV",{class:!0});var $t=i(Ye);nt=u($t,"DIV",{});var er=i(nt);it=u(er,"LABEL",{for:!0,class:!0});var Or=i(it);Rt=E(Or,Tt),Or.forEach(a),vr=b(er),Be=u(er,"INPUT",{id:!0,type:!0,class:!0}),er.forEach(a),_r=b($t),dt=u($t,"DIV",{});var tr=i(dt);ut=u(tr,"LABEL",{for:!0,class:!0});var Qr=i(ut);St=E(Qr,At),Qr.forEach(a),yr=b(tr),Ce=u(tr,"INPUT",{id:!0,type:!0,class:!0}),tr.forEach(a),$t.forEach(a),Zt.forEach(a),zr.forEach(a),gr=b(Wt),ft=u(Wt,"DIV",{class:!0});var Xr=i(ft);be.l(Xr),Xr.forEach(a),Wt.forEach(a),D.forEach(a),this.h()},h(){r(c,"class","bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-3 text-white"),r(k,"class","text-sm font-medium text-purple-600"),r(v,"class","mt-1 text-2xl font-semibold text-gray-900"),r(n,"class","flex items-center space-x-4"),r(s,"class","bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6"),r(S,"class","bg-gradient-to-r from-red-500 to-red-600 rounded-xl p-3 text-white"),r(z,"class","text-sm font-medium text-purple-600"),r(pe,"class","mt-1 text-2xl font-semibold text-gray-900"),r(R,"class","flex items-center space-x-4"),r(F,"class","bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6"),r(le,"class","bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl p-3 text-white"),r(ve,"class","text-sm font-medium text-purple-600"),r(X,"class","bg-gradient-to-r from-purple-600 to-indigo-600 h-2.5 rounded-full"),sr(X,"width",o[11]+"%"),r(ie,"class","w-full bg-gray-200 rounded-full h-2.5 mt-2"),r(L,"class","mt-1 text-sm font-medium text-gray-700"),r(ne,"class","flex-1"),r(W,"class","flex items-center space-x-4"),r(me,"class","bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6"),r(l,"class","grid grid-cols-1 md:grid-cols-3 gap-6"),r(y,"class","text-lg font-medium bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent"),r(M,"class","p-6 border-b border-gray-200/50"),r(Ve,"for","amount"),r(Ve,"class","block text-sm font-medium text-purple-600 mb-2"),r(J,"id","amount"),r(J,"type","number"),r(J,"step","0.01"),r(J,"placeholder",_e=o[14]("payments.form.amount_placeholder")),r(J,"min","0"),r(J,"max",o[0]),r(J,"class","w-full pl-4 pr-4 py-3 border border-gray-200 bg-white text-gray-900 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 shadow-sm"),J.required=!0,r(mt,"class","font-medium text-gray-700"),r(qe,"class","mt-2 text-sm text-gray-500"),r(Oe,"for","paymentDate"),r(Oe,"class","block text-sm font-medium text-purple-600 mb-2"),r(Le,"id","paymentDate"),r(Le,"type","date"),r(Le,"class","w-full pl-4 pr-4 py-3 border border-gray-200 bg-white text-gray-900 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 shadow-sm"),Le.required=!0,r(oe,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),r(ot,"for","notes"),r(ot,"class","block text-sm font-medium text-purple-600 mb-2"),r(ye,"id","notes"),r(ye,"rows","3"),r(ye,"placeholder",jt=o[14]("payments.form.notes_placeholder")),r(ye,"class","w-full pl-4 pr-4 py-3 border border-gray-200 bg-white text-gray-900 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 shadow-sm"),r(Pe,"type","submit"),Pe.disabled=o[2],r(Pe,"class","flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl font-medium disabled:opacity-70 disabled:cursor-not-allowed"),r(vt,"class","flex justify-end pt-2"),r(ue,"class","space-y-6"),r(ae,"class","p-6"),r(m,"class","bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden"),r(yt,"class","text-lg font-medium bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent"),r(it,"for","startDate"),r(it,"class","block text-sm font-medium text-purple-600 mb-1"),r(Be,"id","startDate"),r(Be,"type","date"),r(Be,"class","w-full pl-4 pr-4 py-2 border border-gray-200 bg-white text-gray-900 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 shadow-sm"),r(ut,"for","endDate"),r(ut,"class","block text-sm font-medium text-purple-600 mb-1"),r(Ce,"id","endDate"),r(Ce,"type","date"),r(Ce,"class","w-full pl-4 pr-4 py-2 border border-gray-200 bg-white text-gray-900 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 shadow-sm"),r(Ye,"class","flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4"),r(Xe,"class","flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"),r(_t,"class","p-6 border-b border-gray-200/50"),r(ft,"class","p-6"),r(He,"class","bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden"),r(e,"class","min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-6 space-y-6")},m(p,D){U(p,e,D),t(e,l),t(l,s),t(s,n),t(n,c),t(n,f),t(n,_),t(_,k),t(k,A),t(_,I),t(_,v),t(v,H),t(l,Q),t(l,F),t(F,R),t(R,S),t(R,C),t(R,G),t(G,z),t(z,te),t(G,ce),t(G,pe),t(pe,re),t(l,K),t(l,me),t(me,W),t(W,le),t(W,Fe),t(W,ne),t(ne,ve),t(ve,Ge),t(ne,$e),t(ne,ie),t(ie,X),t(ne,Ie),t(ne,L),t(L,q),t(L,Y),t(e,O),t(e,m),t(m,M),t(M,y),t(y,he),t(m,pt),t(m,ae),$&&$.m(ae,null),t(ae,tt),ee&&ee.m(ae,null),t(ae,rt),t(ae,ue),t(ue,oe),t(oe,fe),t(fe,Ve),t(Ve,lt),t(Ve,Ue),t(fe,ze),t(fe,J),Ne(J,o[5]),t(fe,or),t(fe,qe),t(qe,Pt),t(qe,nr),t(qe,mt),t(mt,Ht),t(oe,ir),t(oe,st),t(st,Oe),t(Oe,Bt),t(Oe,dr),t(st,ur),t(st,Le),Ne(Le,o[6]),t(ue,fr),t(ue,at),t(at,ot),t(ot,Ct),t(at,cr),t(at,ye),Ne(ye,o[7]),t(ue,hr),t(ue,vt),t(vt,Pe),Me.m(Pe,null),t(e,pr),t(e,He),t(He,_t),t(_t,Xe),t(Xe,yt),t(yt,Nt),t(Xe,mr),t(Xe,Ye),t(Ye,nt),t(nt,it),t(it,Rt),t(nt,vr),t(nt,Be),Ne(Be,o[8]),t(Ye,_r),t(Ye,dt),t(dt,ut),t(ut,St),t(dt,yr),t(dt,Ce),Ne(Ce,o[9]),t(He,gr),t(He,ft),Ke[ge].m(ft,null),j=!0,br||(Dr=[We(J,"input",o[20]),We(Le,"input",o[21]),We(ye,"input",o[22]),We(ue,"submit",dl(o[15])),We(Be,"input",o[23]),We(Be,"change",o[16]),We(Ce,"input",o[24]),We(Ce,"change",o[16])],br=!0)},p(p,D){(!j||D[0]&16384)&&x!==(x=p[14]("payments.stats.total_paid")+"")&&T(A,x),(!j||D[0]&1024)&&P!==(P=Ze(p[10])+"")&&T(H,P),(!j||D[0]&16384)&&Z!==(Z=p[14]("payments.stats.remaining_balance")+"")&&T(te,Z),(!j||D[0]&1)&&xe!==(xe=Ze(p[0])+"")&&T(re,xe),(!j||D[0]&16384)&&Te!==(Te=p[14]("payments.stats.progress")+"")&&T(Ge,Te),(!j||D[0]&2048)&&sr(X,"width",p[11]+"%"),(!j||D[0]&2048)&&et!==(et=p[11].toFixed(1)+"")&&T(q,et),(!j||D[0]&16384)&&de!==(de=p[14]("payments.form.add_payment")+"")&&T(he,de),p[3]?$?$.p(p,D):($=$r(p),$.c(),$.m(ae,tt)):$&&($.d(1),$=null),p[4]?ee?ee.p(p,D):(ee=el(p),ee.c(),ee.m(ae,rt)):ee&&(ee.d(1),ee=null),(!j||D[0]&16384)&&Ae!==(Ae=p[14]("payments.form.amount")+"")&&T(lt,Ae),(!j||D[0]&16384&&_e!==(_e=p[14]("payments.form.amount_placeholder")))&&r(J,"placeholder",_e),(!j||D[0]&1)&&r(J,"max",p[0]),D[0]&32&&al(J.value)!==p[5]&&Ne(J,p[5]),(!j||D[0]&16384)&&Dt!==(Dt=p[14]("payments.form.remaining_balance")+"")&&T(Pt,Dt),(!j||D[0]&1)&&xt!==(xt=Ze(p[0])+"")&&T(Ht,xt),(!j||D[0]&16384)&&It!==(It=p[14]("payments.form.payment_date")+"")&&T(Bt,It),D[0]&64&&Ne(Le,p[6]),(!j||D[0]&16384)&&Vt!==(Vt=p[14]("payments.form.notes")+"")&&T(Ct,Vt),(!j||D[0]&16384&&jt!==(jt=p[14]("payments.form.notes_placeholder")))&&r(ye,"placeholder",jt),D[0]&128&&Ne(ye,p[7]),Ft===(Ft=xr(p))&&Me?Me.p(p,D):(Me.d(1),Me=Ft(p),Me&&(Me.c(),Me.m(Pe,null))),(!j||D[0]&4)&&(Pe.disabled=p[2]),(!j||D[0]&16384)&&Mt!==(Mt=p[14]("payments.history.title")+"")&&T(Nt,Mt),(!j||D[0]&16384)&&Tt!==(Tt=p[14]("payments.history.start_date")+"")&&T(Rt,Tt),D[0]&256&&Ne(Be,p[8]),(!j||D[0]&16384)&&At!==(At=p[14]("payments.history.end_date")+"")&&T(St,At),D[0]&512&&Ne(Ce,p[9]);let je=ge;ge=Vr(p),ge===je?Ke[ge].p(p,D):(ol(),ar(Ke[je],1,1,()=>{Ke[je]=null}),nl(),be=Ke[ge],be?be.p(p,D):(be=Ke[ge]=Ir[ge](p),be.c()),Lt(be,1),be.m(ft,null))},i(p){j||(p&&kt(()=>{j&&(N||(N=we(s,Ee,{y:20,duration:300,easing:Re},!0)),N.run(1))}),p&&kt(()=>{j&&(V||(V=we(F,Ee,{y:20,duration:300,delay:50,easing:Re},!0)),V.run(1))}),p&&kt(()=>{j&&(se||(se=we(me,Ee,{y:20,duration:300,delay:100,easing:Re},!0)),se.run(1))}),p&&kt(()=>{j&&(Qe||(Qe=we(m,Ee,{y:20,duration:300,delay:150,easing:Re},!0)),Qe.run(1))}),Lt(be),p&&kt(()=>{j&&(Je||(Je=we(He,Ee,{y:20,duration:300,delay:200,easing:Re},!0)),Je.run(1))}),j=!0)},o(p){p&&(N||(N=we(s,Ee,{y:20,duration:300,easing:Re},!1)),N.run(0)),p&&(V||(V=we(F,Ee,{y:20,duration:300,delay:50,easing:Re},!1)),V.run(0)),p&&(se||(se=we(me,Ee,{y:20,duration:300,delay:100,easing:Re},!1)),se.run(0)),p&&(Qe||(Qe=we(m,Ee,{y:20,duration:300,delay:150,easing:Re},!1)),Qe.run(0)),ar(be),p&&(Je||(Je=we(He,Ee,{y:20,duration:300,delay:200,easing:Re},!1)),Je.run(0)),j=!1},d(p){p&&a(e),p&&N&&N.end(),p&&V&&V.end(),p&&se&&se.end(),$&&$.d(),ee&&ee.d(),Me.d(),p&&Qe&&Qe.end(),Ke[ge].d(),p&&Je&&Je.end(),br=!1,ul(Dr)}}}function Ml(o,e,l){let s;fl(o,vl,V=>l(14,s=V));let{cessionId:n}=e,{remainingBalance:c}=e,{totalLoanAmount:h}=e,{monthlyPayment:f}=e,_=[],k=!1,x="",A="",I="",v=lr(new Date,"yyyy-MM-dd"),P="REGULAR",H="",N=lr(_l(new Date,3),"yyyy-MM-dd"),Q=lr(new Date,"yyyy-MM-dd"),F=0,R=0,S=0,B=0;cl(async()=>{if(!n||n==="null"||n==="undefined"){l(3,x=s("payments.errors.invalid_cession_id"));return}await C(),await hl()});async function C(){if(!n||n==="null"||n==="undefined"){l(3,x=s("payments.errors.invalid_cession_id"));return}l(2,k=!0),l(3,x="");try{const V=await Jr.getPaymentsByDateRange(n,N,Q);V.success?(l(1,_=V.data),G()):l(3,x=V.error||s("payments.errors.load_failed"))}catch{l(3,x=s("payments.errors.load_failed"))}finally{l(2,k=!1)}}function G(){l(10,F=_.reduce((V,K)=>V+K.amount,0)),l(11,R=h>0?F/h*100:0),l(12,S=f>0?Math.floor(F/f):0),l(13,B=f>0?F/f-S:0)}async function z(){if(!I||!v){l(3,x=s("payments.validation.required_fields"));return}const V=parseFloat(I);if(isNaN(V)||V<=0){l(3,x=s("payments.validation.invalid_amount"));return}if(V>c){l(3,x=s("payments.validation.amount_exceeds_balance"));return}l(2,k=!0),l(3,x="");try{const K=await Jr.create({cessionId:n,amount:V,paymentDate:v,paymentType:P,notes:H});K.success?(l(4,A=s("payments.success.added")),l(5,I=""),l(6,v=lr(new Date,"yyyy-MM-dd")),P="REGULAR",l(7,H=""),await C(),l(0,c-=V),c<0&&l(0,c=0)):l(3,x=K.error||s("payments.errors.add_failed"))}catch(K){l(3,x=K.message||s("payments.errors.add_failed"))}finally{l(2,k=!1)}}function Z(){C()}function te(){I=al(this.value),l(5,I)}function ce(){v=this.value,l(6,v)}function pe(){H=this.value,l(7,H)}function xe(){N=this.value,l(8,N)}function re(){Q=this.value,l(9,Q)}return o.$$set=V=>{"cessionId"in V&&l(17,n=V.cessionId),"remainingBalance"in V&&l(0,c=V.remainingBalance),"totalLoanAmount"in V&&l(18,h=V.totalLoanAmount),"monthlyPayment"in V&&l(19,f=V.monthlyPayment)},[c,_,k,x,A,I,v,H,N,Q,F,R,S,B,s,z,Z,n,h,f,te,ce,pe,xe,re]}class Rl extends pl{constructor(e){super(),ml(this,e,Ml,Vl,il,{cessionId:17,remainingBalance:0,totalLoanAmount:18,monthlyPayment:19},null,[-1,-1])}}export{Rl as P};
